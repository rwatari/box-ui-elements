/*!
 * Box UI Element
 * 
 * Copyright 2019 Box, Inc. All rights reserved.
 * 
 * This product includes software developed by Box, Inc. ("Box")
 * (http://www.box.com)
 * 
 * ALL BOX SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL BOX BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 * See the Box license for the specific language governing permissions
 * and limitations under the license.
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{3190:function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_accessible_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),IconEdit=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?"#999":_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?14:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?14:_ref$width;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_accessible_svg__WEBPACK_IMPORTED_MODULE_1__.a,{className:"icon-edit ".concat(className),height:height,title:title,viewBox:"0 0 14 14",width:width},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{className:"fill-color",d:"M3.21 7.89l6.47-6.48a2 2 0 0 1 2.88 2.78h-.05L6 10.72 3.21 7.89zM2.24 9l2.83 2.83L1.67 13c-.52.18-.79-.1-.62-.61z",fill:color}))};IconEdit.displayName="IconEdit",IconEdit.__docgenInfo={description:"",methods:[],displayName:"IconEdit",props:{className:{defaultValue:{value:"''",computed:!1},required:!1},color:{defaultValue:{value:"'#999'",computed:!1},required:!1},height:{defaultValue:{value:"14",computed:!1},required:!1},width:{defaultValue:{value:"14",computed:!1},required:!1}}},__webpack_exports__.a=IconEdit,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconEdit.js"]={name:"IconEdit",docgenInfo:IconEdit.__docgenInfo,path:"src/icons/general/IconEdit.js"})},3205:function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(79),global=__webpack_require__(38),isForced=__webpack_require__(563),inheritIfRequired=__webpack_require__(786),defineProperty=__webpack_require__(101).f,getOwnPropertyNames=__webpack_require__(355).f,isRegExp=__webpack_require__(1119),getFlags=__webpack_require__(1117),redefine=__webpack_require__(138),fails=__webpack_require__(37),setSpecies=__webpack_require__(785),MATCH=__webpack_require__(44)("match"),NativeRegExp=global.RegExp,RegExpPrototype=NativeRegExp.prototype,re1=/a/g,re2=/a/g,CORRECT_NEW=new NativeRegExp(re1)!==re1;if(DESCRIPTORS&&isForced("RegExp",!CORRECT_NEW||fails((function(){return re2[MATCH]=!1,NativeRegExp(re1)!=re1||NativeRegExp(re2)==re2||"/a/i"!=NativeRegExp(re1,"i")})))){for(var RegExpWrapper=function RegExp(pattern,flags){var thisIsRegExp=this instanceof RegExpWrapper,patternIsRegExp=isRegExp(pattern),flagsAreUndefined=void 0===flags;return!thisIsRegExp&&patternIsRegExp&&pattern.constructor===RegExpWrapper&&flagsAreUndefined?pattern:inheritIfRequired(CORRECT_NEW?new NativeRegExp(patternIsRegExp&&!flagsAreUndefined?pattern.source:pattern,flags):NativeRegExp((patternIsRegExp=pattern instanceof RegExpWrapper)?pattern.source:pattern,patternIsRegExp&&flagsAreUndefined?getFlags.call(pattern):flags),thisIsRegExp?this:RegExpPrototype,RegExpWrapper)},proxy=function(key){key in RegExpWrapper||defineProperty(RegExpWrapper,key,{configurable:!0,get:function(){return NativeRegExp[key]},set:function(it){NativeRegExp[key]=it}})},keys=getOwnPropertyNames(NativeRegExp),index=0;keys.length>index;)proxy(keys[index++]);RegExpPrototype.constructor=RegExpWrapper,RegExpWrapper.prototype=RegExpPrototype,redefine(global,"RegExp",RegExpWrapper)}setSpecies("RegExp")},3272:function(module,exports,__webpack_require__){},3273:function(module,exports,__webpack_require__){},3274:function(module,exports,__webpack_require__){},3275:function(module,exports,__webpack_require__){},3276:function(module,exports,__webpack_require__){},3277:function(module,exports,__webpack_require__){},3278:function(module,exports,__webpack_require__){},3279:function(module,exports,__webpack_require__){},3280:function(module,exports,__webpack_require__){},3281:function(module,exports,__webpack_require__){},3282:function(module,exports,__webpack_require__){},3442:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(6),__webpack_require__(11),__webpack_require__(18),__webpack_require__(19),__webpack_require__(24),__webpack_require__(1108),__webpack_require__(316),__webpack_require__(12),__webpack_require__(560),__webpack_require__(33),__webpack_require__(34),__webpack_require__(20),__webpack_require__(17),__webpack_require__(10),__webpack_require__(16),__webpack_require__(25),__webpack_require__(15);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),flow=__webpack_require__(558),flow_default=__webpack_require__.n(flow),get=__webpack_require__(13),get_default=__webpack_require__.n(get),noop=__webpack_require__(7),noop_default=__webpack_require__.n(noop),index_es=__webpack_require__(3),LoadingIndicator=(__webpack_require__(313),__webpack_require__(280)),messages=__webpack_require__(4),SidebarContent=__webpack_require__(3185),uniqueId=(__webpack_require__(30),__webpack_require__(36)),uniqueId_default=__webpack_require__.n(uniqueId),interactionTargets=__webpack_require__(3173),SidebarSection=__webpack_require__(3186),skillUtils=__webpack_require__(3224),constants=__webpack_require__(1),Status=function(_ref){var _card$status=_ref.card.status,status=void 0===_card$status?{}:_card$status,code=status.code,message=status.message,localizedMessage=messages.a.skillUnknownError;switch(code){case constants.pe:localizedMessage=messages.a.skillInvalidFileSizeError;break;case constants.oe:localizedMessage=messages.a.skillInvalidFileExtensionError;break;case constants.me:case constants.le:case constants.qe:case constants.re:localizedMessage=messages.a.skillUnknownError;break;case constants.ne:localizedMessage=messages.a.skillFileProcessingError;break;case constants.we:localizedMessage=messages.a.skillPendingStatus;break;case constants.ve:localizedMessage=messages.a.skillInvokedStatus;break;default:if(message)return message}return react.createElement(index_es.b,localizedMessage)};Status.displayName="Status",Status.__docgenInfo={description:"",methods:[],displayName:"Status",props:{card:{required:!0,flowType:{name:"SkillCard"},description:""}}};var status_Status=Status;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/skills/status/Status.js"]={name:"Status",docgenInfo:Status.__docgenInfo,path:"src/elements/content-sidebar/skills/status/Status.js"});var classnames=__webpack_require__(8),classnames_default=__webpack_require__.n(classnames),variables=__webpack_require__(14),PlainButton=__webpack_require__(51),IconEdit=__webpack_require__(3190),accessible_svg=__webpack_require__(5),IconCopy=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?"#999":_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?14:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?14:_ref$width;return react.createElement(accessible_svg.a,{className:"icon-copy ".concat(className),height:height,title:title,viewBox:"0 0 14 14",width:width},react.createElement("path",{className:"fill-color",d:"M1 11a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h9a1 1 0 0 1 0 2H2v8a1 1 0 0 1-1 1z",fill:color}),react.createElement("path",{className:"fill-color",d:"M13 3H3v10a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm-3 8H7a1 1 0 0 1 0-2h3a1 1 0 0 1 0 2zm0-3H7a1 1 0 0 1 0-2h3a1 1 0 0 1 0 2z",fill:color}))};IconCopy.displayName="IconCopy",IconCopy.__docgenInfo={description:"",methods:[],displayName:"IconCopy",props:{className:{defaultValue:{value:"''",computed:!1},required:!1},color:{defaultValue:{value:"'#999'",computed:!1},required:!1},height:{defaultValue:{value:"14",computed:!1},required:!1},width:{defaultValue:{value:"14",computed:!1},required:!1}}};var general_IconCopy=IconCopy;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconCopy.js"]={name:"IconCopy",docgenInfo:IconCopy.__docgenInfo,path:"src/icons/general/IconCopy.js"});var IconExpand=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?"#979797":_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?13:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?13:_ref$width;return react.createElement(accessible_svg.a,{className:"icon-expand ".concat(className),height:height,title:title,viewBox:"0 0 13 13",width:width},react.createElement("path",{className:"fill-color",d:"M12 0H6a1 1 0 0 0 0 2h5v5a1 1 0 0 0 2 0V1a1 1 0 0 0-1-1zM7 11H2V6a1 1 0 0 0-2 0v6a1 1 0 0 0 1 1h6a1 1 0 0 0 0-2z",fill:color}))};IconExpand.displayName="IconExpand",IconExpand.__docgenInfo={description:"",methods:[],displayName:"IconExpand",props:{className:{defaultValue:{value:"''",computed:!1},required:!1},color:{defaultValue:{value:"'#979797'",computed:!1},required:!1},height:{defaultValue:{value:"13",computed:!1},required:!1},width:{defaultValue:{value:"13",computed:!1},required:!1}}};var general_IconExpand=IconExpand;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconExpand.js"]={name:"IconExpand",docgenInfo:IconExpand.__docgenInfo,path:"src/icons/general/IconExpand.js"});var IconCollapse=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?"#979797":_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?13:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?13:_ref$width;return react.createElement(accessible_svg.a,{className:"icon-collapse ".concat(className),height:height,title:title,viewBox:"0 0 13 13",width:width},react.createElement("path",{className:"fill-color",d:"M8 6h4a1 1 0 0 0 0-2H9V1a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1zM1 9h3v3a1 1 0 0 0 2 0V8a1 1 0 0 0-1-1H1a1 1 0 0 0 0 2z",fill:color}))};IconCollapse.displayName="IconCollapse",IconCollapse.__docgenInfo={description:"",methods:[],displayName:"IconCollapse",props:{className:{defaultValue:{value:"''",computed:!1},required:!1},color:{defaultValue:{value:"'#979797'",computed:!1},required:!1},height:{defaultValue:{value:"13",computed:!1},required:!1},width:{defaultValue:{value:"13",computed:!1},required:!1}}};var general_IconCollapse=IconCollapse;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconCollapse.js"]={name:"IconCollapse",docgenInfo:IconCollapse.__docgenInfo,path:"src/icons/general/IconCollapse.js"});var datetime=__webpack_require__(236),LoadingIndicatorWrapper=__webpack_require__(1110),Tooltip=__webpack_require__(559);__webpack_require__(1856);var isValidStartTime=function(timeslice){return!!timeslice&&"number"==typeof timeslice.start},isValidTimeSlice=function(timeslices){return Array.isArray(timeslices)&&isValidStartTime(timeslices[0])},ReadOnlyTranscriptRow=function(_ref){var time=_ref.time,_ref$text=_ref.text,text=void 0===_ref$text?"":_ref$text,onClick=_ref.onClick,interactionTarget=_ref.interactionTarget;return react.createElement(PlainButton.a,{className:"be-transcript-row","data-resin-target":interactionTarget,onClick:onClick,type:"button"},time&&react.createElement("div",{className:"be-transcript-time"},time),react.createElement("div",{className:"be-transcript-text"},text))};ReadOnlyTranscriptRow.displayName="ReadOnlyTranscriptRow",ReadOnlyTranscriptRow.__docgenInfo={description:"",methods:[],displayName:"ReadOnlyTranscriptRow",props:{text:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},interactionTarget:{required:!0,flowType:{name:"string"},description:""},onClick:{required:!0,flowType:{name:"Function"},description:""},time:{required:!1,flowType:{name:"string"},description:""}}};var transcript_ReadOnlyTranscriptRow=ReadOnlyTranscriptRow;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/skills/transcript/ReadOnlyTranscriptRow.js"]={name:"ReadOnlyTranscriptRow",docgenInfo:ReadOnlyTranscriptRow.__docgenInfo,path:"src/elements/content-sidebar/skills/transcript/ReadOnlyTranscriptRow.js"});var react_textarea_autosize_esm_browser=__webpack_require__(1851),PrimaryButton=__webpack_require__(159),Button=__webpack_require__(52),EditingTranscriptRow_EditingTranscriptRow=(__webpack_require__(3272),function(_ref){var time=_ref.time,_ref$text=_ref.text,text=void 0===_ref$text?"":_ref$text,onSave=_ref.onSave,onCancel=_ref.onCancel,onChange=_ref.onChange;return react.createElement("div",{className:"be-transcript-row be-transcript-editing-row"},time&&react.createElement("div",{className:"be-transcript-time"},time),react.createElement("div",{className:"be-transcript-text"},react.createElement(react_textarea_autosize_esm_browser.default,{maxRows:10,onChange:onChange,value:text}),react.createElement("div",{className:"be-transcript-buttons"},react.createElement(Button.a,{"data-resin-target":interactionTargets.f.TRANSCRIPTS.EDIT_CANCEL,onClick:onCancel,type:"button"},react.createElement(index_es.b,messages.a.cancel)),react.createElement(PrimaryButton.a,{"data-resin-target":interactionTargets.f.TRANSCRIPTS.EDIT_SAVE,onClick:onSave,type:"button"},react.createElement(index_es.b,messages.a.save)))))});EditingTranscriptRow_EditingTranscriptRow.displayName="EditingTranscriptRow",EditingTranscriptRow_EditingTranscriptRow.__docgenInfo={description:"",methods:[],displayName:"EditingTranscriptRow",props:{text:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},onCancel:{required:!0,flowType:{name:"Function"},description:""},onChange:{required:!0,flowType:{name:"Function"},description:""},onSave:{required:!0,flowType:{name:"Function"},description:""},time:{required:!1,flowType:{name:"string"},description:""}}};var transcript_EditingTranscriptRow=EditingTranscriptRow_EditingTranscriptRow;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/skills/transcript/EditingTranscriptRow.js"]={name:"EditingTranscriptRow",docgenInfo:EditingTranscriptRow_EditingTranscriptRow.__docgenInfo,path:"src/elements/content-sidebar/skills/transcript/EditingTranscriptRow.js"});__webpack_require__(3273);var TranscriptRow_TranscriptRow=function(_ref){var appears=_ref.appears,text=_ref.text,isEditing=_ref.isEditing,onClick=_ref.onClick,onSave=_ref.onSave,onCancel=_ref.onCancel,onChange=_ref.onChange,interactionTarget=_ref.interactionTarget,start=isValidTimeSlice(appears)&&Array.isArray(appears)&&1===appears.length?Object(datetime.e)(appears[0].start):void 0;return isEditing?react_default.a.createElement(transcript_EditingTranscriptRow,{onCancel:onCancel,onChange:onChange,onSave:onSave,text:text,time:start}):react_default.a.createElement(transcript_ReadOnlyTranscriptRow,{interactionTarget:interactionTarget,onClick:onClick,text:text,time:start})};TranscriptRow_TranscriptRow.__docgenInfo={description:"",methods:[],displayName:"TranscriptRow",props:{appears:{required:!1,flowType:{name:"Array",elements:[{name:"SkillCardEntryTimeSlice"}],raw:"Array<SkillCardEntryTimeSlice>"},description:""},interactionTarget:{required:!0,flowType:{name:"string"},description:""},isEditing:{required:!0,flowType:{name:"boolean"},description:""},onCancel:{required:!0,flowType:{name:"Function"},description:""},onChange:{required:!0,flowType:{name:"Function"},description:""},onClick:{required:!0,flowType:{name:"Function"},description:""},onSave:{required:!0,flowType:{name:"Function"},description:""},text:{required:!1,flowType:{name:"string"},description:""}}};var transcript_TranscriptRow=TranscriptRow_TranscriptRow;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/skills/transcript/TranscriptRow.js"]={name:"TranscriptRow",docgenInfo:TranscriptRow_TranscriptRow.__docgenInfo,path:"src/elements/content-sidebar/skills/transcript/TranscriptRow.js"});__webpack_require__(3274);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var Transcript_ref3=react.createElement(general_IconCopy,{color:variables.bdlGray50}),_ref4=react.createElement(general_IconExpand,{color:variables.bdlGray50}),_ref5=react.createElement(general_IconCollapse,{color:variables.bdlGray50}),_ref6=react.createElement(IconEdit.a,null),Transcript_Transcript=function(_React$PureComponent){function Transcript(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Transcript);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,(_getPrototypeOf2=_getPrototypeOf(Transcript)).call.apply(_getPrototypeOf2,[this].concat(args))),_defineProperty(_assertThisInitialized(_this),"state",{isEditingIndex:void 0,newTranscriptText:"",isCollapsed:!0,isLoading:!1}),_defineProperty(_assertThisInitialized(_this),"transcriptReducer",(function(accumulator,_ref){var appears=_ref.appears,text=_ref.text,start=isValidTimeSlice(appears)&&Array.isArray(appears)?"".concat(Object(datetime.e)(appears[0].start),":"):"";return"".concat(accumulator).concat(start," ").concat(text||"","\r\n")})),_defineProperty(_assertThisInitialized(_this),"transcriptMapper",(function(_ref2,index){var appears=_ref2.appears,text=_ref2.text,_this$state=_this.state,isEditingIndex=_this$state.isEditingIndex,newTranscriptText=_this$state.newTranscriptText,isEditingRow=isEditingIndex===index,transcriptText=isEditingRow?newTranscriptText:text,interactionTarget=isEditingRow?interactionTargets.f.TRANSCRIPTS.EDIT_TEXT:interactionTargets.f.TRANSCRIPTS.TRANSCRIPT;return react.createElement(transcript_TranscriptRow,{key:index,appears:appears,interactionTarget:interactionTarget,isEditing:isEditingRow,onCancel:_this.onCancel,onChange:_this.onChange,onClick:function onClick(){return _this.onClick(index)},onSave:_this.onSave,text:transcriptText})})),_defineProperty(_assertThisInitialized(_this),"toggleIsEditing",(function(){_this.setState((function(prevState){return{isEditingIndex:"number"==typeof prevState.isEditingIndex?void 0:-1}}))})),_defineProperty(_assertThisInitialized(_this),"onSave",(function(){var _this$props=_this.props,entries=_this$props.card.entries,onSkillChange=_this$props.onSkillChange,_this$state2=_this.state,isEditingIndex=_this$state2.isEditingIndex,newTranscriptText=_this$state2.newTranscriptText;if("number"==typeof isEditingIndex){var entry=entries[isEditingIndex];entry.text===newTranscriptText?_this.onCancel():(_this.setState({isLoading:!0,isEditingIndex:-1}),onSkillChange(null,null,[{replacement:_objectSpread({},entry,{text:newTranscriptText}),replaced:entry}]))}})),_defineProperty(_assertThisInitialized(_this),"onCancel",(function(){_this.setState({isEditingIndex:-1,newTranscriptText:""})})),_defineProperty(_assertThisInitialized(_this),"onChange",(function(event){var currentTarget=event.currentTarget;_this.setState({newTranscriptText:currentTarget.value})})),_defineProperty(_assertThisInitialized(_this),"onClick",(function(index){var entries=_this.props.card.entries;"number"==typeof _this.state.isEditingIndex?_this.setState({isEditingIndex:index,newTranscriptText:entries[index].text}):_this.previewSegment(index)})),_defineProperty(_assertThisInitialized(_this),"copyTranscript",(function(){var entries=_this.props.card.entries;(function copy(string){var textarea=document.createElement("textarea"),body=document.body;textarea.value=string,textarea.style.display="hidden",body&&(body.appendChild(textarea),textarea.select(),document.execCommand("copy"),body.removeChild(textarea))})(entries.reduce(_this.transcriptReducer,"")),_this.copyBtn&&_this.copyBtn.classList.add("be-transcript-copied"),setTimeout((function(){_this.copyBtn&&_this.copyBtn.classList.remove("be-transcript-copied")}),1e3)})),_defineProperty(_assertThisInitialized(_this),"copyBtnRef",(function(btn){_this.copyBtn=btn})),_defineProperty(_assertThisInitialized(_this),"toggleExpandCollapse",(function(){_this.setState((function(prevState){return{isCollapsed:!prevState.isCollapsed}}))})),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Transcript,_React$PureComponent),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Transcript,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps!==this.props){var wasEditing="number"==typeof this.state.isEditingIndex;this.setState({isEditingIndex:wasEditing?-1:void 0,newTranscriptText:"",isLoading:!1})}}},{key:"previewSegment",value:function previewSegment(index){var _this$props2=this.props,entries=_this$props2.card.entries,getViewer=_this$props2.getViewer,appears=entries[index].appears,viewer=getViewer?getViewer():null,isValid=isValidTimeSlice(appears)&&Array.isArray(appears)&&1===appears.length,start=isValid?appears[0].start:0;isValid&&viewer&&"function"==typeof viewer.play&&viewer.play(start)}},{key:"render",value:function render(){var _this$props3=this.props,entries=_this$props3.card.entries,isEditable=_this$props3.isEditable,_this$state3=this.state,isEditingIndex=_this$state3.isEditingIndex,isCollapsed=_this$state3.isCollapsed,isLoading=_this$state3.isLoading,hasEntries=0<entries.length,hasManyEntries=5<entries.length,isEditing="number"==typeof isEditingIndex,editBtnClassName=classnames_default()("be-transcript-edit",{"be-transcript-is-editing":isEditing}),contentClassName=classnames_default()({"be-transcript-content-collapsed":isCollapsed}),expandCollapseMessage=isCollapsed?messages.a.expand:messages.a.collapse;return react.createElement(LoadingIndicatorWrapper.a,{className:"be-transcript",isLoading:isLoading},hasEntries&&!isLoading&&react.createElement("div",{className:"be-transcript-actions"},react.createElement(Tooltip.a,{text:react.createElement(index_es.b,messages.a.copy)},react.createElement(PlainButton.a,{className:"be-transcript-copy","data-resin-target":interactionTargets.f.TRANSCRIPTS.COPY,getDOMRef:this.copyBtnRef,onClick:this.copyTranscript,type:"button"},Transcript_ref3)),hasManyEntries&&react.createElement(Tooltip.a,{text:react.createElement(index_es.b,expandCollapseMessage)},react.createElement(PlainButton.a,{className:"be-transcript-expand","data-resin-target":interactionTargets.f.TRANSCRIPTS.EXPAND,onClick:this.toggleExpandCollapse,type:"button"},isCollapsed?_ref4:_ref5)),isEditable&&react.createElement(Tooltip.a,{text:react.createElement(index_es.b,messages.a.editLabel)},react.createElement(PlainButton.a,{className:editBtnClassName,"data-resin-target":interactionTargets.f.TRANSCRIPTS.EDIT,onClick:this.toggleIsEditing,type:"button"},_ref6))),isEditing?react.createElement("div",{className:"be-transcript-edit-message"},react.createElement(index_es.b,messages.a.transcriptEdit)):null,hasEntries?react.createElement("div",{className:contentClassName},entries.map(this.transcriptMapper)):react.createElement(index_es.b,messages.a.skillNoInfoFoundError))}}]),Transcript}(react.PureComponent);Transcript_Transcript.displayName="Transcript",Transcript_Transcript.__docgenInfo={description:"",methods:[{name:"transcriptReducer",docblock:"Reducer to accumulate all transcript entries for copying\n\n@param {Object} accumulator - reducer accumulator\n@return {string} accumulated transcript entries",modifiers:[],params:[{name:"accumulator",description:"reducer accumulator",type:{name:"string"},optional:!1},{name:"{ appears, text }: SkillCardEntry",type:{name:"SkillCardEntry",alias:"SkillCardEntry"}}],returns:{description:"accumulated transcript entries",type:{name:"string"}},description:"Reducer to accumulate all transcript entries for copying"},{name:"transcriptMapper",docblock:"Mapper to accumulate all transcript entries for displaying\n\n@param {Object} accumulator - reducer accumulator\n@param {number} index - mapper index\n@return {string} accumulated transcript entries",modifiers:[],params:[{name:"{ appears, text }: SkillCardEntry",type:{name:"SkillCardEntry",alias:"SkillCardEntry"}},{name:"index",description:"mapper index",type:{name:"number"},optional:!1}],returns:{description:"accumulated transcript entries",type:{name:"ReactNode",raw:"React.Node"}},description:"Mapper to accumulate all transcript entries for displaying"},{name:"toggleIsEditing",docblock:"Toggles the edit mode\n\n@private\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Toggles the edit mode"},{name:"previewSegment",docblock:"Previews a transcript segment\n\n@private\n@param {number|void} [index] - row index to edit\n@return {void}",modifiers:[],params:[{name:"index",type:{name:"number"}}],returns:null,description:"Previews a transcript segment"},{name:"onSave",docblock:"Saves the new card data\n\n@private\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Saves the new card data"},{name:"onCancel",docblock:"Cancels editing\n\n@private\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Cancels editing"},{name:"onChange",docblock:"Reflects changes of editing\n\n@private\n@param {Event} event - keyboard event\n@return {void}",modifiers:[],params:[{name:"event",description:"keyboard event",type:{name:"SyntheticKeyboardEvent",elements:[{name:"HTMLTextAreaElement"}],raw:"SyntheticKeyboardEvent<HTMLTextAreaElement>",alias:"SyntheticKeyboardEvent"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Reflects changes of editing"},{name:"onClick",docblock:"Click handler for transcript\n\n@private\n@return {void}",modifiers:[],params:[{name:"index",type:{name:"number"}}],returns:{description:null,type:{name:"void"}},description:"Click handler for transcript"},{name:"copyTranscript",docblock:"Copies the transcript.\nAlso animates the copy button.\n\n@private\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Copies the transcript.\nAlso animates the copy button."},{name:"copyBtnRef",docblock:"Copy button reference\n\n@private\n@return {void}",modifiers:[],params:[{name:"btn",type:{name:"HTMLButtonElement",alias:"HTMLButtonElement"}}],returns:{description:null,type:{name:"void"}},description:"Copy button reference"},{name:"toggleExpandCollapse",docblock:"Toggles transcript exapand and collapse\n\n@private\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Toggles transcript exapand and collapse"}],displayName:"Transcript",props:{card:{required:!0,flowType:{name:"SkillCard"},description:""},getViewer:{required:!1,flowType:{name:"Function"},description:""},isEditable:{required:!0,flowType:{name:"boolean"},description:""},onSkillChange:{required:!0,flowType:{name:"Function"},description:""}}};var skills_transcript_Transcript=Transcript_Transcript;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/skills/transcript/Transcript.js"]={name:"Transcript",docgenInfo:Transcript_Transcript.__docgenInfo,path:"src/elements/content-sidebar/skills/transcript/Transcript.js"});__webpack_require__(314),__webpack_require__(210),__webpack_require__(3205),__webpack_require__(53),__webpack_require__(315);var InlineError=__webpack_require__(1109),PillSelector=__webpack_require__(1821),keywordUtils=function(){var keywords=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return keywords.map((function(keyword,index){return{displayText:keyword.text,value:index}}))};__webpack_require__(3275);function EditableKeywords_typeof(obj){return(EditableKeywords_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function EditableKeywords_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function EditableKeywords_getPrototypeOf(o){return(EditableKeywords_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function EditableKeywords_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function EditableKeywords_setPrototypeOf(o,p){return(EditableKeywords_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function EditableKeywords_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var EditableKeywords_EditableKeywords=function(_React$PureComponent){function EditableKeywords(props){var _this;return function EditableKeywords_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EditableKeywords),_this=function EditableKeywords_possibleConstructorReturn(self,call){return!call||"object"!==EditableKeywords_typeof(call)&&"function"!=typeof call?EditableKeywords_assertThisInitialized(self):call}(this,EditableKeywords_getPrototypeOf(EditableKeywords).call(this,props)),EditableKeywords_defineProperty(EditableKeywords_assertThisInitialized(_this),"onRemove",(function(option,index){var _this$props=_this.props;(0,_this$props.onDelete)(_this$props.keywords[index])})),EditableKeywords_defineProperty(EditableKeywords_assertThisInitialized(_this),"onKeyDown",(function(_ref){"Enter"!==_ref.key||_this.state.isInCompositionMode||_this.onBlur()})),EditableKeywords_defineProperty(EditableKeywords_assertThisInitialized(_this),"onBlur",(function(){var onAdd=_this.props.onAdd,keyword=_this.state.keyword;keyword&&onAdd({type:"text",text:keyword})})),EditableKeywords_defineProperty(EditableKeywords_assertThisInitialized(_this),"onCompositionStart",(function(){_this.setState({isInCompositionMode:!0})})),EditableKeywords_defineProperty(EditableKeywords_assertThisInitialized(_this),"onCompositionEnd",(function(){_this.setState({isInCompositionMode:!1})})),EditableKeywords_defineProperty(EditableKeywords_assertThisInitialized(_this),"onInput",(function(event){var currentTarget=event.currentTarget;_this.setState({keyword:currentTarget.value})})),_this.state={pills:keywordUtils(props.keywords),keyword:"",isInCompositionMode:!1},_this}return function EditableKeywords_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&EditableKeywords_setPrototypeOf(subClass,superClass)}(EditableKeywords,_React$PureComponent),function EditableKeywords_createClass(Constructor,protoProps,staticProps){return protoProps&&EditableKeywords_defineProperties(Constructor.prototype,protoProps),staticProps&&EditableKeywords_defineProperties(Constructor,staticProps),Constructor}(EditableKeywords,[{key:"componentDidUpdate",value:function componentDidUpdate(_ref2){var prevKeywords=_ref2.keywords,keywords=this.props.keywords;prevKeywords!==keywords&&this.setState({pills:keywordUtils(keywords),keyword:""})}},{key:"render",value:function render(){var _this$props2=this.props,onSave=_this$props2.onSave,onCancel=_this$props2.onCancel,_this$state=this.state,pills=_this$state.pills,keyword=_this$state.keyword;return react.createElement("span",{className:"bdl-EditableKeywords"},react.createElement(PillSelector.a,{onBlur:this.onBlur,onCompositionEnd:this.onCompositionEnd,onCompositionStart:this.onCompositionStart,onInput:this.onInput,onKeyDown:this.onKeyDown,onPaste:this.onInput,onRemove:this.onRemove,selectedOptions:pills,value:keyword}),react.createElement("div",{className:"be-keywords-buttons"},react.createElement(Button.a,{"data-resin-target":interactionTargets.f.KEYWORDS.EDIT_CANCEL,onClick:onCancel,type:"button"},react.createElement(index_es.b,messages.a.cancel)),react.createElement(PrimaryButton.a,{"data-resin-target":interactionTargets.f.KEYWORDS.EDIT_SAVE,onClick:onSave,type:"button"},react.createElement(index_es.b,messages.a.save))))}}]),EditableKeywords}(react.PureComponent);EditableKeywords_EditableKeywords.displayName="EditableKeywords",EditableKeywords_EditableKeywords.__docgenInfo={description:"",methods:[{name:"onRemove",docblock:"Called when keywords gets new properties.\nShould reset to original state.\n\n@private\n@param {Object} option - pill\n@param {number} index - pill index\n@return {void}",modifiers:[],params:[{name:"option",description:"pill",type:{name:"Pill",alias:"Pill"},optional:!1},{name:"index",description:"pill index",type:{name:"number"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Called when keywords gets new properties.\nShould reset to original state."},{name:"onKeyDown",docblock:"When pressing enter in the pill input box\n\n@private\n@param {Event} event - keyboard event\n@return {void}",modifiers:[],params:[{name:"{ key }: SyntheticKeyboardEvent<HTMLInputElement>",type:{name:"SyntheticKeyboardEvent",elements:[{name:"HTMLInputElement"}],raw:"SyntheticKeyboardEvent<HTMLInputElement>",alias:"SyntheticKeyboardEvent"}}],returns:{description:null,type:{name:"void"}},description:"When pressing enter in the pill input box"},{name:"onBlur",docblock:"Called when pill selector is blurred.\nAdds a new pill if needed.\n\n@private\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Called when pill selector is blurred.\nAdds a new pill if needed."},{name:"onCompositionStart",docblock:"Enables composition mode.\n\n@private\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Enables composition mode."},{name:"onCompositionEnd",docblock:"Disables composition mode.\n\n@private\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Disables composition mode."},{name:"onInput",docblock:"Called when pill selector gets new input value.\n\n@private\n@return {void}",modifiers:[],params:[{name:"event",type:{name:"SyntheticKeyboardEvent",elements:[{name:"HTMLInputElement"}],raw:"SyntheticKeyboardEvent<HTMLInputElement>",alias:"SyntheticKeyboardEvent"}}],returns:{description:null,type:{name:"void"}},description:"Called when pill selector gets new input value."}],displayName:"EditableKeywords",props:{keywords:{required:!0,flowType:{name:"Array",elements:[{name:"SkillCardEntry"}],raw:"Array<SkillCardEntry>"},description:""},onAdd:{required:!0,flowType:{name:"Function"},description:""},onCancel:{required:!0,flowType:{name:"Function"},description:""},onDelete:{required:!0,flowType:{name:"Function"},description:""},onSave:{required:!0,flowType:{name:"Function"},description:""}}};var skills_keywords_EditableKeywords=EditableKeywords_EditableKeywords;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/skills/keywords/EditableKeywords.js"]={name:"EditableKeywords",docgenInfo:EditableKeywords_EditableKeywords.__docgenInfo,path:"src/elements/content-sidebar/skills/keywords/EditableKeywords.js"});__webpack_require__(9);var isEqual=__webpack_require__(784),isEqual_default=__webpack_require__.n(isEqual),components_button=__webpack_require__(157);function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}var PillCloud=function(_ref){var options=_ref.options,onSelect=_ref.onSelect,_ref$selectedOptions=_ref.selectedOptions,selectedOptions=void 0===_ref$selectedOptions?[]:_ref$selectedOptions,_ref$buttonProps=_ref.buttonProps,buttonProps=void 0===_ref$buttonProps?{}:_ref$buttonProps;return react_default.a.createElement("div",{className:"bdl-PillCloud pill-cloud-container"},options&&options.map((function(option){return react_default.a.createElement(components_button.a,_extends({key:option.value,className:classnames_default()("bdl-Pill","bdl-PillCloud-button","pill","pill-cloud-button",{"is-selected":selectedOptions.find((function(op){return isEqual_default()(op,option)}))}),onClick:onSelect?function(){return onSelect(option)}:void 0},buttonProps),option.displayText)})))};PillCloud.displayName="PillCloud",PillCloud.__docgenInfo={description:"",methods:[],displayName:"PillCloud",props:{selectedOptions:{defaultValue:{value:"[]",computed:!1},required:!1,flowType:{name:"Array",elements:[{name:"Option"}],raw:"Array<Option>"},description:""},buttonProps:{defaultValue:{value:"{}",computed:!1},required:!1,flowType:{name:"Object"},description:""},onSelect:{required:!1,flowType:{name:"Function"},description:""},options:{required:!0,flowType:{name:"Array",elements:[{name:"Option"}],raw:"Array<Option>"},description:""}}};var pill_cloud_PillCloud=PillCloud;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/pill-cloud/PillCloud.js"]={name:"PillCloud",docgenInfo:PillCloud.__docgenInfo,path:"src/components/pill-cloud/PillCloud.js"});var IconTrackNext=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?"#999":_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?14:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?14:_ref$width;return react.createElement(accessible_svg.a,{className:"icon-track-next ".concat(className),height:height,title:title,viewBox:"0 0 14 14",width:width},react.createElement("path",{className:"fill-color",d:"M7.72 7.85a1 1 0 0 0 0-1.41l-5-4.81A1 1 0 0 0 2 1.35a1 1 0 0 0-1 1V12a1 1 0 0 0 .28.69 1 1 0 0 0 1.41 0l5-4.81zM13 2v10a1 1 0 0 1-1 1 1 1 0 0 1-1-1V2a1 1 0 0 1 1-1 1 1 0 0 1 1 1z",fill:color}))};IconTrackNext.displayName="IconTrackNext",IconTrackNext.__docgenInfo={description:"",methods:[],displayName:"IconTrackNext",props:{className:{defaultValue:{value:"''",computed:!1},required:!1},color:{defaultValue:{value:"'#999'",computed:!1},required:!1},height:{defaultValue:{value:"14",computed:!1},required:!1},width:{defaultValue:{value:"14",computed:!1},required:!1}}};var general_IconTrackNext=IconTrackNext;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconTrackNext.js"]={name:"IconTrackNext",docgenInfo:IconTrackNext.__docgenInfo,path:"src/icons/general/IconTrackNext.js"});var IconTrackPrevious=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?"#999":_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?14:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?14:_ref$width;return react.createElement(accessible_svg.a,{className:"icon-track-previous ".concat(className),height:height,title:title,viewBox:"0 0 14 14",width:width},react.createElement("path",{className:"fill-color",d:"M6.31 7.88l5 4.81a1 1 0 0 0 1.41 0A1 1 0 0 0 13 12V2.35a1 1 0 0 0-1-1 1 1 0 0 0-.69.28l-5 4.81a1 1 0 0 0 0 1.41zM2 1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1 1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z",fill:color}))};IconTrackPrevious.displayName="IconTrackPrevious",IconTrackPrevious.__docgenInfo={description:"",methods:[],displayName:"IconTrackPrevious",props:{className:{defaultValue:{value:"''",computed:!1},required:!1},color:{defaultValue:{value:"'#999'",computed:!1},required:!1},height:{defaultValue:{value:"14",computed:!1},required:!1},width:{defaultValue:{value:"14",computed:!1},required:!1}}};var general_IconTrackPrevious=IconTrackPrevious;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconTrackPrevious.js"]={name:"IconTrackPrevious",docgenInfo:IconTrackPrevious.__docgenInfo,path:"src/icons/general/IconTrackPrevious.js"});__webpack_require__(3276);var Timeslice_Timeslice=function(_ref){var start=_ref.start,end=_ref.end,duration=_ref.duration,_onClick=_ref.onClick,index=_ref.index,interactionTarget=_ref.interactionTarget;if("number"!=typeof start||!duration||start>=duration)return null;var startLeft=Math.round(290*start/duration),minEnding=startLeft+6,ending="number"==typeof end?Math.max(minEnding,290*end/duration):minEnding,width=Math.round(Math.min(290,ending))-startLeft;return width<6&&(startLeft-=6-width,width=6),react_default.a.createElement(PlainButton.a,{className:"be-timeline-time","data-resin-target":interactionTarget,onClick:function onClick(){return _onClick(index)},style:{left:"".concat(startLeft,"px"),width:"".concat(width,"px")},type:"button"})};Timeslice_Timeslice.displayName="Timeslice",Timeslice_Timeslice.__docgenInfo={description:"",methods:[],displayName:"Timeslice",props:{duration:{required:!0,flowType:{name:"number"},description:""},end:{required:!1,flowType:{name:"number"},description:""},index:{required:!0,flowType:{name:"number"},description:""},interactionTarget:{required:!0,flowType:{name:"string"},description:""},onClick:{required:!0,flowType:{name:"Function"},description:""},start:{required:!0,flowType:{name:"number"},description:""}}};var timeline_Timeslice=Timeslice_Timeslice;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/skills/timeline/Timeslice.js"]={name:"Timeslice",docgenInfo:Timeslice_Timeslice.__docgenInfo,path:"src/elements/content-sidebar/skills/timeline/Timeslice.js"});__webpack_require__(3277);var Timeline_ref2=react_default.a.createElement("div",{className:"be-timeline-line"}),Timeline_Timeline=function(_ref){var _ref$text=_ref.text,text=void 0===_ref$text?"":_ref$text,_ref$duration=_ref.duration,duration=void 0===_ref$duration?0:_ref$duration,_ref$timeslices=_ref.timeslices,timeslices=void 0===_ref$timeslices?[]:_ref$timeslices,getViewer=_ref.getViewer,interactionTarget=_ref.interactionTarget,timeSliceIndex=-1,playSegment=function(index){var incr=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,newIndex=0<incr?Math.min(timeslices.length-1,index+incr):Math.max(0,index+incr),viewer=getViewer?getViewer():null,timeslice=timeslices[newIndex],validTime=isValidStartTime(timeslice);validTime&&viewer&&"function"==typeof viewer.play&&(viewer.play(timeslice.start),timeSliceIndex=newIndex)};return react_default.a.createElement("div",{className:"be-timeline"},text&&react_default.a.createElement("div",{className:"be-timeline-label"},text),react_default.a.createElement("div",{className:"be-timeline-line-wrapper"},Timeline_ref2,timeslices.map((function(_ref3,index){var start=_ref3.start,end=_ref3.end;return(react_default.a.createElement(timeline_Timeslice,{key:index,duration:duration,end:end,index:index,interactionTarget:interactionTarget,onClick:playSegment,start:start}))}))),react_default.a.createElement("div",{className:"be-timeline-btns"},react_default.a.createElement(PlainButton.a,{"data-resin-target":interactionTargets.f.TIMELINE.PREVIOUS,onClick:function onClick(){return playSegment(timeSliceIndex,-1)},type:"button"},react_default.a.createElement(general_IconTrackPrevious,{title:react_default.a.createElement(index_es.b,messages.a.previousSegment)})),react_default.a.createElement(PlainButton.a,{"data-resin-target":interactionTargets.f.TIMELINE.NEXT,onClick:function onClick(){return playSegment(timeSliceIndex,1)},type:"button"},react_default.a.createElement(general_IconTrackNext,{title:react_default.a.createElement(index_es.b,messages.a.nextSegment)}))))};Timeline_Timeline.displayName="Timeline",Timeline_Timeline.__docgenInfo={description:"",methods:[],displayName:"Timeline",props:{text:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},duration:{defaultValue:{value:"0",computed:!1},required:!1,flowType:{name:"number"},description:""},timeslices:{defaultValue:{value:"[]",computed:!1},required:!1,flowType:{name:"Array",elements:[{name:"SkillCardEntryTimeSlice"}],raw:"SkillCardEntryTimeSlice[]"},description:""},getViewer:{required:!1,flowType:{name:"Function"},description:""},interactionTarget:{required:!0,flowType:{name:"string"},description:""},type:{required:!1,flowType:{name:"SkillCardEntryType"},description:""},url:{required:!1,flowType:{name:"string"},description:""}}};var timeline_Timeline=Timeline_Timeline;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/skills/timeline/Timeline.js"]={name:"Timeline",docgenInfo:Timeline_Timeline.__docgenInfo,path:"src/elements/content-sidebar/skills/timeline/Timeline.js"});__webpack_require__(3278);function ReadOnlyKeywords_typeof(obj){return(ReadOnlyKeywords_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ReadOnlyKeywords_extends(){return(ReadOnlyKeywords_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function ReadOnlyKeywords_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function ReadOnlyKeywords_getPrototypeOf(o){return(ReadOnlyKeywords_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function ReadOnlyKeywords_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function ReadOnlyKeywords_setPrototypeOf(o,p){return(ReadOnlyKeywords_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function ReadOnlyKeywords_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ReadOnlyKeywords_ReadOnlyselecteds=function(_React$PureComponent){function ReadOnlyselecteds(){var _getPrototypeOf2,_this;!function ReadOnlyKeywords_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ReadOnlyselecteds);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function ReadOnlyKeywords_possibleConstructorReturn(self,call){return!call||"object"!==ReadOnlyKeywords_typeof(call)&&"function"!=typeof call?ReadOnlyKeywords_assertThisInitialized(self):call}(this,(_getPrototypeOf2=ReadOnlyKeywords_getPrototypeOf(ReadOnlyselecteds)).call.apply(_getPrototypeOf2,[this].concat(args))),ReadOnlyKeywords_defineProperty(ReadOnlyKeywords_assertThisInitialized(_this),"state",{selectedIndex:-1}),ReadOnlyKeywords_defineProperty(ReadOnlyKeywords_assertThisInitialized(_this),"onSelect",(function(pill){var selectedIndex=_this.state.selectedIndex,newIndex=pill.value;_this.setState({selectedIndex:selectedIndex===newIndex?-1:newIndex})})),_this}return function ReadOnlyKeywords_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&ReadOnlyKeywords_setPrototypeOf(subClass,superClass)}(ReadOnlyselecteds,_React$PureComponent),function ReadOnlyKeywords_createClass(Constructor,protoProps,staticProps){return protoProps&&ReadOnlyKeywords_defineProperties(Constructor.prototype,protoProps),staticProps&&ReadOnlyKeywords_defineProperties(Constructor,staticProps),Constructor}(ReadOnlyselecteds,[{key:"render",value:function render(){var _this$props=this.props,keywords=_this$props.keywords,getViewer=_this$props.getViewer,duration=_this$props.duration,selectedIndex=this.state.selectedIndex,options=keywordUtils(keywords),selected=keywords[selectedIndex],pillCloudProps=selected?{selectedOptions:[options[selectedIndex]]}:{};return react.createElement(react.Fragment,null,react.createElement(pill_cloud_PillCloud,ReadOnlyKeywords_extends({onSelect:this.onSelect,options:options},pillCloudProps,{buttonProps:ReadOnlyKeywords_defineProperty({},interactionTargets.c,interactionTargets.f.KEYWORDS.SELECT)})),!!selected&&Array.isArray(selected.appears)&&0<selected.appears.length&&react.createElement(timeline_Timeline,{duration:duration,getViewer:getViewer,interactionTarget:interactionTargets.f.KEYWORDS.TIMELINE,text:selected.text,timeslices:selected.appears}))}}]),ReadOnlyselecteds}(react.PureComponent);ReadOnlyKeywords_ReadOnlyselecteds.displayName="ReadOnlyselecteds",ReadOnlyKeywords_ReadOnlyselecteds.__docgenInfo={description:"",methods:[{name:"onSelect",docblock:"Shows the time line by selecting the keyword\n\n@private\n@param {Object} pill - keyword\n@return {void}",modifiers:[],params:[{name:"pill",description:"keyword",type:{name:"Pill",alias:"Pill"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Shows the time line by selecting the keyword"}],displayName:"ReadOnlyselecteds",props:{duration:{required:!1,flowType:{name:"number"},description:""},getViewer:{required:!1,flowType:{name:"Function"},description:""},keywords:{required:!0,flowType:{name:"Array",elements:[{name:"SkillCardEntry"}],raw:"Array<SkillCardEntry>"},description:""}}};var keywords_ReadOnlyKeywords=ReadOnlyKeywords_ReadOnlyselecteds;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/skills/keywords/ReadOnlyKeywords.js"]={name:"ReadOnlyselecteds",docgenInfo:ReadOnlyKeywords_ReadOnlyselecteds.__docgenInfo,path:"src/elements/content-sidebar/skills/keywords/ReadOnlyKeywords.js"});__webpack_require__(3279);function Keywords_typeof(obj){return(Keywords_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Keywords_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function Keywords_getPrototypeOf(o){return(Keywords_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function Keywords_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Keywords_setPrototypeOf(o,p){return(Keywords_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Keywords_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var Keywords_ref2=react_default.a.createElement(IconEdit.a,null),Keywords_Keywords=function(_PureComponent){function Keywords(props){var _this;return function Keywords_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Keywords),_this=function Keywords_possibleConstructorReturn(self,call){return!call||"object"!==Keywords_typeof(call)&&"function"!=typeof call?Keywords_assertThisInitialized(self):call}(this,Keywords_getPrototypeOf(Keywords).call(this,props)),Keywords_defineProperty(Keywords_assertThisInitialized(_this),"toggleIsEditing",(function(){_this.setState((function(prevState){return{isEditing:!prevState.isEditing}}))})),Keywords_defineProperty(Keywords_assertThisInitialized(_this),"onAdd",(function(keyword){var transcript=_this.props.transcript,adds=_this.state.adds,locations=[],regex=new RegExp("\\b".concat(keyword.text,"\\b"),"i");transcript&&Array.isArray(transcript.entries)&&transcript.entries.forEach((function(_ref){var text=_ref.text,appears=_ref.appears;text&&regex.test(text)&&Array.isArray(appears)&&0<appears.length&&locations.push(appears[0])})),keyword.appears=locations,adds.push(keyword),_this.setState({adds:adds.slice(0)})})),Keywords_defineProperty(Keywords_assertThisInitialized(_this),"onDelete",(function(keyword){var _this$state=_this.state,adds=_this$state.adds,removes=_this$state.removes,addedIndex=adds.findIndex((function(added){return added===keyword}));-1<addedIndex?(adds.splice(addedIndex,1),_this.setState({adds:adds.slice(0)})):(removes.push(keyword),_this.setState({removes:removes.slice(0)}))})),Keywords_defineProperty(Keywords_assertThisInitialized(_this),"onSave",(function(){var onSkillChange=_this.props.onSkillChange,_this$state2=_this.state,removes=_this$state2.removes,adds=_this$state2.adds;_this.toggleIsEditing(),(0<removes.length||0<adds.length)&&(_this.setState({isLoading:!0}),onSkillChange(removes,adds))})),Keywords_defineProperty(Keywords_assertThisInitialized(_this),"onCancel",(function(){_this.resetState(_this.props)})),_this.state={keywords:props.card.entries,adds:[],removes:[],isEditing:props.hasError,hasError:props.hasError,isLoading:!1},_this}return function Keywords_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Keywords_setPrototypeOf(subClass,superClass)}(Keywords,_PureComponent),function Keywords_createClass(Constructor,protoProps,staticProps){return protoProps&&Keywords_defineProperties(Constructor.prototype,protoProps),staticProps&&Keywords_defineProperties(Constructor,staticProps),Constructor}(Keywords,[{key:"resetState",value:function resetState(props){this.setState({keywords:props.card.entries,adds:[],removes:[],isEditing:!1,hasError:!1,isLoading:!1})}},{key:"render",value:function render(){var _this$props=this.props,card=_this$props.card,getViewer=_this$props.getViewer,isEditable=_this$props.isEditable,duration=card.duration,_this$state3=this.state,isEditing=_this$state3.isEditing,isLoading=_this$state3.isLoading,hasError=_this$state3.hasError,keywords=_this$state3.keywords,removes=_this$state3.removes,adds=_this$state3.adds,hasKeywords=0<keywords.length,entries=keywords.filter((function(face){return!removes.includes(face)})).concat(adds),editClassName=classnames_default()("be-keyword-edit",{"be-keyword-is-editing":isEditing});return react_default.a.createElement(LoadingIndicatorWrapper.a,{className:"be-keywords",isLoading:isLoading},hasKeywords&&isEditable&&!isLoading&&react_default.a.createElement(Tooltip.a,{text:react_default.a.createElement(index_es.b,messages.a.editLabel)},react_default.a.createElement(PlainButton.a,{className:editClassName,"data-resin-target":interactionTargets.f.KEYWORDS.EDIT,onClick:this.toggleIsEditing,type:"button"},Keywords_ref2)),hasError&&react_default.a.createElement(InlineError.a,{title:react_default.a.createElement(index_es.b,messages.a.sidebarSkillsErrorTitle)},react_default.a.createElement(index_es.b,messages.a.sidebarSkillsErrorContent)),isEditing&&react_default.a.createElement(skills_keywords_EditableKeywords,{keywords:entries,onAdd:this.onAdd,onCancel:this.onCancel,onDelete:this.onDelete,onSave:this.onSave}),!isEditing&&hasKeywords&&react_default.a.createElement(keywords_ReadOnlyKeywords,{duration:duration,getViewer:getViewer,keywords:entries}),!isEditing&&!hasKeywords&&react_default.a.createElement(index_es.b,messages.a.skillNoInfoFoundError))}}]),Keywords}(react.PureComponent);Keywords_Keywords.displayName="Keywords",Keywords_Keywords.__docgenInfo={description:"",methods:[{name:"resetState",docblock:"Helper to reset the state\n\n@private\n@param {Object} props - component props\n@return {void}",modifiers:[],params:[{name:"props",description:"component props",type:{name:"signature",type:"object",raw:"{\n    card: SkillCard,\n    getViewer?: Function,\n    hasError: boolean,\n    isEditable: boolean,\n    onSkillChange: Function,\n    transcript?: SkillCard,\n}",signature:{properties:[{key:"card",value:{name:"SkillCard",required:!0}},{key:"getViewer",value:{name:"Function",required:!1}},{key:"hasError",value:{name:"boolean",required:!0}},{key:"isEditable",value:{name:"boolean",required:!0}},{key:"onSkillChange",value:{name:"Function",required:!0}},{key:"transcript",value:{name:"SkillCard",required:!1}}]},alias:"Props"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Helper to reset the state"},{name:"toggleIsEditing",docblock:"Toggles the edit mode\n\n@private\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Toggles the edit mode"},{name:"onAdd",docblock:"Adds a new keyword.\nIterates over the transcript to find locations\n\n@private\n@return {void}",modifiers:[],params:[{name:"keyword",type:{name:"SkillCardEntry",alias:"SkillCardEntry"}}],returns:{description:null,type:{name:"void"}},description:"Adds a new keyword.\nIterates over the transcript to find locations"},{name:"onDelete",docblock:"Deletes a keyword\n\n@private\n@return {void}",modifiers:[],params:[{name:"keyword",type:{name:"SkillCardEntry",alias:"SkillCardEntry"}}],returns:{description:null,type:{name:"void"}},description:"Deletes a keyword"},{name:"onSave",docblock:"Saves the new card data\n\n@private\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Saves the new card data"},{name:"onCancel",docblock:"Cancels editing\n\n@private\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Cancels editing"}],displayName:"Keywords",props:{card:{required:!0,flowType:{name:"SkillCard"},description:""},getViewer:{required:!1,flowType:{name:"Function"},description:""},hasError:{required:!0,flowType:{name:"boolean"},description:""},isEditable:{required:!0,flowType:{name:"boolean"},description:""},onSkillChange:{required:!0,flowType:{name:"Function"},description:""},transcript:{required:!1,flowType:{name:"SkillCard"},description:""}}};var skills_keywords_Keywords=Keywords_Keywords;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/skills/keywords/Keywords.js"]={name:"Keywords",docgenInfo:Keywords_Keywords.__docgenInfo,path:"src/elements/content-sidebar/skills/keywords/Keywords.js"});var IconClose=__webpack_require__(134),IconMinus=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?"#000000":_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?16:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?16:_ref$width;return react.createElement(accessible_svg.a,{className:"icon-minus ".concat(className),height:height,title:title,viewBox:"0 0 16 16",width:width},react.createElement("path",{d:"M2 5h8v2H2z",fill:color,fillRule:"evenodd"}))};IconMinus.displayName="IconMinus",IconMinus.__docgenInfo={description:"",methods:[],displayName:"IconMinus",props:{className:{defaultValue:{value:"''",computed:!1},required:!1},color:{defaultValue:{value:"'#000000'",computed:!1},required:!1},height:{defaultValue:{value:"16",computed:!1},required:!1},width:{defaultValue:{value:"16",computed:!1},required:!1}}};var general_IconMinus=IconMinus;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconMinus.js"]={name:"IconMinus",docgenInfo:IconMinus.__docgenInfo,path:"src/icons/general/IconMinus.js"});__webpack_require__(3280);var Face_ref2=react.createElement(general_IconMinus,{color:constants.D}),Face_ref3=react.createElement(IconClose.a,{color:constants.C,height:16,width:16}),Face_Face=function(_ref){var face=_ref.face,selected=_ref.selected,isEditing=_ref.isEditing,onDelete=_ref.onDelete,onSelect=_ref.onSelect,isAnyFaceSelected=!!selected,isCurrentFaceSelected=face===selected,faceClassName=classnames_default()("be-face-wrapper",{"be-face-unselected":!isEditing&&isAnyFaceSelected&&!isCurrentFaceSelected});return react.createElement("div",{className:faceClassName},react.createElement(PlainButton.a,{className:"be-face","data-resin-target":interactionTargets.f.FACES.FACE,onClick:function onClick(){return!isEditing&&onSelect(face)},type:"button"},react.createElement("img",{alt:face.text,src:face.image_url,title:face.text}),isAnyFaceSelected&&isCurrentFaceSelected&&!isEditing&&Face_ref2),isEditing&&react.createElement(PlainButton.a,{className:"be-face-delete","data-resin-target":interactionTargets.f.FACES.DELETE,onClick:function onClick(){return onDelete(face)},type:"button"},Face_ref3))};Face_Face.displayName="Face",Face_Face.__docgenInfo={description:"",methods:[],displayName:"Face",props:{face:{required:!0,flowType:{name:"SkillCardEntry"},description:""},isEditing:{required:!0,flowType:{name:"boolean"},description:""},onDelete:{required:!0,flowType:{name:"Function"},description:""},onSelect:{required:!0,flowType:{name:"Function"},description:""},selected:{required:!1,flowType:{name:"SkillCardEntry"},description:""}}};var faces_Face=Face_Face;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/skills/faces/Face.js"]={name:"Face",docgenInfo:Face_Face.__docgenInfo,path:"src/elements/content-sidebar/skills/faces/Face.js"});__webpack_require__(3281);function Faces_typeof(obj){return(Faces_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Faces_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function Faces_getPrototypeOf(o){return(Faces_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function Faces_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Faces_setPrototypeOf(o,p){return(Faces_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Faces_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var Faces_ref=react.createElement(IconEdit.a,null),Faces_Faces=function(_React$PureComponent){function Faces(props){var _this;return function Faces_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Faces),_this=function Faces_possibleConstructorReturn(self,call){return!call||"object"!==Faces_typeof(call)&&"function"!=typeof call?Faces_assertThisInitialized(self):call}(this,Faces_getPrototypeOf(Faces).call(this,props)),Faces_defineProperty(Faces_assertThisInitialized(_this),"toggleIsEditing",(function(){_this.setState((function(prevState){return{isEditing:!prevState.isEditing}}))})),Faces_defineProperty(Faces_assertThisInitialized(_this),"onSelect",(function(face){var selected=_this.state.selected;_this.setState({selected:selected===face?void 0:face})})),Faces_defineProperty(Faces_assertThisInitialized(_this),"onDelete",(function(face){var removes=_this.state.removes;removes.push(face),_this.setState({removes:removes.slice(0)})})),Faces_defineProperty(Faces_assertThisInitialized(_this),"onSave",(function(){var onSkillChange=_this.props.onSkillChange,removes=_this.state.removes;_this.toggleIsEditing(),0<removes.length&&(_this.setState({isLoading:!0}),onSkillChange(removes))})),Faces_defineProperty(Faces_assertThisInitialized(_this),"onCancel",(function(){_this.resetState(_this.props)})),_this.state={faces:props.card.entries,removes:[],isEditing:props.hasError,hasError:props.hasError,isLoading:!1},_this}return function Faces_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Faces_setPrototypeOf(subClass,superClass)}(Faces,_React$PureComponent),function Faces_createClass(Constructor,protoProps,staticProps){return protoProps&&Faces_defineProperties(Constructor.prototype,protoProps),staticProps&&Faces_defineProperties(Constructor,staticProps),Constructor}(Faces,[{key:"resetState",value:function resetState(props){this.setState({faces:props.card.entries,removes:[],isEditing:!1,selected:void 0,hasError:!1,isLoading:!1})}},{key:"render",value:function render(){var _this2=this,_this$props=this.props,card=_this$props.card,isEditable=_this$props.isEditable,getViewer=_this$props.getViewer,_this$state=this.state,selected=_this$state.selected,faces=_this$state.faces,removes=_this$state.removes,isEditing=_this$state.isEditing,hasError=_this$state.hasError,isLoading=_this$state.isLoading,duration=card.duration,hasFaces=0<faces.length,entries=faces.filter((function(face){return!removes.includes(face)})),editClassName=classnames_default()("be-face-edit",{"be-faces-is-editing":isEditing});return react.createElement(LoadingIndicatorWrapper.a,{className:"be-faces",isLoading:isLoading},hasFaces&&isEditable&&!isLoading&&react.createElement(Tooltip.a,{text:react.createElement(index_es.b,messages.a.editLabel)},react.createElement(PlainButton.a,{className:editClassName,"data-resin-target":interactionTargets.f.FACES.EDIT,onClick:this.toggleIsEditing,type:"button"},Faces_ref)),hasError&&react.createElement(InlineError.a,{title:react.createElement(index_es.b,messages.a.sidebarSkillsErrorTitle)},react.createElement(index_es.b,messages.a.sidebarSkillsErrorContent)),hasFaces?entries.map((function(face,index){return react.createElement(faces_Face,{key:index,face:face,isEditing:isEditing,onDelete:_this2.onDelete,onSelect:_this2.onSelect,selected:selected})})):react.createElement(index_es.b,messages.a.skillNoInfoFoundError),!!selected&&!isEditing&&Array.isArray(selected.appears)&&0<selected.appears.length&&react.createElement(timeline_Timeline,{duration:duration,getViewer:getViewer,interactionTarget:interactionTargets.f.FACES.TIMELINE,timeslices:selected.appears}),isEditing&&react.createElement("div",{className:"be-faces-buttons"},react.createElement(Button.a,{"data-resin-target":interactionTargets.f.FACES.EDIT_CANCEL,onClick:this.onCancel,type:"button"},react.createElement(index_es.b,messages.a.cancel)),react.createElement(PrimaryButton.a,{"data-resin-target":interactionTargets.f.FACES.EDIT_SAVE,onClick:this.onSave,type:"button"},react.createElement(index_es.b,messages.a.save))))}}]),Faces}(react.PureComponent);Faces_Faces.displayName="Faces",Faces_Faces.__docgenInfo={description:"",methods:[{name:"resetState",docblock:"Helper to reset the state\n\n@private\n@param {Object} props - component props\n@return {void}",modifiers:[],params:[{name:"props",description:"component props",type:{name:"signature",type:"object",raw:"{\n    card: SkillCard,\n    getViewer?: Function,\n    hasError: boolean,\n    isEditable: boolean,\n    onSkillChange: Function,\n}",signature:{properties:[{key:"card",value:{name:"SkillCard",required:!0}},{key:"getViewer",value:{name:"Function",required:!1}},{key:"hasError",value:{name:"boolean",required:!0}},{key:"isEditable",value:{name:"boolean",required:!0}},{key:"onSkillChange",value:{name:"Function",required:!0}}]},alias:"Props"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Helper to reset the state"},{name:"toggleIsEditing",docblock:"Toggles the edit mode\n\n@private\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Toggles the edit mode"},{name:"onSelect",docblock:"Toggles face selection\n\n@private\n@return {void}",modifiers:[],params:[{name:"face",type:{name:"SkillCardEntry",alias:"SkillCardEntry"}}],returns:{description:null,type:{name:"void"}},description:"Toggles face selection"},{name:"onDelete",docblock:"Deletes a face\n\n@private\n@return {void}",modifiers:[],params:[{name:"face",type:{name:"SkillCardEntry",alias:"SkillCardEntry"}}],returns:{description:null,type:{name:"void"}},description:"Deletes a face"},{name:"onSave",docblock:"Saves the new card data\n\n@private\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Saves the new card data"},{name:"onCancel",docblock:"Cancels editing\n\n@private\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Cancels editing"}],displayName:"Faces",props:{card:{required:!0,flowType:{name:"SkillCard"},description:""},getViewer:{required:!1,flowType:{name:"Function"},description:""},hasError:{required:!0,flowType:{name:"boolean"},description:""},isEditable:{required:!0,flowType:{name:"boolean"},description:""},onSkillChange:{required:!0,flowType:{name:"Function"},description:""}}};var skills_faces_Faces=Faces_Faces;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/skills/faces/Faces.js"]={name:"Faces",docgenInfo:Faces_Faces.__docgenInfo,path:"src/elements/content-sidebar/skills/faces/Faces.js"});var SidebarSkillsCard=function(_ref){var card=_ref.card,cards=_ref.cards,hasError=_ref.hasError,isEditable=_ref.isEditable,onSkillChange=_ref.onSkillChange,getViewer=_ref.getViewer;switch(card.skill_card_type){case constants.te:return react_default.a.createElement(skills_keywords_Keywords,{card:card,getViewer:getViewer,hasError:hasError,isEditable:isEditable,onSkillChange:onSkillChange,transcript:isEditable?cards.find((function(_ref2){return _ref2.skill_card_type===constants.ye})):void 0});case constants.xe:case constants.se:return react_default.a.createElement(skills_faces_Faces,{card:card,getViewer:getViewer,hasError:hasError,isEditable:isEditable,onSkillChange:onSkillChange});case constants.ye:return react_default.a.createElement(skills_transcript_Transcript,{card:card,getViewer:getViewer,hasError:hasError,isEditable:isEditable,onSkillChange:onSkillChange});case constants.ue:return react_default.a.createElement(status_Status,{card:card});default:return null}};SidebarSkillsCard.__docgenInfo={description:"",methods:[],displayName:"SidebarSkillsCard",props:{card:{required:!0,flowType:{name:"SkillCard"},description:""},cards:{required:!0,flowType:{name:"Array",elements:[{name:"SkillCard"}],raw:"Array<SkillCard>"},description:""},getViewer:{required:!0,flowType:{name:"Function"},description:""},hasError:{required:!0,flowType:{name:"boolean"},description:""},isEditable:{required:!0,flowType:{name:"boolean"},description:""},onSkillChange:{required:!0,flowType:{name:"Function"},description:""}}};var skills_SidebarSkillsCard=SidebarSkillsCard;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/skills/SidebarSkillsCard.js"]={name:"SidebarSkillsCard",docgenInfo:SidebarSkillsCard.__docgenInfo,path:"src/elements/content-sidebar/skills/SidebarSkillsCard.js"});var skills_SidebarSkills=function(_ref3){var file=_ref3.file,cards=_ref3.cards,errors=_ref3.errors,getViewer=_ref3.getViewer,_onSkillChange=_ref3.onSkillChange,_file$permissions=file.permissions,isSkillEditable=!!(void 0===_file$permissions?{}:_file$permissions).can_upload;return cards.map((function(card,index){card.error&&!card.status&&(card.skill_card_type=constants.ue,card.status={code:constants.re},delete card.error);var skill_card_type,cardId=card.id||uniqueId_default()("card_"),isValid=Object(skillUtils.b)(file,card),interactionTarget=(skill_card_type=card.skill_card_type)===constants.te?interactionTargets.f.KEYWORDS.CARD:skill_card_type===constants.se||skill_card_type===constants.xe?interactionTargets.f.FACES.CARD:skill_card_type===constants.ye?interactionTargets.f.TRANSCRIPTS.CARD:"",title=function(_ref2){var skill_card_type=_ref2.skill_card_type,_ref2$skill_card_titl=_ref2.skill_card_title,skill_card_title=void 0===_ref2$skill_card_titl?{}:_ref2$skill_card_titl,code=skill_card_title.code,message=skill_card_title.message,defaultKey="".concat(skill_card_type,"Skill"),defaultMessage=messages.a[defaultKey]||messages.a.defaultSkill;return"skills_faces"===code?react.createElement(index_es.b,messages.a.faceSkill):"skills_transcript"===code?react.createElement(index_es.b,messages.a.transcriptSkill):"skills_topics"===code?react.createElement(index_es.b,messages.a.topicsSkill):"skills_status"===code?react.createElement(index_es.b,messages.a.statusSkill):"skills_error"===code?react.createElement(index_es.b,messages.a.error):message||react.createElement(index_es.b,defaultMessage)}(card),hasEntries=Array.isArray(card.entries)?0<card.entries.length:isValid;return isValid?react.createElement(SidebarSection.a,{key:cardId,interactionTarget:interactionTarget,isOpen:hasEntries,title:title},react.createElement(skills_SidebarSkillsCard,{card:card,cards:cards,getViewer:getViewer,hasError:!!errors[index],isEditable:isSkillEditable,onSkillChange:function onSkillChange(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _onSkillChange.apply(void 0,[index].concat(args))}})):null}))},logger_constants=__webpack_require__(562),performance=__webpack_require__(561),api_context=__webpack_require__(3183),error_boundary=__webpack_require__(1111),common_logger=__webpack_require__(1113);__webpack_require__(3282);function SkillsSidebar_typeof(obj){return(SkillsSidebar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function SkillsSidebar_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function SkillsSidebar_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?SkillsSidebar_ownKeys(Object(source),!0).forEach((function(key){SkillsSidebar_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):SkillsSidebar_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function SkillsSidebar_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function SkillsSidebar_getPrototypeOf(o){return(SkillsSidebar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function SkillsSidebar_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function SkillsSidebar_setPrototypeOf(o,p){return(SkillsSidebar_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function SkillsSidebar_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__.d(__webpack_exports__,"SkillsSidebarComponent",(function(){return SkillsSidebar_SkillsSidebar}));var MARK_NAME_JS_READY="".concat(constants.Qd,"_").concat(logger_constants.a);Object(performance.b)(MARK_NAME_JS_READY);var SkillsSidebar_ref4=react.createElement(LoadingIndicator.a,null),SkillsSidebar_SkillsSidebar=function(_React$PureComponent){function SkillsSidebar(props){var _this;return function SkillsSidebar_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SkillsSidebar),_this=function SkillsSidebar_possibleConstructorReturn(self,call){return!call||"object"!==SkillsSidebar_typeof(call)&&"function"!=typeof call?SkillsSidebar_assertThisInitialized(self):call}(this,SkillsSidebar_getPrototypeOf(SkillsSidebar).call(this,props)),SkillsSidebar_defineProperty(SkillsSidebar_assertThisInitialized(_this),"state",{errors:{}}),SkillsSidebar_defineProperty(SkillsSidebar_assertThisInitialized(_this),"fetchSkillsSuccessCallback",(function(cards){_this.updatePreviewTranscript(cards),_this.setState({cards:cards})})),SkillsSidebar_defineProperty(SkillsSidebar_assertThisInitialized(_this),"updatePreviewTranscript",(function(cards){var _this$props=_this.props,getPreview=_this$props.getPreview,getViewer=_this$props.getViewer,preview=getPreview?getPreview():null,viewer=getViewer?getViewer():null,transcriptCard=cards.find((function(card){return card.skill_card_type===constants.ye}));transcriptCard&&preview&&(viewer?"function"==typeof viewer.loadAutoGeneratedCaptions&&viewer.loadAutoGeneratedCaptions(transcriptCard):preview.addListener("load",(function(_ref){var loadedViewer=_ref.viewer;"function"==typeof loadedViewer.loadAutoGeneratedCaptions&&loadedViewer.loadAutoGeneratedCaptions(transcriptCard)})))})),SkillsSidebar_defineProperty(SkillsSidebar_assertThisInitialized(_this),"onSaveSuccessHandler",(function(index,updatedCards){var clone=SkillsSidebar_objectSpread({},_this.state.errors);delete clone[index],_this.updatePreviewTranscript(updatedCards),_this.setState({cards:updatedCards,errors:clone})})),SkillsSidebar_defineProperty(SkillsSidebar_assertThisInitialized(_this),"onSaveErrorHandler",(function(index){var clone=SkillsSidebar_objectSpread({},_this.state.errors);clone[index]=!0,_this.setState({errors:clone})})),SkillsSidebar_defineProperty(SkillsSidebar_assertThisInitialized(_this),"onSave",(function(index){var removes=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],adds=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],replaces=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],_this$props2=_this.props,api=_this$props2.api,file=_this$props2.file,_this$state$cards=_this.state.cards,cards=void 0===_this$state$cards?[]:_this$state$cards,card=cards[index],path="/cards/".concat(index),ops=[],canEdit=get_default()(file,constants.Fc,!1);if(canEdit&&card){if(Array.isArray(replaces)&&replaces.forEach((function(_ref2){var replaced=_ref2.replaced,replacement=_ref2.replacement,idx=card.entries.findIndex((function(entry){return entry===replaced}));-1<idx&&ops.push({op:"replace",path:"".concat(path,"/entries/").concat(idx),value:replacement})})),Array.isArray(removes)){var deletes=[];removes.forEach((function(removed){var idx=card.entries.findIndex((function(entry){return entry===removed}));-1<idx&&deletes.push(idx)})),deletes.sort((function(a,b){return b-a})).forEach((function(idx){ops.push({op:"remove",path:"".concat(path,"/entries/").concat(idx)})}))}Array.isArray(adds)&&adds.forEach((function(added){ops.push({op:"add",path:"".concat(path,"/entries/-"),value:added})})),0===ops.length||(ops.splice(0,0,{op:"test",path:path,value:card}),api.getMetadataAPI(!1).updateSkills(file,ops,(function(updatedCards){_this.onSaveSuccessHandler(index,updatedCards)}),(function(){_this.onSaveErrorHandler(index)})))}})),_this.props.logger.onReadyMetric({endMarkName:MARK_NAME_JS_READY}),_this}return function SkillsSidebar_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&SkillsSidebar_setPrototypeOf(subClass,superClass)}(SkillsSidebar,_React$PureComponent),function SkillsSidebar_createClass(Constructor,protoProps,staticProps){return protoProps&&SkillsSidebar_defineProperties(Constructor.prototype,protoProps),staticProps&&SkillsSidebar_defineProperties(Constructor,staticProps),Constructor}(SkillsSidebar,[{key:"componentDidMount",value:function componentDidMount(){var _this$props3=this.props,api=_this$props3.api,file=_this$props3.file;api.getMetadataAPI(!1).getSkills(file,this.fetchSkillsSuccessCallback,noop_default.a)}},{key:"componentDidUpdate",value:function componentDidUpdate(_ref3){var prevRefreshIdentity=_ref3.refreshIdentity,_this$props4=this.props,api=_this$props4.api,file=_this$props4.file;_this$props4.refreshIdentity!==prevRefreshIdentity&&api.getMetadataAPI(!1).getSkills(file,this.fetchSkillsSuccessCallback,noop_default.a)}},{key:"render",value:function render(){var _this$props5=this.props,file=_this$props5.file,getViewer=_this$props5.getViewer,elementId=_this$props5.elementId,_this$state=this.state,cards=_this$state.cards,errors=_this$state.errors;return react.createElement(SidebarContent.a,{className:"bcs-skills",elementId:elementId,sidebarView:constants.fe,title:react.createElement(index_es.b,messages.a.sidebarSkillsTitle)},cards?react.createElement(skills_SidebarSkills,{cards:cards,errors:errors,file:file,getViewer:getViewer,onSkillChange:this.onSave}):SkillsSidebar_ref4)}}]),SkillsSidebar}(react.PureComponent);SkillsSidebar_SkillsSidebar.displayName="SkillsSidebar",SkillsSidebar_SkillsSidebar.__docgenInfo={description:"",methods:[{name:"fetchSkillsSuccessCallback",docblock:"Handles skills fetch success\n\n@private\n@param {Array<SkillCard>} cards - Skills cards\n@return {void}",modifiers:[],params:[{name:"cards",description:"Skills cards",type:{name:"Array",elements:[{name:"SkillCard"}],raw:"Array<SkillCard>",alias:"Array"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Handles skills fetch success"},{name:"updatePreviewTranscript",docblock:"Updates Preview with transcript data\n\n@private\n@param {Array<SkillCard>} cards - Skills cards\n@return {void}",modifiers:[],params:[{name:"cards",description:"Skills cards",type:{name:"Array",elements:[{name:"SkillCard"}],raw:"Array<SkillCard>",alias:"Array"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Updates Preview with transcript data"},{name:"onSaveSuccessHandler",docblock:"Success handler for save\n\n@private\n@param {Array} updatedCards - updated skill cards\n@param {number} index - index of the card being edited\n@return {void}",modifiers:[],params:[{name:"index",description:"index of the card being edited",type:{name:"number"},optional:!1},{name:"updatedCards",description:"updated skill cards",type:{name:"Array",elements:[{name:"SkillCard"}],raw:"Array<SkillCard>",alias:"Array"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Success handler for save"},{name:"onSaveErrorHandler",docblock:"Error handler for save\n\n@private\n@param {number} index - index of the card being edited\n@return {void}",modifiers:[],params:[{name:"index",description:"index of the card being edited",type:{name:"number"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Error handler for save"},{name:"onSave",docblock:"Updates skill metadata\n\n@private\n@param {number} index - index of the card being edited\n@param {Array} removes - entries to remove\n@param {Array} adds - entries to add\n@param {Array} replaces - entries to replace\n@return {void}",modifiers:[],params:[{name:"index",description:"index of the card being edited",type:{name:"number"},optional:!1},{name:"removes",description:"entries to remove",type:{name:"Array"},optional:!1},{name:"adds",description:"entries to add",type:{name:"Array"},optional:!1},{name:"replaces",description:"entries to replace",type:{name:"Array"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Updates skill metadata"}],displayName:"SkillsSidebar",props:{api:{required:!0,flowType:{name:"API"},description:""},elementId:{required:!0,flowType:{name:"string"},description:""},file:{required:!0,flowType:{name:"BoxItem"},description:""},getPreview:{required:!0,flowType:{name:"Function"},description:""},getViewer:{required:!0,flowType:{name:"Function"},description:""},refreshIdentity:{required:!1,flowType:{name:"boolean"},description:""}}};__webpack_exports__.default=flow_default()([Object(common_logger.a)(constants.Qd),Object(error_boundary.a)(constants.Qd),api_context.b])(SkillsSidebar_SkillsSidebar);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/SkillsSidebar.js"]={name:"SkillsSidebar",docgenInfo:SkillsSidebar_SkillsSidebar.__docgenInfo,path:"src/elements/content-sidebar/SkillsSidebar.js"})}}]);
//# sourceMappingURL=skills-sidebar.84720d5f22f57bab8d32.bundle.js.map