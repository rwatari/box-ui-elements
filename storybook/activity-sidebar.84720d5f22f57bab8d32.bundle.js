/*!
 * Box UI Element
 * 
 * Copyright 2019 Box, Inc. All rights reserved.
 * 
 * This product includes software developed by Box, Inc. ("Box")
 * (http://www.box.com)
 * 
 * ALL BOX SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL BOX BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 * See the Box license for the specific language governing permissions
 * and limitations under the license.
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{3184:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(9);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),index_es=__webpack_require__(3),constants=__webpack_require__(1),datetime=__webpack_require__(236),time_messages=Object(index_es.f)({eventTime:{id:"boxui.readableTime.eventTime",defaultMessage:"{time, date, medium}"},eventTimeToday:{id:"boxui.readableTime.eventTimeToday",defaultMessage:"Today at {time, time, short}"},eventTimeYesterday:{id:"boxui.readableTime.eventTimeYesterday",defaultMessage:"Yesterday at {time, time, short}"},eventTimeDate:{id:"boxui.readableTime.eventTimeDate",defaultMessage:"{time, date, medium} at {time, time, short}"},eventTimeDateShort:{id:"boxui.readableTime.eventTimeDateShort",defaultMessage:"{date} at {time, time, short}"},eventTimeWeekdayLong:{id:"boxui.readableTime.eventTimeWeekdayLong",defaultMessage:"{weekday}, {time, date, medium}"}});function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}var ReadableTime=function(_ref){var timestamp=_ref.timestamp,_ref$relativeThreshol=_ref.relativeThreshold,relativeThreshold=void 0===_ref$relativeThreshol?constants.Gd:_ref$relativeThreshol,_ref$allowFutureTimes=_ref.allowFutureTimestamps,_ref$alwaysShowTime=_ref.alwaysShowTime,alwaysShowTime=void 0!==_ref$alwaysShowTime&&_ref$alwaysShowTime,_ref$showWeekday=_ref.showWeekday,relativeIfNewerThanTs=Date.now()-relativeThreshold,shouldShowYear=!Object(datetime.g)(timestamp);void 0!==_ref$allowFutureTimes&&!_ref$allowFutureTimes&&timestamp>Date.now()&&(timestamp=relativeIfNewerThanTs);var dateMessage=time_messages.eventTime,date=null,weekday=null;if(Object(datetime.h)(timestamp))dateMessage=time_messages.eventTimeToday;else if(Object(datetime.i)(timestamp))dateMessage=time_messages.eventTimeYesterday;else if(void 0!==_ref$showWeekday&&_ref$showWeekday)dateMessage=time_messages.eventTimeWeekdayLong,weekday=react_default.a.createElement(index_es.a,{value:timestamp,weekday:"long"});else if(shouldShowYear&&alwaysShowTime)dateMessage=time_messages.eventTimeDate;else if(!shouldShowYear&&alwaysShowTime)dateMessage=time_messages.eventTimeDateShort,date=react_default.a.createElement(index_es.a,{value:timestamp,month:"short",day:"numeric"});else if(!shouldShowYear&&!alwaysShowTime)return react_default.a.createElement(index_es.a,{value:timestamp,month:"short",day:"numeric"});var output=react_default.a.createElement(index_es.b,_extends({},dateMessage,{values:{time:timestamp,date:date,weekday:weekday}}));return Math.abs(Date.now()-timestamp)<=relativeThreshold&&(output=react_default.a.createElement(index_es.d,{value:timestamp})),output};ReadableTime.__docgenInfo={description:"",methods:[],displayName:"ReadableTime",props:{relativeThreshold:{defaultValue:{value:"ONE_HOUR_MS",computed:!0},required:!1,flowType:{name:"number"},description:"The number of milliseconds before now that a relative (vs. absolute) time should be displayed (Default: 1 hour)"},allowFutureTimestamps:{defaultValue:{value:"true",computed:!1},required:!1,flowType:{name:"boolean"},description:"A boolean that will cause future timestamps (usually due to incorrect computer time) to be corrected to the isToday message"},alwaysShowTime:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:"A boolean that will include the time alongside the date, if the date is shown"},showWeekday:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:"A boolean that will include the weekday alongside the date, if the date is shown"},timestamp:{required:!0,flowType:{name:"number"},description:"The timestamp which should be used to display the date"}}};__webpack_exports__.a=ReadableTime;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/time/ReadableTime.js"]={name:"ReadableTime",docgenInfo:ReadableTime.__docgenInfo,path:"src/components/time/ReadableTime.js"})},3191:function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_styles_variables__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(14),_accessible_svg__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),IconTrash=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?_styles_variables__WEBPACK_IMPORTED_MODULE_1__.bdlGray80:_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?16:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?16:_ref$width;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_accessible_svg__WEBPACK_IMPORTED_MODULE_2__.a,{className:"icon-trash ".concat(className),height:height,title:title,viewBox:"0 0 16 16",width:width},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{className:"fill-color",fill:color,fillRule:"evenodd",d:"M14 2l-1.8 11c-.1.6-.7 1-1.2 1H5c-.6 0-1.1-.5-1.2-1L2 2h12zm-1.2 1H3.2l1.6 9.9s.1.1.2.1h6c.06 0 .12-.036.158-.065l.042-.035L12.8 3zm-2.3 1c.3 0 .5.2.5.5s-.2.5-.5.5h-5c-.3 0-.5-.2-.5-.5s.2-.5.5-.5z"}))};IconTrash.displayName="IconTrash",IconTrash.__docgenInfo={description:"",methods:[],displayName:"IconTrash",props:{className:{defaultValue:{value:"''",computed:!1},required:!1},color:{defaultValue:{value:"bdlGray80",computed:!0},required:!1},height:{defaultValue:{value:"16",computed:!1},required:!1},width:{defaultValue:{value:"16",computed:!1},required:!1}}},__webpack_exports__.a=IconTrash,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconTrash.js"]={name:"IconTrash",docgenInfo:IconTrash.__docgenInfo,path:"src/icons/general/IconTrash.js"})},3196:function(module,__webpack_exports__,__webpack_require__){"use strict";var _constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);__webpack_exports__.a={getVersionAction:function(_ref){var restored_at=_ref.restored_at,trashed_at=_ref.trashed_at,version_promoted=_ref.version_promoted,action=_constants__WEBPACK_IMPORTED_MODULE_0__.df;return trashed_at&&(action=_constants__WEBPACK_IMPORTED_MODULE_0__.Xe),restored_at&&(action=_constants__WEBPACK_IMPORTED_MODULE_0__.Ze),version_promoted&&(action=_constants__WEBPACK_IMPORTED_MODULE_0__.Ye),action},getVersionUser:function(_ref2){var modified_by=_ref2.modified_by,restored_by=_ref2.restored_by,trashed_by=_ref2.trashed_by;return restored_by||trashed_by||modified_by||_constants__WEBPACK_IMPORTED_MODULE_0__.be}}},3198:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(6),__webpack_require__(17);var react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react_intl__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_components_error_mask_ErrorMask__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1124),_components_inline_error_InlineError__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1109),_SidebarSection__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(3186);function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_exports__.a=function(WrappedComponent){return function(_ref){var maskError=_ref.maskError,inlineError=_ref.inlineError,rest=(_ref.errorCode,_objectWithoutProperties(_ref,["maskError","inlineError","errorCode"]));return maskError?react__WEBPACK_IMPORTED_MODULE_2__.createElement(_SidebarSection__WEBPACK_IMPORTED_MODULE_6__.a,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement(_components_error_mask_ErrorMask__WEBPACK_IMPORTED_MODULE_4__.a,{errorHeader:react__WEBPACK_IMPORTED_MODULE_2__.createElement(react_intl__WEBPACK_IMPORTED_MODULE_3__.b,maskError.errorHeader),errorSubHeader:maskError.errorSubHeader?react__WEBPACK_IMPORTED_MODULE_2__.createElement(react_intl__WEBPACK_IMPORTED_MODULE_3__.b,maskError.errorSubHeader):void 0})):inlineError?react__WEBPACK_IMPORTED_MODULE_2__.createElement(react__WEBPACK_IMPORTED_MODULE_2__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement(_components_inline_error_InlineError__WEBPACK_IMPORTED_MODULE_5__.a,{title:react__WEBPACK_IMPORTED_MODULE_2__.createElement(react_intl__WEBPACK_IMPORTED_MODULE_3__.b,inlineError.title)},react__WEBPACK_IMPORTED_MODULE_2__.createElement(react_intl__WEBPACK_IMPORTED_MODULE_3__.b,inlineError.content)),react__WEBPACK_IMPORTED_MODULE_2__.createElement(WrappedComponent,rest)):react__WEBPACK_IMPORTED_MODULE_2__.createElement(WrappedComponent,rest)}}},3200:function(module,exports,__webpack_require__){},3204:function(module,__webpack_exports__,__webpack_require__){"use strict";var _ReadableTime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3184);__webpack_require__.d(__webpack_exports__,"a",(function(){return _ReadableTime__WEBPACK_IMPORTED_MODULE_0__.a}))},3210:function(module,__webpack_exports__,__webpack_require__){"use strict";var _InlineError__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1109);__webpack_require__.d(__webpack_exports__,"a",(function(){return _InlineError__WEBPACK_IMPORTED_MODULE_0__.a}))},3254:function(module,exports,__webpack_require__){},3313:function(module,exports,__webpack_require__){},3314:function(module,exports,__webpack_require__){},3315:function(module,exports,__webpack_require__){},3316:function(module,exports,__webpack_require__){},3317:function(module,exports,__webpack_require__){},3318:function(module,exports,__webpack_require__){},3319:function(module,exports,__webpack_require__){},3410:function(module,exports,__webpack_require__){},3411:function(module,exports,__webpack_require__){},3412:function(module,exports,__webpack_require__){},3413:function(module,exports,__webpack_require__){},3414:function(module,exports,__webpack_require__){},3415:function(module,exports,__webpack_require__){},3416:function(module,exports,__webpack_require__){},3418:function(module,exports,__webpack_require__){},3419:function(module,exports,__webpack_require__){},3420:function(module,exports,__webpack_require__){},3421:function(module,exports,__webpack_require__){},3422:function(module,exports,__webpack_require__){},3423:function(module,exports,__webpack_require__){},3424:function(module,exports,__webpack_require__){},3425:function(module,exports,__webpack_require__){},3426:function(module,exports,__webpack_require__){},3427:function(module,exports,__webpack_require__){},3428:function(module,exports,__webpack_require__){},3429:function(module,exports,__webpack_require__){},3430:function(module,exports,__webpack_require__){},3440:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(6),__webpack_require__(11),__webpack_require__(18),__webpack_require__(19),__webpack_require__(12),__webpack_require__(20),__webpack_require__(10),__webpack_require__(31),__webpack_require__(16),__webpack_require__(1112),__webpack_require__(15),__webpack_require__(54);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),debounce=__webpack_require__(346),debounce_default=__webpack_require__.n(debounce),flow=__webpack_require__(558),flow_default=__webpack_require__.n(flow),noop=__webpack_require__(7),noop_default=__webpack_require__.n(noop),index_es=__webpack_require__(3),get=(__webpack_require__(1108),__webpack_require__(9),__webpack_require__(13)),get_default=__webpack_require__.n(get),classnames=__webpack_require__(8),classnames_default=__webpack_require__.n(classnames),dom=__webpack_require__(70),react_tether=(__webpack_require__(30),__webpack_require__(244),__webpack_require__(27),__webpack_require__(357)),react_tether_default=__webpack_require__.n(react_tether),components_button=(__webpack_require__(17),__webpack_require__(157)),messages=__webpack_require__(4),primary_button=__webpack_require__(1803),constants=__webpack_require__(1),flyout=__webpack_require__(3256),interactionTargets=__webpack_require__(3173);__webpack_require__(3313);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var DeleteConfirmation_DeleteConfirmation=function(_React$Component){function DeleteConfirmation(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DeleteConfirmation);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,(_getPrototypeOf2=_getPrototypeOf(DeleteConfirmation)).call.apply(_getPrototypeOf2,[this].concat(args))),function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(_assertThisInitialized(_this),"onKeyDown",(function(event){var nativeEvent=event.nativeEvent,_this$props=_this.props,isOpen=_this$props.isOpen,onDeleteCancel=_this$props.onDeleteCancel;switch(nativeEvent.stopImmediatePropagation(),event.key){case constants.wd.escape:event.stopPropagation(),event.preventDefault(),isOpen&&onDeleteCancel()}})),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(DeleteConfirmation,_React$Component),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(DeleteConfirmation,[{key:"render",value:function render(){var _this$props2=this.props,message=_this$props2.message,onDeleteCancel=_this$props2.onDeleteCancel,onDeleteConfirm=_this$props2.onDeleteConfirm,rest=_objectWithoutProperties(_this$props2,["message","onDeleteCancel","onDeleteConfirm"]);return react.createElement(flyout.b,_extends({className:"be-modal bcs-DeleteConfirmation",onKeyDown:this.onKeyDown,role:"dialog",shouldDefaultFocus:!0,shouldOutlineFocus:!1},rest),react.createElement("div",{className:"bcs-DeleteConfirmation-promptMessage"},react.createElement(index_es.b,message)),react.createElement("div",null,react.createElement(components_button.a,{className:"bcs-DeleteConfirmation-cancel",onClick:onDeleteCancel,type:"button","data-resin-target":interactionTargets.a.INLINE_DELETE_CANCEL},react.createElement(index_es.b,messages.a.cancel)),react.createElement(primary_button.a,{className:"bcs-DeleteConfirmation-delete",onClick:onDeleteConfirm,type:"button","data-resin-target":interactionTargets.a.INLINE_DELETE_CONFIRM},react.createElement(index_es.b,messages.a.delete))))}}]),DeleteConfirmation}(react.Component);DeleteConfirmation_DeleteConfirmation.displayName="DeleteConfirmation",DeleteConfirmation_DeleteConfirmation.__docgenInfo={description:"",methods:[{name:"onKeyDown",docblock:null,modifiers:[],params:[{name:"event",type:{name:"SyntheticKeyboardEvent",elements:[],raw:"SyntheticKeyboardEvent<>",alias:"SyntheticKeyboardEvent"}}],returns:{type:{name:"void"}}}],displayName:"DeleteConfirmation",props:{isOpen:{required:!0,flowType:{name:"boolean"},description:""},message:{required:!0,flowType:{name:"MessageDescriptor"},description:""},onDeleteCancel:{required:!0,flowType:{name:"Function"},description:""},onDeleteConfirm:{required:!0,flowType:{name:"Function"},description:""}}};var common_delete_confirmation_DeleteConfirmation=DeleteConfirmation_DeleteConfirmation;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/common/delete-confirmation/DeleteConfirmation.js"]={name:"DeleteConfirmation",docgenInfo:DeleteConfirmation_DeleteConfirmation.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/common/delete-confirmation/DeleteConfirmation.js"});var components_tooltip=__webpack_require__(76),ReadableTime=__webpack_require__(3184),activity_timestamp_messages=Object(index_es.f)({fullDateTime:{id:"be.activityFeed.fullDateTime",defaultMessage:"{time, date, full} at {time, time, short}"}});__webpack_require__(3314);function ActivityTimestamp_extends(){return(ActivityTimestamp_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}var ActivityTimestamp_ActivityTimestamp=function(_ref){var date=_ref.date;return react.createElement(components_tooltip.a,{text:react.createElement(index_es.b,ActivityTimestamp_extends({},activity_timestamp_messages.fullDateTime,{values:{time:date}}))},react.createElement("small",{className:"bcs-ActivityTimestamp"},react.createElement(ReadableTime.a,{relativeThreshold:0,alwaysShowTime:!0,timestamp:date})))};ActivityTimestamp_ActivityTimestamp.displayName="ActivityTimestamp",ActivityTimestamp_ActivityTimestamp.__docgenInfo={description:"",methods:[],displayName:"ActivityTimestamp",props:{date:{required:!0,flowType:{name:"number"},description:""}}};var activity_timestamp_ActivityTimestamp=ActivityTimestamp_ActivityTimestamp;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/common/activity-timestamp/ActivityTimestamp.js"]={name:"ActivityTimestamp",docgenInfo:ActivityTimestamp_ActivityTimestamp.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/common/activity-timestamp/ActivityTimestamp.js"});var IconTrash=__webpack_require__(3191);__webpack_require__(3200);function MediaFigure_extends(){return(MediaFigure_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function MediaFigure_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function MediaFigure_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var MediaFigure=function(_ref){var Wrapper=_ref.as,className=_ref.className,children=_ref.children,rest=MediaFigure_objectWithoutProperties(_ref,["as","className","children"]);return react.createElement(Wrapper,MediaFigure_extends({className:classnames_default()("bdl-Media-figure",className)},rest),children)};MediaFigure.displayName="MediaFigure",MediaFigure.defaultProps={as:"figure"},MediaFigure.__docgenInfo={description:"",methods:[],displayName:"MediaFigure",props:{as:{defaultValue:{value:"'figure'",computed:!1},required:!1,flowType:{name:"ReactElementType",raw:"React.ElementType"},description:"Component to use as outermost element, e.g., 'div'"},children:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:"Child elements"},className:{required:!1,flowType:{name:"string"},description:"Additional class names"}}};var media_MediaFigure=MediaFigure;function MediaBody_extends(){return(MediaBody_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function MediaBody_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function MediaBody_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/media/MediaFigure.js"]={name:"MediaFigure",docgenInfo:MediaFigure.__docgenInfo,path:"src/components/media/MediaFigure.js"});var MediaBody=function(_ref){var className=_ref.className,children=_ref.children,rest=MediaBody_objectWithoutProperties(_ref,["className","children"]);return react.createElement("div",MediaBody_extends({className:classnames_default()("bdl-Media-body",className)},rest),children)};MediaBody.displayName="MediaBody",MediaBody.__docgenInfo={description:"",methods:[],displayName:"MediaBody",props:{children:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:"Child elements"},className:{required:!1,flowType:{name:"string"},description:"Additional class names"}}};var media_MediaBody=MediaBody;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/media/MediaBody.js"]={name:"MediaBody",docgenInfo:MediaBody.__docgenInfo,path:"src/components/media/MediaBody.js"});var IconEllipsis=__webpack_require__(1116),plain_button=__webpack_require__(183),dropdown_menu=__webpack_require__(1120),menu=__webpack_require__(783),variables=__webpack_require__(14);function MediaMenu_extends(){return(MediaMenu_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function MediaMenu_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function MediaMenu_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var MediaMenu_ref2=react.createElement(IconEllipsis.a,{color:variables.bdlGray50,height:16,width:16}),MediaMenu=function(_ref){var className=_ref.className,children=_ref.children,isDisabled=_ref.isDisabled,dropdownProps=_ref.dropdownProps,menuProps=_ref.menuProps,rest=MediaMenu_objectWithoutProperties(_ref,["className","children","isDisabled","dropdownProps","menuProps"]);return react.createElement(dropdown_menu.a,MediaMenu_extends({constrainToScrollParent:!0,isRightAligned:!0},dropdownProps),react.createElement(plain_button.a,MediaMenu_extends({isDisabled:isDisabled,className:classnames_default()("bdl-Media-menu",className),type:"button"},rest),MediaMenu_ref2),react.createElement(menu.a,menuProps,children))};MediaMenu.displayName="MediaMenu",MediaMenu.defaultProps={dropdownProps:{},isDisabled:!1,menuProps:{}},MediaMenu.__docgenInfo={description:"",methods:[],displayName:"MediaMenu",props:{dropdownProps:{defaultValue:{value:"{}",computed:!1},required:!1,flowType:{name:"signature",type:"object",raw:"{}",signature:{properties:[]}},description:"Additional props for the DropdownMenu"},isDisabled:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:"is the dropdown menu button disabled"},menuProps:{defaultValue:{value:"{}",computed:!1},required:!1,flowType:{name:"signature",type:"object",raw:"{}",signature:{properties:[]}},description:"Additional props for the Menu"},children:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:"Child elements"},className:{required:!1,flowType:{name:"string"},description:"Additional class names for the menu button"}}};var media_MediaMenu=MediaMenu;function Media_extends(){return(Media_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function Media_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function Media_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/media/MediaMenu.js"]={name:"MediaMenu",docgenInfo:MediaMenu.__docgenInfo,path:"src/components/media/MediaMenu.js"});var Media_Media=function(_ref){var Wrapper=_ref.as,children=_ref.children,className=_ref.className,rest=Media_objectWithoutProperties(_ref,["as","children","className"]);return react.createElement(Wrapper,Media_extends({className:classnames_default()("bdl-Media",className)},rest),children)};Media_Media.displayName="Media",Media_Media.defaultProps={as:"div"},Media_Media.Body=media_MediaBody,Media_Media.Menu=media_MediaMenu,Media_Media.Figure=media_MediaFigure,Media_Media.__docgenInfo={description:"",methods:[],displayName:"Media",props:{as:{defaultValue:{value:"'div'",computed:!1},required:!1,flowType:{name:"ReactElementType",raw:"React.ElementType"},description:"Component to use as outermost element, e.g., 'li'"},children:{required:!0,flowType:{name:"ReactChildrenArray",raw:"React.ChildrenArray<\n    React.Element<typeof MediaFigure | typeof MediaBody | typeof MediaMenu> | false | null,\n>",elements:[{name:"union",raw:"React.Element<typeof MediaFigure | typeof MediaBody | typeof MediaMenu> | false | null",elements:[{name:"ReactElement",raw:"React.Element<typeof MediaFigure | typeof MediaBody | typeof MediaMenu>",elements:[{name:"union",raw:"typeof MediaFigure | typeof MediaBody | typeof MediaMenu",elements:[{name:"MediaFigure"},{name:"MediaBody"},{name:"MediaMenu"}]}]},{name:"literal",value:"false"},{name:"null"}]}]},description:"Child elements"},className:{required:!1,flowType:{name:"string"},description:"Additional class names"}}};var media_Media=Media_Media;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/media/Media.js"]={name:"Media",docgenInfo:Media_Media.__docgenInfo,path:"src/components/media/Media.js"});var app_activity_messages=Object(index_es.f)({appActivityDeleteMenuItem:{id:"be.appActivity.deleteMenuItem",defaultMessage:"Delete"},appActivityDeletePrompt:{id:"be.appActivity.deletePrompt",defaultMessage:"Are you sure you want to permanently delete this app activity?"},appActivityAltIcon:{id:"be.appActivity.altIcon",defaultMessage:"{appActivityName} Icon"}});function LinkGroup_typeof(obj){return(LinkGroup_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function LinkGroup_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function LinkGroup_possibleConstructorReturn(self,call){return!call||"object"!==LinkGroup_typeof(call)&&"function"!=typeof call?function LinkGroup_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function LinkGroup_getPrototypeOf(o){return(LinkGroup_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function LinkGroup_setPrototypeOf(o,p){return(LinkGroup_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var LinkGroup_LinkGroup=function(_React$Component){function LinkGroup(){return function LinkGroup_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LinkGroup),LinkGroup_possibleConstructorReturn(this,LinkGroup_getPrototypeOf(LinkGroup).apply(this,arguments))}return function LinkGroup_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&LinkGroup_setPrototypeOf(subClass,superClass)}(LinkGroup,_React$Component),function LinkGroup_createClass(Constructor,protoProps,staticProps){return protoProps&&LinkGroup_defineProperties(Constructor.prototype,protoProps),staticProps&&LinkGroup_defineProperties(Constructor,staticProps),Constructor}(LinkGroup,[{key:"render",value:function render(){var _this$props=this.props,title=_this$props.title,children=_this$props.children,className=_this$props.className;return react.createElement("div",{className:"link-group ".concat(className)},title?react.createElement("div",{className:"link-group-title"},title):null,react.createElement("ul",null,react.Children.map(children,(function(item,i){return item?react.createElement("li",{key:i},item," "):null}))))}}]),LinkGroup}(react.Component);LinkGroup_LinkGroup.displayName="LinkGroup",function LinkGroup_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(LinkGroup_LinkGroup,"defaultProps",{title:"",className:""}),LinkGroup_LinkGroup.__docgenInfo={description:"",methods:[],displayName:"LinkGroup",props:{title:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:""},className:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},children:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:""}}};"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/link/LinkGroup.js"]={name:"LinkGroup",docgenInfo:LinkGroup_LinkGroup.__docgenInfo,path:"src/components/link/LinkGroup.js"});var Link=__webpack_require__(3209),LinkBase=__webpack_require__(3226);function LinkButton_extends(){return(LinkButton_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function LinkButton_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function LinkButton_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var LinkButton=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,rest=LinkButton_objectWithoutProperties(_ref,["className"]);return react.createElement(LinkBase.a,LinkButton_extends({className:"btn ".concat(className)},rest))};LinkButton.displayName="LinkButton",LinkButton.__docgenInfo={description:"",methods:[],displayName:"LinkButton",props:{className:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},children:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:""}}};var link_LinkButton=LinkButton;function LinkPrimaryButton_extends(){return(LinkPrimaryButton_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function LinkPrimaryButton_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function LinkPrimaryButton_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/link/LinkButton.js"]={name:"LinkButton",docgenInfo:LinkButton.__docgenInfo,path:"src/components/link/LinkButton.js"});var LinkPrimaryButton=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,rest=LinkPrimaryButton_objectWithoutProperties(_ref,["className"]);return react.createElement(link_LinkButton,LinkPrimaryButton_extends({className:"btn-primary ".concat(className)},rest))};LinkPrimaryButton.displayName="LinkPrimaryButton",LinkPrimaryButton.__docgenInfo={description:"",methods:[],displayName:"LinkPrimaryButton",props:{className:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},children:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:""}}};"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/link/LinkPrimaryButton.js"]={name:"LinkPrimaryButton",docgenInfo:LinkPrimaryButton.__docgenInfo,path:"src/components/link/LinkPrimaryButton.js"});__webpack_require__(3315);function AppActivity_typeof(obj){return(AppActivity_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function AppActivity_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function AppActivity_getPrototypeOf(o){return(AppActivity_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function AppActivity_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function AppActivity_setPrototypeOf(o,p){return(AppActivity_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function AppActivity_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function mapActivityNodes(node){var _node$dataset=node.dataset,dataset=void 0===_node$dataset?{}:_node$dataset,_node$href=node.href,href=void 0===_node$href?"#":_node$href,tagName=node.tagName,textContent=node.textContent;return"A"===tagName?react.createElement(Link.a,{href:href,"data-resin-target":dataset.resinTarget,"data-resin-action":dataset.resinAction,key:"app_actvity_link_".concat(href),rel:"roreferrer noopener",className:"bcs-AppActivity-link",target:"_blank"},textContent):textContent}var AppActivity_ref=react.createElement(IconTrash.a,{color:variables.bdlGray80}),AppActivity_AppActivity=function(_React$PureComponent){function AppActivity(){var _getPrototypeOf2,_this;!function AppActivity_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AppActivity);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function AppActivity_possibleConstructorReturn(self,call){return!call||"object"!==AppActivity_typeof(call)&&"function"!=typeof call?AppActivity_assertThisInitialized(self):call}(this,(_getPrototypeOf2=AppActivity_getPrototypeOf(AppActivity)).call.apply(_getPrototypeOf2,[this].concat(args))),AppActivity_defineProperty(AppActivity_assertThisInitialized(_this),"parser",new DOMParser),AppActivity_defineProperty(AppActivity_assertThisInitialized(_this),"state",{isConfirmingDelete:!1}),AppActivity_defineProperty(AppActivity_assertThisInitialized(_this),"handleDeleteCancel",(function(){_this.setState({isConfirmingDelete:!1})})),AppActivity_defineProperty(AppActivity_assertThisInitialized(_this),"handleDeleteClick",(function(){_this.setState({isConfirmingDelete:!0})})),AppActivity_defineProperty(AppActivity_assertThisInitialized(_this),"handleDeleteConfirm",(function(){var _this$props=_this.props,id=_this$props.id;(0,_this$props.onDelete)({id:id,permissions:_this$props.permissions})})),AppActivity_defineProperty(AppActivity_assertThisInitialized(_this),"parseActivity",(function(){var renderedText=_this.props.rendered_text,doc=_this.parser.parseFromString(renderedText,"text/html");if(!doc)return[];var childNodes=get_default()(doc,"body.childNodes",[]);return Array.from(childNodes)})),_this}return function AppActivity_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&AppActivity_setPrototypeOf(subClass,superClass)}(AppActivity,_React$PureComponent),function AppActivity_createClass(Constructor,protoProps,staticProps){return protoProps&&AppActivity_defineProperties(Constructor.prototype,protoProps),staticProps&&AppActivity_defineProperties(Constructor,staticProps),Constructor}(AppActivity,[{key:"render",value:function render(){var _this$props2=this.props,templateId=_this$props2.activity_template.id,_this$props2$app=_this$props2.app,name=_this$props2$app.name,icon_url=_this$props2$app.icon_url,createdAt=_this$props2.created_at,createdBy=_this$props2.created_by,currentUser=_this$props2.currentUser,error=_this$props2.error,intl=_this$props2.intl,isPending=_this$props2.isPending,permissions=_this$props2.permissions,canDelete=get_default()(permissions,"can_delete",!1)||currentUser&&currentUser.id===createdBy.id,createdAtTimestamp=new Date(createdAt).getTime(),isConfirmingDelete=this.state.isConfirmingDelete;return react.createElement(media_Media,{className:classnames_default()("bcs-AppActivity",{"bcs-is-pending":isPending||error}),"data-resin-target":"loaded","data-resin-feature":"appActivityCard".concat(templateId)},react.createElement(media_Media.Figure,null,react.createElement("img",{className:"bcs-AppActivity-icon",alt:intl.formatMessage(app_activity_messages.appActivityAltIcon,{appActivityName:name}),src:icon_url})),react.createElement(media_Media.Body,{className:"bcs-AppActivity-body"},canDelete&&!isPending&&react.createElement(react_tether_default.a,{attachment:"top right",className:"bcs-AppActivity-confirm",constraints:[{to:"scrollParent",attachment:"together"}],targetAttachment:"bottom right"},react.createElement(media_Media.Menu,{isDisabled:isConfirmingDelete},react.createElement(menu.b,{onClick:this.handleDeleteClick},AppActivity_ref,react.createElement(index_es.b,app_activity_messages.appActivityDeleteMenuItem))),isConfirmingDelete&&react.createElement(common_delete_confirmation_DeleteConfirmation,{isOpen:isConfirmingDelete,message:app_activity_messages.appActivityDeletePrompt,onDeleteCancel:this.handleDeleteCancel,onDeleteConfirm:this.handleDeleteConfirm})),react.createElement("figcaption",{className:"bcs-AppActivity-headline"},name),react.createElement("div",null,react.createElement(activity_timestamp_ActivityTimestamp,{date:createdAtTimestamp})),this.parseActivity().map(mapActivityNodes)))}}]),AppActivity}(react.PureComponent);AppActivity_AppActivity.displayName="AppActivity",AppActivity_defineProperty(AppActivity_AppActivity,"defaultProps",{onDelete:noop_default.a,permissions:{}}),AppActivity_AppActivity.__docgenInfo={description:"",methods:[{name:"handleDeleteCancel",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"handleDeleteClick",docblock:null,modifiers:[],params:[],returns:null},{name:"handleDeleteConfirm",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"parseActivity",docblock:null,modifiers:[],params:[],returns:{type:{name:"Array",elements:[{name:"HTMLLinkElement"}],raw:"Array<HTMLLinkElement>"}}}],displayName:"AppActivity",props:{onDelete:{defaultValue:{value:"noop",computed:!0},required:!1,flowType:{name:"signature",type:"function",raw:"({ id: string, permissions?: {} }) => void",signature:{arguments:[{name:"",type:{name:"signature",type:"object",raw:"{ id: string, permissions?: {} }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"permissions",value:{name:"signature",type:"object",raw:"{}",signature:{properties:[]},required:!1}}]}}}],return:{name:"void"}}},description:""},permissions:{defaultValue:{value:"{}",computed:!1},required:!1,flowType:{name:"BoxItemPermission"},description:""},activity_template:{required:!0,flowType:{name:"ActivityTemplateItem"},description:""},app:{required:!0,flowType:{name:"AppItem"},description:""},created_at:{required:!0,flowType:{name:"string"},description:""},created_by:{required:!0,flowType:{name:"User"},description:""},currentUser:{required:!1,flowType:{name:"User"},description:""},error:{required:!1,flowType:{name:"ActionItemError"},description:""},id:{required:!0,flowType:{name:"string"},description:""},intl:{required:!0,flowType:{name:"IntlShape"},description:""},isPending:{required:!1,flowType:{name:"boolean"},description:""},rendered_text:{required:!0,flowType:{name:"string"},description:""}}};var activity_feed_app_activity_AppActivity=Object(index_es.g)(AppActivity_AppActivity);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/app-activity/AppActivity.js"]={name:"AppActivity",docgenInfo:AppActivity_AppActivity.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/app-activity/AppActivity.js"});var AvatarImage=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,url=_ref.url,_onError=_ref.onError;return react_default.a.createElement("img",{alt:"",className:"avatar-image ".concat(className),onError:function onError(event){"function"==typeof _onError&&_onError(event)},src:url})};AvatarImage.displayName="AvatarImage",AvatarImage.__docgenInfo={description:"",methods:[],displayName:"AvatarImage",props:{className:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},onError:{required:!1,flowType:{name:"Function"},description:""},url:{required:!0,flowType:{name:"string"},description:""}}};var avatar_AvatarImage=AvatarImage;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/avatar/AvatarImage.js"]={name:"AvatarImage",docgenInfo:AvatarImage.__docgenInfo,path:"src/components/avatar/AvatarImage.js"});__webpack_require__(210);var AvatarInitials=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,id=_ref.id,name=_ref.name,backgroundColorIndex=(parseInt(id,10)||0)%variables.avatarColors.length;return react_default.a.createElement("span",{className:"avatar-initials ".concat(className),"data-bg-idx":backgroundColorIndex},function(name){return(name.slice(0,1)+name.slice(name.lastIndexOf(" ")+1,name.lastIndexOf(" ")+2)).toUpperCase()}(name))};AvatarInitials.displayName="AvatarInitials",AvatarInitials.__docgenInfo={description:"",methods:[],displayName:"AvatarInitials",props:{className:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},id:{required:!1,flowType:{name:"union",raw:"?string | number",elements:[{name:"string",nullable:!0},{name:"number"}]},description:""},name:{required:!0,flowType:{name:"string"},description:""}}};var avatar_AvatarInitials=AvatarInitials;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/avatar/AvatarInitials.js"]={name:"AvatarInitials",docgenInfo:AvatarInitials.__docgenInfo,path:"src/components/avatar/AvatarInitials.js"});__webpack_require__(53);var uniqueId=__webpack_require__(36),uniqueId_default=__webpack_require__.n(uniqueId),accessible_svg=__webpack_require__(5);function UnknownUserAvatar_typeof(obj){return(UnknownUserAvatar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function UnknownUserAvatar_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function UnknownUserAvatar_getPrototypeOf(o){return(UnknownUserAvatar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function UnknownUserAvatar_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function UnknownUserAvatar_setPrototypeOf(o,p){return(UnknownUserAvatar_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function UnknownUserAvatar_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ICON_CLASS="unknown-user-avatar",UnknownUserAvatar_ref=react.createElement("path",{className:"fill-color",d:"M5.5 25.1C6.7 21 10 18 14 18s7.3 3 8.5 7.1a14 14 0 0 1-17 0zM14 16a5 5 0 1 1 0-10 5 5 0 0 1 0 10z",fill:"#C3C3C3"}),UnknownUserAvatar_UnknownUserAvatar=function(_React$PureComponent){function UnknownUserAvatar(){var _getPrototypeOf2,_this;!function UnknownUserAvatar_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UnknownUserAvatar);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function UnknownUserAvatar_possibleConstructorReturn(self,call){return!call||"object"!==UnknownUserAvatar_typeof(call)&&"function"!=typeof call?UnknownUserAvatar_assertThisInitialized(self):call}(this,(_getPrototypeOf2=UnknownUserAvatar_getPrototypeOf(UnknownUserAvatar)).call.apply(_getPrototypeOf2,[this].concat(args))),UnknownUserAvatar_defineProperty(UnknownUserAvatar_assertThisInitialized(_this),"idPrefix","".concat(uniqueId_default()(ICON_CLASS),"-")),_this}return function UnknownUserAvatar_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&UnknownUserAvatar_setPrototypeOf(subClass,superClass)}(UnknownUserAvatar,_React$PureComponent),function UnknownUserAvatar_createClass(Constructor,protoProps,staticProps){return protoProps&&UnknownUserAvatar_defineProperties(Constructor.prototype,protoProps),staticProps&&UnknownUserAvatar_defineProperties(Constructor,staticProps),Constructor}(UnknownUserAvatar,[{key:"render",value:function render(){var _this$props=this.props,className=_this$props.className,height=_this$props.height,title=_this$props.title,width=_this$props.width;return react.createElement(accessible_svg.a,{className:"".concat(ICON_CLASS," ").concat(className),height:height,title:title,viewBox:"0 0 28 28",width:width},react.createElement("defs",null,react.createElement("circle",{cx:"14",cy:"14",id:"".concat(this.idPrefix,"a"),r:"14"})),react.createElement("g",{fill:"none",fillRule:"evenodd"},react.createElement("use",{className:"background-fill-color",fill:"#EDEDED",xlinkHref:"#".concat(this.idPrefix,"a")}),UnknownUserAvatar_ref))}}]),UnknownUserAvatar}(react.PureComponent);UnknownUserAvatar_UnknownUserAvatar.displayName="UnknownUserAvatar",UnknownUserAvatar_defineProperty(UnknownUserAvatar_UnknownUserAvatar,"defaultProps",{className:"",height:28,width:28}),UnknownUserAvatar_UnknownUserAvatar.__docgenInfo={description:"",methods:[],displayName:"UnknownUserAvatar",props:{className:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},height:{defaultValue:{value:"28",computed:!1},required:!1,flowType:{name:"number"},description:""},width:{defaultValue:{value:"28",computed:!1},required:!1,flowType:{name:"number"},description:""},title:{required:!1,flowType:{name:"union",raw:"string | React.Element<any>",elements:[{name:"string"},{name:"ReactElement",raw:"React.Element<any>",elements:[{name:"any"}]}]},description:"A text-only string describing the icon if it's not purely decorative for accessibility"}}};var avatars_UnknownUserAvatar=UnknownUserAvatar_UnknownUserAvatar;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/avatars/UnknownUserAvatar.js"]={name:"UnknownUserAvatar",docgenInfo:UnknownUserAvatar_UnknownUserAvatar.__docgenInfo,path:"src/icons/avatars/UnknownUserAvatar.js"});__webpack_require__(3316);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var SIZES={large:!0},Avatar_ref3=react.createElement(avatars_UnknownUserAvatar,{className:"avatar-icon"});function Avatar_Avatar(_ref){var obj,key,value,avatar,avatarUrl=_ref.avatarUrl,className=_ref.className,name=_ref.name,id=_ref.id,_ref$size=_ref.size,size=void 0===_ref$size?"":_ref$size,_React$useState2=_slicedToArray(react.useState(!1),2),hasImageErrored=_React$useState2[0],setHasImageErrored=_React$useState2[1],_React$useState4=_slicedToArray(react.useState(null),2),prevAvatarUrl=_React$useState4[0],setPrevAvatarUrl=_React$useState4[1],classes=classnames_default()(["avatar",className,(obj={},key="avatar--".concat(size),value=SIZES[size],key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj)]);return avatarUrl!==prevAvatarUrl&&(setHasImageErrored(!1),setPrevAvatarUrl(avatarUrl)),avatar=avatarUrl&&!hasImageErrored?react.createElement(avatar_AvatarImage,{onError:function onError(){setHasImageErrored(!0)},url:avatarUrl}):name?react.createElement(avatar_AvatarInitials,{id:id,name:name}):Avatar_ref3,react.createElement("span",{className:classes,role:"presentation"},avatar)}Avatar_Avatar.displayName="Avatar",Avatar_Avatar.__docgenInfo={description:"",methods:[],displayName:"Avatar",props:{size:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"union",raw:"$Keys<typeof SIZES>",elements:[{name:"literal",value:"large"}]},description:""},avatarUrl:{required:!1,flowType:{name:"string",nullable:!0},description:'Url to avatar image.  If passed in, component will render the avatar image instead of the initials\n\nRequired if "name" is not specified.'},className:{required:!1,flowType:{name:"string"},description:"classname to add to the container element."},id:{required:!1,flowType:{name:"union",raw:"?string | number",elements:[{name:"string",nullable:!0},{name:"number"}]},description:"Users id"},name:{required:!1,flowType:{name:"string",nullable:!0},description:'Users full name.\n\nRequired if "avatarUrl" is not specified.'}}};var components_avatar_Avatar=Avatar_Avatar;function Avatar_typeof(obj){return(Avatar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Avatar_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function Avatar_getPrototypeOf(o){return(Avatar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function Avatar_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Avatar_setPrototypeOf(o,p){return(Avatar_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function activity_feed_Avatar_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/avatar/Avatar.js"]={name:"Avatar",docgenInfo:Avatar_Avatar.__docgenInfo,path:"src/components/avatar/Avatar.js"});var activity_feed_Avatar_Avatar=function(_React$PureComponent){function Avatar(){var _getPrototypeOf2,_this;!function Avatar_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Avatar);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function Avatar_possibleConstructorReturn(self,call){return!call||"object"!==Avatar_typeof(call)&&"function"!=typeof call?Avatar_assertThisInitialized(self):call}(this,(_getPrototypeOf2=Avatar_getPrototypeOf(Avatar)).call.apply(_getPrototypeOf2,[this].concat(args))),activity_feed_Avatar_defineProperty(Avatar_assertThisInitialized(_this),"state",{avatarUrl:null}),activity_feed_Avatar_defineProperty(Avatar_assertThisInitialized(_this),"getAvatarUrlHandler",(function(avatarUrl){_this.setState({avatarUrl:avatarUrl})})),_this}return function Avatar_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Avatar_setPrototypeOf(subClass,superClass)}(Avatar,_React$PureComponent),function Avatar_createClass(Constructor,protoProps,staticProps){return protoProps&&Avatar_defineProperties(Constructor.prototype,protoProps),staticProps&&Avatar_defineProperties(Constructor,staticProps),Constructor}(Avatar,[{key:"getAvatarUrl",value:function(){var _this$props=this.props,_this$props$user=_this$props.user,user=void 0===_this$props$user?{}:_this$props$user,getAvatarUrl=_this$props.getAvatarUrl,_user$avatar_url=user.avatar_url,avatar_url=void 0===_user$avatar_url?null:_user$avatar_url,id=user.id;return(id&&getAvatarUrl?getAvatarUrl("".concat(id)):Promise.resolve(avatar_url)).then(this.getAvatarUrlHandler)}},{key:"componentDidMount",value:function componentDidMount(){this.getAvatarUrl()}},{key:"render",value:function render(){var _this$props2=this.props,user=_this$props2.user,className=_this$props2.className,avatarUrl=this.state.avatarUrl,id=user.id,name=user.name;return react.createElement(components_avatar_Avatar,{avatarUrl:avatarUrl,className:className,id:id,name:name})}}]),Avatar}(react.PureComponent);activity_feed_Avatar_Avatar.displayName="Avatar",activity_feed_Avatar_Avatar.__docgenInfo={description:"",methods:[{name:"getAvatarUrlHandler",docblock:"Success handler for getting avatar url\n\n@param {string} avatarUrl the user avatar url",modifiers:[],params:[{name:"avatarUrl",description:"the user avatar url",type:{name:"string",nullable:!0},optional:!1}],returns:null,description:"Success handler for getting avatar url"},{name:"getAvatarUrl",docblock:"Gets the avatar URL for the user from the getAvatarUrl prop\n\n@return {Promise<?string>} Promise which resolve with the avatar url string",modifiers:[],params:[],returns:{description:"Promise which resolve with the avatar url string",type:{name:"Promise",elements:[{name:"string",nullable:!0}],raw:"Promise<?string>"}},description:"Gets the avatar URL for the user from the getAvatarUrl prop"}],displayName:"Avatar",props:{className:{required:!1,flowType:{name:"string"},description:""},getAvatarUrl:{required:!1,flowType:{name:"GetAvatarUrlCallback"},description:""},user:{required:!0,flowType:{name:"User"},description:""}}};var activity_feed_Avatar=activity_feed_Avatar_Avatar;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/Avatar.js"]={name:"Avatar",docgenInfo:activity_feed_Avatar_Avatar.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/Avatar.js"});var IconPencil=__webpack_require__(1130);__webpack_require__(3317);function UserLink_typeof(obj){return(UserLink_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function UserLink_extends(){return(UserLink_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function UserLink_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function UserLink_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function UserLink_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function UserLink_getPrototypeOf(o){return(UserLink_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function UserLink_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function UserLink_setPrototypeOf(o,p){return(UserLink_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function UserLink_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var UserLink_UserLink=function(_React$PureComponent){function UserLink(){var _getPrototypeOf2,_this;!function UserLink_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UserLink);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function UserLink_possibleConstructorReturn(self,call){return!call||"object"!==UserLink_typeof(call)&&"function"!=typeof call?UserLink_assertThisInitialized(self):call}(this,(_getPrototypeOf2=UserLink_getPrototypeOf(UserLink)).call.apply(_getPrototypeOf2,[this].concat(args))),UserLink_defineProperty(UserLink_assertThisInitialized(_this),"state",{}),UserLink_defineProperty(UserLink_assertThisInitialized(_this),"getProfileUrlHandler",(function(profileUrl){_this.setState({profileUrl:profileUrl})})),_this}return function UserLink_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&UserLink_setPrototypeOf(subClass,superClass)}(UserLink,_React$PureComponent),function UserLink_createClass(Constructor,protoProps,staticProps){return protoProps&&UserLink_defineProperties(Constructor.prototype,protoProps),staticProps&&UserLink_defineProperties(Constructor,staticProps),Constructor}(UserLink,[{key:"getUserProfileUrl",value:function(){var _this$props=this.props,id=_this$props.id,getUserProfileUrl=_this$props.getUserProfileUrl;return getUserProfileUrl?getUserProfileUrl(id).then(this.getProfileUrlHandler):Promise.resolve()}},{key:"componentDidMount",value:function componentDidMount(){this.getUserProfileUrl()}},{key:"render",value:function render(){var _this$props2=this.props,name=_this$props2.name,className=(_this$props2.getUserProfileUrl,_this$props2.className),rest=UserLink_objectWithoutProperties(_this$props2,["name","getUserProfileUrl","className"]),profileUrl=this.state.profileUrl;return profileUrl?react.createElement(Link.a,UserLink_extends({className:classnames_default()("bcs-UserLink",className)},rest,{href:profileUrl}),name):react.createElement("span",rest,name)}}]),UserLink}(react.PureComponent);UserLink_UserLink.displayName="UserLink",UserLink_UserLink.__docgenInfo={description:"",methods:[{name:"getProfileUrlHandler",docblock:"Success handler for getting profile url\n\n@param {string} profileUrl the user profile url",modifiers:[],params:[{name:"profileUrl",description:"the user profile url",type:{name:"string"},optional:!0}],returns:null,description:"Success handler for getting profile url"},{name:"getUserProfileUrl",docblock:"Gets the profile URL for the user from the getUserProfileUrl prop\n\n@return {Promise} a promise which resolves with the profileUrl string",modifiers:[],params:[],returns:{description:"a promise which resolves with the profileUrl string",type:{name:"Promise"}},description:"Gets the profile URL for the user from the getUserProfileUrl prop"}],displayName:"UserLink",props:{className:{required:!1,flowType:{name:"string"},description:""},getUserProfileUrl:{required:!1,flowType:{name:"GetProfileUrlCallback"},description:""},id:{required:!0,flowType:{name:"string"},description:""},name:{required:!0,flowType:{name:"string"},description:""}}};var common_user_link_UserLink=UserLink_UserLink;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/common/user-link/UserLink.js"]={name:"UserLink",docgenInfo:UserLink_UserLink.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/common/user-link/UserLink.js"});var inline_error=__webpack_require__(3210);__webpack_require__(3318);function ActivityError_extends(){return(ActivityError_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function ActivityError_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function ActivityError_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var ActivityError_ActivityError=function(_ref){var action=_ref.action,message=_ref.message,title=_ref.title,className=_ref.className,rest=ActivityError_objectWithoutProperties(_ref,["action","message","title","className"]);return react.createElement(inline_error.a,{className:classnames_default()("bcs-ActivityError",className),title:react.createElement(index_es.b,ActivityError_extends({},title,rest))},react.createElement("div",null,react.createElement(index_es.b,message)),action?react.createElement(plain_button.a,{className:"bcs-ActivityError-action lnk",onClick:action.onAction,type:"button"},action.text):null)};ActivityError_ActivityError.displayName="ActivityError",ActivityError_ActivityError.__docgenInfo={description:"",methods:[],displayName:"ActivityError",props:{action:{required:!1,flowType:{name:"signature",type:"object",raw:"{\n    onAction: Function,\n    text: string,\n}",signature:{properties:[{key:"onAction",value:{name:"Function",required:!0}},{key:"text",value:{name:"string",required:!0}}]}},description:""},className:{required:!1,flowType:{name:"string"},description:""},message:{required:!0,flowType:{name:"MessageDescriptor"},description:""},title:{required:!0,flowType:{name:"MessageDescriptor"},description:""}}};var activity_error_ActivityError=ActivityError_ActivityError;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/common/activity-error/ActivityError.js"]={name:"ActivityError",docgenInfo:ActivityError_ActivityError.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/common/activity-error/ActivityError.js"});var loading_indicator=__webpack_require__(343);__webpack_require__(354),__webpack_require__(421),__webpack_require__(422);function formatTaggedMessage_slicedToArray(arr,i){return function formatTaggedMessage_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function formatTaggedMessage_iterableToArrayLimit(arr,i){if(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function formatTaggedMessage_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var splitRegex=/((?:[@＠﹫]\[[0-9]+:[^\]]+])|(?:\b(?:(?:ht|f)tps?:\/\/)[\w\._\-]+(?::\d+)?(?:\/[\w\-_\.~\+\/#\?&%=:\[\]@!$'\(\)\*;,]*)?))/gim,utils_formatTaggedMessage=function(tagged_message,itemID,shouldReturnString,getUserProfileUrl){var contentItems=tagged_message.split(splitRegex).map((function(text,contentIndex){var contentKey="".concat(contentIndex,"-").concat(itemID),mentionMatch=text.match(/([@＠﹫])\[([0-9]+):([^\]]+)]/i);if(mentionMatch){var _mentionMatch=formatTaggedMessage_slicedToArray(mentionMatch,4),trigger=_mentionMatch[1],id=_mentionMatch[2],name=_mentionMatch[3];return shouldReturnString?"".concat(trigger).concat(name):react.createElement(common_user_link_UserLink,{key:contentKey,className:"bcs-comment-mention","data-resin-target":interactionTargets.a.MENTION,getUserProfileUrl:getUserProfileUrl,id:id,name:"".concat(trigger).concat(name)})}if(!shouldReturnString){var urlMatch=text.match(/((?:(?:ht|f)tps?:\/\/)[\w\._\-]+(?::\d+)?(?:\/[\w\-_\.~\+\/#\?&%=:\[\]@!$'\(\)\*;,]*)?)/i);if(urlMatch){var url=formatTaggedMessage_slicedToArray(urlMatch,2)[1];return react.createElement(Link.a,{key:contentKey,href:url},url)}}return text}));return shouldReturnString?contentItems.join(""):contentItems},activity_message_messages=Object(index_es.f)({activityMessageShowOriginal:{id:"be.contentSidebar.activityFeed.commmon.showOriginalMessage",defaultMessage:"Show Original"},activityMessageTranslate:{id:"be.contentSidebar.activityFeed.common.translateMessage",defaultMessage:"Translate"}}),ShowOriginalButton=function(_ref){var handleShowOriginal=_ref.handleShowOriginal;return react.createElement(plain_button.a,{className:"bcs-ActivityMessage-translate",onClick:handleShowOriginal},react.createElement(index_es.b,activity_message_messages.activityMessageShowOriginal))};ShowOriginalButton.displayName="ShowOriginalButton",ShowOriginalButton.__docgenInfo={description:"",methods:[],displayName:"ShowOriginalButton",props:{handleShowOriginal:{required:!0,flowType:{name:"Function"},description:""}}};var activity_message_ShowOriginalButton=ShowOriginalButton;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/common/activity-message/ShowOriginalButton.js"]={name:"ShowOriginalButton",docgenInfo:ShowOriginalButton.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/common/activity-message/ShowOriginalButton.js"});var TranslateButton=function(_ref){var handleTranslate=_ref.handleTranslate;return react.createElement(plain_button.a,{className:"bcs-ActivityMessage-translate",onClick:handleTranslate},react.createElement(index_es.b,activity_message_messages.activityMessageTranslate))};TranslateButton.displayName="TranslateButton",TranslateButton.__docgenInfo={description:"",methods:[],displayName:"TranslateButton",props:{handleTranslate:{required:!0,flowType:{name:"Function"},description:""}}};var activity_message_TranslateButton=TranslateButton;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/common/activity-message/TranslateButton.js"]={name:"TranslateButton",docgenInfo:TranslateButton.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/common/activity-message/TranslateButton.js"});__webpack_require__(3319);function ActivityMessage_typeof(obj){return(ActivityMessage_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ActivityMessage_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function ActivityMessage_getPrototypeOf(o){return(ActivityMessage_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function ActivityMessage_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function ActivityMessage_setPrototypeOf(o,p){return(ActivityMessage_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function ActivityMessage_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ActivityMessage_ref=react.createElement("div",{className:"bcs-ActivityMessageLoading"},react.createElement(loading_indicator.b,{size:"small"})),ActivityMessage_ActivityMessage=function(_React$Component){function ActivityMessage(){var _getPrototypeOf2,_this;!function ActivityMessage_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ActivityMessage);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function ActivityMessage_possibleConstructorReturn(self,call){return!call||"object"!==ActivityMessage_typeof(call)&&"function"!=typeof call?ActivityMessage_assertThisInitialized(self):call}(this,(_getPrototypeOf2=ActivityMessage_getPrototypeOf(ActivityMessage)).call.apply(_getPrototypeOf2,[this].concat(args))),ActivityMessage_defineProperty(ActivityMessage_assertThisInitialized(_this),"state",{isLoading:!1,isTranslation:!1}),ActivityMessage_defineProperty(ActivityMessage_assertThisInitialized(_this),"handleTranslate",(function(event){var _this$props=_this.props,id=_this$props.id,tagged_message=_this$props.tagged_message,_this$props$onTransla=_this$props.onTranslate,onTranslate=void 0===_this$props$onTransla?noop_default.a:_this$props$onTransla;_this$props.translatedTaggedMessage||(_this.setState({isLoading:!0}),onTranslate({id:id,tagged_message:tagged_message})),_this.setState({isTranslation:!0}),event.preventDefault()})),ActivityMessage_defineProperty(ActivityMessage_assertThisInitialized(_this),"handleShowOriginal",(function(event){_this.setState({isTranslation:!1}),event.preventDefault()})),_this}return function ActivityMessage_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&ActivityMessage_setPrototypeOf(subClass,superClass)}(ActivityMessage,_React$Component),function ActivityMessage_createClass(Constructor,protoProps,staticProps){return protoProps&&ActivityMessage_defineProperties(Constructor.prototype,protoProps),staticProps&&ActivityMessage_defineProperties(Constructor,staticProps),Constructor}(ActivityMessage,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _this$props2=this.props,translatedTaggedMessage=_this$props2.translatedTaggedMessage,translationFailed=_this$props2.translationFailed,prevTaggedMessage=prevProps.translatedTaggedMessage,prevTranslationFailed=prevProps.translationFailed;prevTaggedMessage===translatedTaggedMessage||prevTranslationFailed===translationFailed||(translatedTaggedMessage||translationFailed)&&this.setState({isLoading:!1})}},{key:"getButton",value:function getButton(isTranslation){return isTranslation?react.createElement(activity_message_ShowOriginalButton,{handleShowOriginal:this.handleShowOriginal}):react.createElement(activity_message_TranslateButton,{handleTranslate:this.handleTranslate})}},{key:"render",value:function render(){var _this$props3=this.props,id=_this$props3.id,tagged_message=_this$props3.tagged_message,translatedTaggedMessage=_this$props3.translatedTaggedMessage,translationEnabled=_this$props3.translationEnabled,getUserProfileUrl=_this$props3.getUserProfileUrl,_this$state=this.state,isLoading=_this$state.isLoading,isTranslation=_this$state.isTranslation,commentToDisplay=translationEnabled&&isTranslation&&translatedTaggedMessage?translatedTaggedMessage:tagged_message;return isLoading?ActivityMessage_ref:react.createElement("div",{className:"bcs-ActivityMessage"},utils_formatTaggedMessage(commentToDisplay,id,!1,getUserProfileUrl),translationEnabled?this.getButton(isTranslation):null)}}]),ActivityMessage}(react.Component);ActivityMessage_ActivityMessage.displayName="ActivityMessage",ActivityMessage_defineProperty(ActivityMessage_ActivityMessage,"defaultProps",{translationEnabled:!1}),ActivityMessage_ActivityMessage.__docgenInfo={description:"",methods:[{name:"getButton",docblock:null,modifiers:[],params:[{name:"isTranslation",optional:!0,type:{name:"boolean"}}],returns:{type:{name:"ReactNode",raw:"React.Node"}}},{name:"handleTranslate",docblock:null,modifiers:[],params:[{name:"event",type:{name:"SyntheticMouseEvent",elements:[],raw:"SyntheticMouseEvent<>",alias:"SyntheticMouseEvent"}}],returns:{type:{name:"void"}}},{name:"handleShowOriginal",docblock:null,modifiers:[],params:[{name:"event",type:{name:"SyntheticMouseEvent",elements:[],raw:"SyntheticMouseEvent<>",alias:"SyntheticMouseEvent"}}],returns:{type:{name:"void"}}}],displayName:"ActivityMessage",props:{translationEnabled:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:""},getUserProfileUrl:{required:!1,flowType:{name:"GetProfileUrlCallback"},description:""},id:{required:!0,flowType:{name:"string"},description:""},onTranslate:{required:!1,flowType:{name:"Function"},description:""},tagged_message:{required:!0,flowType:{name:"string"},description:""},translatedTaggedMessage:{required:!1,flowType:{name:"string"},description:""},translationFailed:{required:!1,flowType:{name:"boolean",nullable:!0},description:""}}};var common_activity_message_ActivityMessage=ActivityMessage_ActivityMessage;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/common/activity-message/ActivityMessage.js"]={name:"ActivityMessage",docgenInfo:ActivityMessage_ActivityMessage.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/common/activity-message/ActivityMessage.js"});__webpack_require__(25);var Button=__webpack_require__(52),PrimaryButton=__webpack_require__(159),comment_form_messages=Object(index_es.f)({commentCancel:{id:"be.contentSidebar.activityFeed.commentForm.commentCancel",defaultMessage:"Cancel"},commentPost:{id:"be.contentSidebar.activityFeed.commentForm.commentPost",defaultMessage:"Post"},commentWrite:{id:"be.contentSidebar.activityFeed.commentForm.commentWrite",defaultMessage:"Write a comment"},approvalAddAssignee:{id:"be.contentSidebar.activityFeed.commentForm.approvalAddAssignee",defaultMessage:"Add an assignee"},approvalAddTask:{id:"be.contentSidebar.activityFeed.commentForm.approvalAddTask",defaultMessage:"Add Task"},approvalAddTaskTooltip:{id:"be.contentSidebar.activityFeed.commentForm.approvalAddTaskTooltip",defaultMessage:"Assigning a task to someone will send them a notification with the message in the comment box and allow them to approve or deny."},approvalAssignees:{id:"be.contentSidebar.activityFeed.commentForm.approvalAssignees",defaultMessage:"Assignees"},approvalDueDate:{id:"be.contentSidebar.activityFeed.commentForm.approvalDueDate",defaultMessage:"Due Date"},approvalSelectDate:{id:"be.contentSidebar.activityFeed.commentForm.approvalSelectDate",defaultMessage:"Select a date"},atMentionTip:{id:"be.contentSidebar.activityFeed.commentForm.atMentionTip",defaultMessage:"@mention users to notify them."}}),CommentInputControls=function(_ref){var onCancel=_ref.onCancel;return react.createElement("div",{className:"bcs-CommentFormControls"},react.createElement(Button.a,{"data-resin-target":interactionTargets.a.APPROVAL_FORM_CANCEL,onClick:onCancel,type:"button"},react.createElement(index_es.b,comment_form_messages.commentCancel)),react.createElement(PrimaryButton.a,{"data-resin-target":interactionTargets.a.APPROVAL_FORM_POST},react.createElement(index_es.b,comment_form_messages.commentPost)))};CommentInputControls.displayName="CommentInputControls",CommentInputControls.__docgenInfo={description:"",methods:[],displayName:"CommentInputControls",props:{onCancel:{required:!0,flowType:{name:"Function"},description:""}}};var CommentFormControls=CommentInputControls;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/comment-form/CommentFormControls.js"]={name:"CommentInputControls",docgenInfo:CommentInputControls.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/comment-form/CommentFormControls.js"});var Draft=__webpack_require__(3187),datalist_item=(__webpack_require__(24),__webpack_require__(33),__webpack_require__(34),__webpack_require__(3205),__webpack_require__(1122)),components_label=(__webpack_require__(3408),__webpack_require__(408));__webpack_require__(3410);function DraftJSEditor_typeof(obj){return(DraftJSEditor_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function DraftJSEditor_extends(){return(DraftJSEditor_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function DraftJSEditor_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function DraftJSEditor_getPrototypeOf(o){return(DraftJSEditor_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function DraftJSEditor_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function DraftJSEditor_setPrototypeOf(o,p){return(DraftJSEditor_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function DraftJSEditor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var DraftJSEditor_DraftJSEditor=function(_React$Component){function DraftJSEditor(){var _getPrototypeOf2,_this;!function DraftJSEditor_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DraftJSEditor);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function DraftJSEditor_possibleConstructorReturn(self,call){return!call||"object"!==DraftJSEditor_typeof(call)&&"function"!=typeof call?DraftJSEditor_assertThisInitialized(self):call}(this,(_getPrototypeOf2=DraftJSEditor_getPrototypeOf(DraftJSEditor)).call.apply(_getPrototypeOf2,[this].concat(args))),DraftJSEditor_defineProperty(DraftJSEditor_assertThisInitialized(_this),"handleChange",(function(editorState){(0,_this.props.onChange)(editorState)})),DraftJSEditor_defineProperty(DraftJSEditor_assertThisInitialized(_this),"handleBlur",(function(editorState){(0,_this.props.onBlur)(editorState)})),DraftJSEditor_defineProperty(DraftJSEditor_assertThisInitialized(_this),"handleReturn",(function(event){var _this$props=_this.props,onReturn=_this$props.onReturn,inputProps=_this$props.inputProps;return onReturn&&!inputProps["aria-activedescendant"]&&onReturn(event)?"handled":"not-handled"})),_this}return function DraftJSEditor_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&DraftJSEditor_setPrototypeOf(subClass,superClass)}(DraftJSEditor,_React$Component),function DraftJSEditor_createClass(Constructor,protoProps,staticProps){return protoProps&&DraftJSEditor_defineProperties(Constructor.prototype,protoProps),staticProps&&DraftJSEditor_defineProperties(Constructor,staticProps),Constructor}(DraftJSEditor,[{key:"render",value:function render(){var _this$props2=this.props,editorState=_this$props2.editorState,error=_this$props2.error,hideLabel=_this$props2.hideLabel,inputProps=_this$props2.inputProps,isDisabled=_this$props2.isDisabled,isRequired=_this$props2.isRequired,label=_this$props2.label,onFocus=_this$props2.onFocus,placeholder=_this$props2.placeholder,handleBlur=this.handleBlur,handleChange=this.handleChange,classes=classnames_default()({"draft-js-editor":!0,"is-disabled":isDisabled,"show-error":!!error}),a11yProps={};return inputProps.role&&(a11yProps={ariaActiveDescendantID:inputProps["aria-activedescendant"],ariaAutoComplete:inputProps["aria-autocomplete"],ariaExpanded:inputProps["aria-expanded"],ariaOwneeID:inputProps["aria-owns"],role:inputProps.role}),react.createElement("div",{className:classes},react.createElement(components_label.a,{hideLabel:hideLabel,showOptionalText:!isRequired,text:label},react.createElement(components_tooltip.a,{isShown:!!error,position:"bottom-left",text:error?error.message:"",theme:"error"},react.createElement("div",null,react.createElement(Draft.Editor,DraftJSEditor_extends({},a11yProps,{editorState:editorState,handleReturn:this.handleReturn,onBlur:handleBlur,onChange:handleChange,onFocus:onFocus,placeholder:placeholder,readOnly:isDisabled,stripPastedStyles:!0}))))))}}]),DraftJSEditor}(react.Component);DraftJSEditor_DraftJSEditor.displayName="DraftJSEditor",DraftJSEditor_defineProperty(DraftJSEditor_DraftJSEditor,"defaultProps",{inputProps:{},isRequired:!1,isFocused:!1}),DraftJSEditor_DraftJSEditor.__docgenInfo={description:"",methods:[{name:"handleChange",docblock:"Calls onChange handler passed in\n@param {EditorState} editorState The new/updated editor state\n@returns {void}",modifiers:[],params:[{name:"editorState",description:"The new/updated editor state",type:{name:"EditorState",alias:"EditorState"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Calls onChange handler passed in"},{name:"handleBlur",docblock:null,modifiers:[],params:[{name:"editorState",type:{name:"EditorState",alias:"EditorState"}}],returns:null},{name:"handleReturn",docblock:"Event handler which being passed to 'handleReturn' prop of DraftJSEditor\nThis gives consumer the ability to handle return key event before DraftJSEditor handles it.\n@param {SyntheticKeyboardEvent} event\n@returns {string}",modifiers:[],params:[{name:"event",description:null,type:{name:"SyntheticKeyboardEvent",elements:[],raw:"SyntheticKeyboardEvent<>",alias:"SyntheticKeyboardEvent"},optional:!1}],returns:{description:null,type:{name:"string"}},description:"Event handler which being passed to 'handleReturn' prop of DraftJSEditor\nThis gives consumer the ability to handle return key event before DraftJSEditor handles it."}],displayName:"DraftJSEditor",props:{inputProps:{defaultValue:{value:"{}",computed:!1},required:!1,flowType:{name:"Object"},description:""},isRequired:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:""},isFocused:{defaultValue:{value:"false",computed:!1},required:!1},editorState:{required:!0,flowType:{name:"EditorState"},description:""},error:{required:!1,flowType:{name:"Object",nullable:!0},description:""},hideLabel:{required:!1,flowType:{name:"boolean"},description:""},isDisabled:{required:!1,flowType:{name:"boolean"},description:""},label:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:""},onBlur:{required:!0,flowType:{name:"Function"},description:""},onChange:{required:!0,flowType:{name:"Function"},description:""},onFocus:{required:!0,flowType:{name:"Function"},description:""},onReturn:{required:!1,flowType:{name:"Function"},description:""},placeholder:{required:!1,flowType:{name:"string"},description:""}}};var components_draft_js_editor_DraftJSEditor=DraftJSEditor_DraftJSEditor;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/draft-js-editor/DraftJSEditor.js"]={name:"DraftJSEditor",docgenInfo:DraftJSEditor_DraftJSEditor.__docgenInfo,path:"src/components/draft-js-editor/DraftJSEditor.js"});var selector_dropdown=__webpack_require__(1133),draft_js_mention_selector_messages=Object(index_es.f)({startMention:{id:"boxui.draftjs.mentionSelector.startMention",defaultMessage:"Mention someone to notify them"}});__webpack_require__(3411);function DraftJSMentionSelectorCore_typeof(obj){return(DraftJSMentionSelectorCore_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function DraftJSMentionSelectorCore_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function DraftJSMentionSelectorCore_getPrototypeOf(o){return(DraftJSMentionSelectorCore_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function DraftJSMentionSelectorCore_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function DraftJSMentionSelectorCore_setPrototypeOf(o,p){return(DraftJSMentionSelectorCore_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function DraftJSMentionSelectorCore_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function DraftJSMentionSelectorCore_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function DraftJSMentionSelectorCore_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var DefaultSelectorRow=function(_ref){var _ref$item=_ref.item,item=void 0===_ref$item?{}:_ref$item,rest=DraftJSMentionSelectorCore_objectWithoutProperties(_ref,["item"]);return react.createElement(datalist_item.a,rest,item.name," ",react.createElement("span",{className:"dropdown-secondary-text"},item.email))};DefaultSelectorRow.displayName="DefaultSelectorRow";var DefaultStartMentionMessage=function(){return react.createElement(index_es.b,draft_js_mention_selector_messages.startMention)};DefaultStartMentionMessage.displayName="DefaultStartMentionMessage";var MentionStartState=function(_ref2){var message=_ref2.message;return react.createElement("div",{className:"mention-start-state"},message)};MentionStartState.displayName="MentionStartState";var DraftJSMentionSelectorCore_DraftJSMentionSelector=function(_React$Component){function DraftJSMentionSelector(props){var _this;(function DraftJSMentionSelectorCore_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,DraftJSMentionSelector),_this=function DraftJSMentionSelectorCore_possibleConstructorReturn(self,call){return!call||"object"!==DraftJSMentionSelectorCore_typeof(call)&&"function"!=typeof call?DraftJSMentionSelectorCore_assertThisInitialized(self):call}(this,DraftJSMentionSelectorCore_getPrototypeOf(DraftJSMentionSelector).call(this,props)),DraftJSMentionSelectorCore_defineProperty(DraftJSMentionSelectorCore_assertThisInitialized(_this),"handleMention",(function(){var onMention=_this.props.onMention,activeMention=_this.state.activeMention;onMention&&onMention(activeMention?activeMention.mentionString:"")})),DraftJSMentionSelectorCore_defineProperty(DraftJSMentionSelectorCore_assertThisInitialized(_this),"handleContactSelected",(function(index){var contacts=_this.props.contacts;_this.addMention(contacts[index]),_this.setState({activeMention:null,isFocused:!0},(function(){_this.handleMention()}))})),DraftJSMentionSelectorCore_defineProperty(DraftJSMentionSelectorCore_assertThisInitialized(_this),"handleBlur",(function(event){var onBlur=_this.props.onBlur;_this.setState({isFocused:!1}),onBlur&&onBlur(event)})),DraftJSMentionSelectorCore_defineProperty(DraftJSMentionSelectorCore_assertThisInitialized(_this),"handleFocus",(function(event){var onFocus=_this.props.onFocus;_this.setState({isFocused:!0}),onFocus&&onFocus(event)})),DraftJSMentionSelectorCore_defineProperty(DraftJSMentionSelectorCore_assertThisInitialized(_this),"handleChange",(function(nextEditorState){var onChange=_this.props.onChange,activeMention=_this.getActiveMentionForEditorState(nextEditorState);_this.setState({activeMention:activeMention},(function(){onChange&&onChange(nextEditorState),activeMention&&activeMention.mentionString&&_this.handleMention()}))})),DraftJSMentionSelectorCore_defineProperty(DraftJSMentionSelectorCore_assertThisInitialized(_this),"shouldDisplayMentionLookup",(function(){var contacts=_this.props.contacts,activeMention=_this.state.activeMention;return!!(activeMention&&activeMention.mentionString&&contacts.length)}));var mentionTriggers=props.mentionTriggers.reduce((function(prev,current){return"".concat(prev,"\\").concat(current)}),"");return _this.state={activeMention:null,isFocused:!1,mentionPattern:new RegExp("([".concat(mentionTriggers,"])([^").concat(mentionTriggers,"]*)$"))},_this}return function DraftJSMentionSelectorCore_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&DraftJSMentionSelectorCore_setPrototypeOf(subClass,superClass)}(DraftJSMentionSelector,_React$Component),function DraftJSMentionSelectorCore_createClass(Constructor,protoProps,staticProps){return protoProps&&DraftJSMentionSelectorCore_defineProperties(Constructor.prototype,protoProps),staticProps&&DraftJSMentionSelectorCore_defineProperties(Constructor,staticProps),Constructor}(DraftJSMentionSelector,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var prevContacts=prevProps.contacts,currentContacts=this.props.contacts;null===this.state.activeMention||currentContacts.length||prevContacts===currentContacts||this.setState({activeMention:null})}},{key:"getActiveMentionForEditorState",value:function getActiveMentionForEditorState(editorState){var mentionPattern=this.state.mentionPattern,contentState=editorState.getCurrentContent(),selectionState=editorState.getSelection(),startKey=selectionState.getStartKey(),activeBlock=contentState.getBlockForKey(startKey),cursorPosition=selectionState.getStartOffset(),result=null;return activeBlock.findEntityRanges((function(character){return null===character.getEntity()}),(function(start,end){if(start<=cursorPosition&&cursorPosition<=end){var mentionMatch=activeBlock.getText().substr(start,cursorPosition-start).match(mentionPattern);mentionMatch&&(result={blockID:startKey,mentionString:mentionMatch[2],mentionTrigger:mentionMatch[1],start:start+mentionMatch.index,end:cursorPosition})}return null})),result}},{key:"addMention",value:function addMention(mention){var _this2=this,activeMention=this.state.activeMention,editorState=this.props.editorState,_ref3=activeMention||{},start=_ref3.start,end=_ref3.end,id=mention.id,name=mention.name,contentState=editorState.getCurrentContent(),preInsertionSelectionState=editorState.getSelection().merge({anchorOffset:start,focusOffset:end}),textToInsert="@".concat(name),entityKey=contentState.createEntity("MENTION","IMMUTABLE",{id:id}).getLastCreatedEntityKey(),contentStateWithLink=Draft.Modifier.replaceText(contentState,preInsertionSelectionState,textToInsert,null,entityKey),spaceOffset=preInsertionSelectionState.getStartOffset()+textToInsert.length,selectionStateForAddingSpace=preInsertionSelectionState.merge({anchorOffset:spaceOffset,focusOffset:spaceOffset}),contentStateWithLinkAndExtraSpace=Draft.Modifier.insertText(contentStateWithLink,selectionStateForAddingSpace," "),editorStateWithLink=Draft.EditorState.push(editorState,contentStateWithLinkAndExtraSpace,"change-block-type");this.setState({activeMention:null},(function(){_this2.handleChange(editorStateWithLink)}))}},{key:"render",value:function render(){var _this$props=this.props,className=_this$props.className,contacts=_this$props.contacts,editorState=_this$props.editorState,error=_this$props.error,hideLabel=_this$props.hideLabel,isDisabled=_this$props.isDisabled,isRequired=_this$props.isRequired,label=_this$props.label,onReturn=_this$props.onReturn,placeholder=_this$props.placeholder,selectorRow=_this$props.selectorRow,startMentionMessage=_this$props.startMentionMessage,onMention=_this$props.onMention,_this$state=this.state,activeMention=_this$state.activeMention,isFocused=_this$state.isFocused,classes=classnames_default()("mention-selector-wrapper",className),showMentionStartState=!(!onMention||!activeMention||activeMention.mentionString||!isFocused);return react.createElement("div",{className:classes},react.createElement(selector_dropdown.a,{onSelect:this.handleContactSelected,selector:react.createElement(components_draft_js_editor_DraftJSEditor,{editorState:editorState,error:error,hideLabel:hideLabel,isDisabled:isDisabled,isFocused:isFocused,isRequired:isRequired,label:label,onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleChange,onReturn:onReturn,placeholder:placeholder})},this.shouldDisplayMentionLookup()?contacts.map((function(contact){return react.cloneElement(selectorRow,function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(Object(source),!0).forEach((function(key){DraftJSMentionSelectorCore_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},selectorRow.props,{},contact,{key:contact.id}))})):[]),showMentionStartState?react.createElement(MentionStartState,{message:startMentionMessage}):null)}}]),DraftJSMentionSelector}(react.Component);DraftJSMentionSelectorCore_DraftJSMentionSelector.displayName="DraftJSMentionSelector",DraftJSMentionSelectorCore_defineProperty(DraftJSMentionSelectorCore_DraftJSMentionSelector,"defaultProps",{className:"",contacts:[],isDisabled:!1,isRequired:!1,mentionTriggers:["@","＠","﹫"],selectorRow:react.createElement(DefaultSelectorRow,null),startMentionMessage:react.createElement(DefaultStartMentionMessage,null)}),DraftJSMentionSelectorCore_DraftJSMentionSelector.__docgenInfo={description:"",methods:[{name:"getActiveMentionForEditorState",docblock:"Extracts the active mention from the editor state\n\n@param {EditorState} editorState\n@returns {object}",modifiers:[],params:[{name:"editorState",description:null,type:{name:"EditorState",alias:"EditorState"},optional:!1}],returns:{description:null,type:{name:"object"}},description:"Extracts the active mention from the editor state"},{name:"handleMention",docblock:"Called on each keypress when a mention is being composed\n@returns {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Called on each keypress when a mention is being composed"},{name:"handleContactSelected",docblock:"Method that gets called when a mention contact is selected\n@param {number} index The selected index\n@returns {void}",modifiers:[],params:[{name:"index",description:"The selected index",type:{name:"number"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Method that gets called when a mention contact is selected"},{name:"handleBlur",docblock:null,modifiers:[],params:[{name:"event",type:{name:"SyntheticEvent",elements:[],raw:"SyntheticEvent<>",alias:"SyntheticEvent"}}],returns:null},{name:"handleFocus",docblock:null,modifiers:[],params:[{name:"event",type:{name:"SyntheticEvent",elements:[],raw:"SyntheticEvent<>",alias:"SyntheticEvent"}}],returns:null},{name:"handleChange",docblock:"Event handler called when DraftJSEditor emits onChange\nChecks current text to see if any mentions were made\n@param {EditorState} editorState The new editor state\n@returns {void}",modifiers:[],params:[{name:"nextEditorState",type:{name:"EditorState",alias:"EditorState"}}],returns:{description:null,type:{name:"void"}},description:"Event handler called when DraftJSEditor emits onChange\nChecks current text to see if any mentions were made"},{name:"addMention",docblock:"Inserts a selected mention into the editor\n@param {object} mention The selected mention to insert",modifiers:[],params:[{name:"mention",description:"The selected mention to insert",type:{name:"Object",alias:"Object"},optional:!1}],returns:null,description:"Inserts a selected mention into the editor"},{name:"shouldDisplayMentionLookup",docblock:"@returns {boolean}",modifiers:[],params:[],returns:{description:null,type:{name:"boolean"}},description:null}],displayName:"DraftJSMentionSelector",props:{className:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},contacts:{defaultValue:{value:"[]",computed:!1},required:!1,flowType:{name:"SelectorItems"},description:""},isDisabled:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:""},isRequired:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:""},mentionTriggers:{defaultValue:{value:"['@', '＠', '﹫']",computed:!1},required:!1,flowType:{name:"Array",elements:[{name:"string"}],raw:"Array<string>"},description:""},selectorRow:{defaultValue:{value:"<DefaultSelectorRow />",computed:!1},required:!1,flowType:{name:"ReactElement",raw:"React.Element<any>",elements:[{name:"any"}]},description:""},startMentionMessage:{defaultValue:{value:"<DefaultStartMentionMessage />",computed:!1},required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:""},editorState:{required:!0,flowType:{name:"EditorState"},description:""},error:{required:!1,flowType:{name:"Object",nullable:!0},description:""},hideLabel:{required:!1,flowType:{name:"boolean"},description:""},label:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:""},onBlur:{required:!1,flowType:{name:"Function"},description:""},onChange:{required:!1,flowType:{name:"Function"},description:""},onFocus:{required:!1,flowType:{name:"Function"},description:""},onMention:{required:!1,flowType:{name:"Function"},description:""},onReturn:{required:!1,flowType:{name:"Function"},description:""},placeholder:{required:!1,flowType:{name:"string"},description:""}}};var DraftJSMentionSelectorCore=DraftJSMentionSelectorCore_DraftJSMentionSelector;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/form-elements/draft-js-mention-selector/DraftJSMentionSelectorCore.js"]={name:"DraftJSMentionSelector",docgenInfo:DraftJSMentionSelectorCore_DraftJSMentionSelector.__docgenInfo,path:"src/components/form-elements/draft-js-mention-selector/DraftJSMentionSelectorCore.js"});var DraftMentionItem=function(_ref){var contentState=_ref.contentState,entityKey=_ref.entityKey,children=_ref.children,id="";return entityKey&&(id=contentState.getEntity(entityKey).getData().id),react.createElement("a",{href:"/profile/".concat(id)},children)};DraftMentionItem.displayName="DraftMentionItem",DraftMentionItem.__docgenInfo={description:"",methods:[],displayName:"DraftMentionItem",props:{children:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:""},contentState:{required:!0,flowType:{name:"ContentState"},description:""},decoratedText:{required:!0,flowType:{name:"string"},description:""},entityKey:{required:!1,flowType:{name:"string"},description:""}}};var draft_js_mention_selector_DraftMentionItem=DraftMentionItem;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/form-elements/draft-js-mention-selector/DraftMentionItem.js"]={name:"DraftMentionItem",docgenInfo:DraftMentionItem.__docgenInfo,path:"src/components/form-elements/draft-js-mention-selector/DraftMentionItem.js"});var prop_types=__webpack_require__(2),prop_types_default=__webpack_require__.n(prop_types);function FormInput_typeof(obj){return(FormInput_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function FormInput_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function FormInput_possibleConstructorReturn(self,call){return!call||"object"!==FormInput_typeof(call)&&"function"!=typeof call?function FormInput_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function FormInput_getPrototypeOf(o){return(FormInput_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function FormInput_setPrototypeOf(o,p){return(FormInput_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function FormInput_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var FormInput_FormInput=function(_Component){function FormInput(){return function FormInput_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FormInput),FormInput_possibleConstructorReturn(this,FormInput_getPrototypeOf(FormInput).apply(this,arguments))}return function FormInput_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&FormInput_setPrototypeOf(subClass,superClass)}(FormInput,_Component),function FormInput_createClass(Constructor,protoProps,staticProps){return protoProps&&FormInput_defineProperties(Constructor.prototype,protoProps),staticProps&&FormInput_defineProperties(Constructor,staticProps),Constructor}(FormInput,[{key:"componentDidMount",value:function componentDidMount(){var _this$props=this.props,name=_this$props.name,onValidityStateUpdate=_this$props.onValidityStateUpdate;this.context.form&&this.context.form.registerInput(name,onValidityStateUpdate)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.context.form&&this.context.form.unregisterInput(this.props.name)}},{key:"render",value:function render(){return react_default.a.createElement("div",null,this.props.children)}}]),FormInput}(react.Component);FormInput_FormInput.displayName="FormInput",FormInput_defineProperty(FormInput_FormInput,"propTypes",{children:prop_types_default.a.node.isRequired,onValidityStateUpdate:prop_types_default.a.func.isRequired,name:prop_types_default.a.string.isRequired}),FormInput_defineProperty(FormInput_FormInput,"contextTypes",{form:prop_types_default.a.shape({registerInput:prop_types_default.a.func.isRequired,unregisterInput:prop_types_default.a.func.isRequired})}),FormInput_FormInput.__docgenInfo={description:"",methods:[],displayName:"FormInput",props:{children:{type:{name:"node"},required:!0,description:""},onValidityStateUpdate:{type:{name:"func"},required:!0,description:"callback called when Form pushed down a new validityState, useful for displaying server validation errors"},name:{type:{name:"string"},required:!0,description:"Input name"}},context:{form:{type:{name:"shape",value:{registerInput:{name:"func",required:!0},unregisterInput:{name:"func",required:!0}}},required:!1}}};var form_FormInput=FormInput_FormInput;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/form-elements/form/FormInput.js"]={name:"FormInput",docgenInfo:FormInput_FormInput.__docgenInfo,path:"src/components/form-elements/form/FormInput.js"});var common_messages=__webpack_require__(1114);function input_messages_extends(){return(input_messages_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function DraftJSMentionSelector_typeof(obj){return(DraftJSMentionSelector_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function DraftJSMentionSelector_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function DraftJSMentionSelector_getPrototypeOf(o){return(DraftJSMentionSelector_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function DraftJSMentionSelector_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function DraftJSMentionSelector_setPrototypeOf(o,p){return(DraftJSMentionSelector_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function DraftJSMentionSelector_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var mentionStrategy=function(contentBlock,callback,contentState){contentBlock.findEntityRanges((function(character){var entityKey=character.getEntity();return null!==entityKey&&"MENTION"===contentState.getEntity(entityKey).getType()}),callback)},DraftJSMentionSelector_DraftJSMentionSelector=function(_React$Component){function DraftJSMentionSelector(props){var _this;(function DraftJSMentionSelector_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,DraftJSMentionSelector),_this=function DraftJSMentionSelector_possibleConstructorReturn(self,call){return!call||"object"!==DraftJSMentionSelector_typeof(call)&&"function"!=typeof call?DraftJSMentionSelector_assertThisInitialized(self):call}(this,DraftJSMentionSelector_getPrototypeOf(DraftJSMentionSelector).call(this,props)),DraftJSMentionSelector_defineProperty(DraftJSMentionSelector_assertThisInitialized(_this),"handleBlur",(function(event){_this.props.validateOnBlur&&_this.containerEl&&event.relatedTarget instanceof Node&&!_this.containerEl.contains(event.relatedTarget)&&_this.checkValidity()})),DraftJSMentionSelector_defineProperty(DraftJSMentionSelector_assertThisInitialized(_this),"handleFocus",(function(event){var onFocus=_this.props.onFocus;onFocus&&onFocus(event)})),DraftJSMentionSelector_defineProperty(DraftJSMentionSelector_assertThisInitialized(_this),"handleChange",(function(nextEditorState){var internalEditorState=_this.state.internalEditorState;(0,_this.props.onChange)(nextEditorState),internalEditorState&&_this.setState({internalEditorState:nextEditorState})})),DraftJSMentionSelector_defineProperty(DraftJSMentionSelector_assertThisInitialized(_this),"handleValidityStateUpdateHandler",(function(){if(_this.state.isTouched){var error=_this.getErrorFromValidityState();_this.setState({error:error})}})),DraftJSMentionSelector_defineProperty(DraftJSMentionSelector_assertThisInitialized(_this),"checkValidity",(function(){_this.handleValidityStateUpdateHandler()}));var mentionDecorator=new Draft.CompositeDecorator([{strategy:mentionStrategy,component:draft_js_mention_selector_DraftMentionItem}]);return _this.state={contacts:[],isTouched:!1,internalEditorState:props.editorState?null:Draft.EditorState.createEmpty(mentionDecorator),error:null},_this}return function DraftJSMentionSelector_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&DraftJSMentionSelector_setPrototypeOf(subClass,superClass)}(DraftJSMentionSelector,_React$Component),function DraftJSMentionSelector_createClass(Constructor,protoProps,staticProps){return protoProps&&DraftJSMentionSelector_defineProperties(Constructor.prototype,protoProps),staticProps&&DraftJSMentionSelector_defineProperties(Constructor,staticProps),Constructor}(DraftJSMentionSelector,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){var prevInternalEditorState=prevState.internalEditorState,internalEditorState=this.state.internalEditorState,prevEditorStateFromProps=prevProps.editorState,editorState=this.props.editorState,prevEditorState=prevInternalEditorState||prevEditorStateFromProps,currentEditorState=internalEditorState||editorState;if(prevEditorState&&currentEditorState&&prevEditorState!==currentEditorState){var newState=this.getDerivedStateFromEditorState(currentEditorState,prevEditorState);newState?this.setState(newState,this.checkValidityIfAllowed):this.checkValidityIfAllowed()}}},{key:"getDerivedStateFromEditorState",value:function getDerivedStateFromEditorState(currentEditorState,previousEditorState){var isPreviousEditorStateEmpty=this.isEditorStateEmpty(previousEditorState),isCurrentEditorStateEmpty=this.isEditorStateEmpty(currentEditorState),newState=null;return isCurrentEditorStateEmpty&&!isPreviousEditorStateEmpty?newState={isTouched:!1,error:null}:isPreviousEditorStateEmpty&&!isCurrentEditorStateEmpty&&(newState={isTouched:!0}),newState}},{key:"checkValidityIfAllowed",value:function checkValidityIfAllowed(){this.props.validateOnBlur||this.checkValidity()}},{key:"isEditorStateEmpty",value:function isEditorStateEmpty(editorState){var text=editorState.getCurrentContent().getPlainText().trim(),lastChangeType=editorState.getLastChangeType();return 0===text.length&&null===lastChangeType}},{key:"getErrorFromValidityState",value:function getErrorFromValidityState(){var _this$props=this.props,externalEditorState=_this$props.editorState,isRequired=_this$props.isRequired,maxLength=_this$props.maxLength,minLength=_this$props.minLength,length=(this.state.internalEditorState||externalEditorState).getCurrentContent().getPlainText().trim().length;return isRequired&&!length?{code:"valueMissing",message:react_default.a.createElement(index_es.b,common_messages.a.requiredFieldError)}:void 0!==minLength&&length<minLength?function(minLength){return{code:"tooShort",message:react_default.a.createElement(index_es.b,input_messages_extends({},common_messages.a.minLengthError,{values:{min:minLength}}))}}(minLength):void 0!==maxLength&&length>maxLength?function(maxLength){return{code:"tooLong",message:react_default.a.createElement(index_es.b,input_messages_extends({},common_messages.a.maxLengthError,{values:{max:maxLength}}))}}(maxLength):null}},{key:"render",value:function render(){var _this2=this,_this$props2=this.props,_this$props2$classNam=_this$props2.className,className=void 0===_this$props2$classNam?"":_this$props2$classNam,externalEditorState=_this$props2.editorState,hideLabel=_this$props2.hideLabel,isDisabled=_this$props2.isDisabled,isRequired=_this$props2.isRequired,label=_this$props2.label,mentionTriggers=_this$props2.mentionTriggers,name=_this$props2.name,onMention=_this$props2.onMention,placeholder=_this$props2.placeholder,selectorRow=_this$props2.selectorRow,startMentionMessage=_this$props2.startMentionMessage,onReturn=_this$props2.onReturn,_this$state=this.state,contacts=_this$state.contacts,internalEditorState=_this$state.internalEditorState,error=_this$state.error,handleBlur=this.handleBlur,handleChange=this.handleChange,handleFocus=this.handleFocus;return react.createElement("div",{ref:function ref(containerEl){_this2.containerEl=containerEl},className:className},react.createElement(form_FormInput,{name:name,onValidityStateUpdate:this.handleValidityStateUpdateHandler},react.createElement(DraftJSMentionSelectorCore,{contacts:contacts,editorState:internalEditorState||externalEditorState,error:error,hideLabel:hideLabel,isDisabled:isDisabled,isRequired:isRequired,label:label,mentionTriggers:mentionTriggers,onBlur:handleBlur,onChange:handleChange,onFocus:handleFocus,onMention:onMention,onReturn:onReturn,placeholder:placeholder,selectorRow:selectorRow,startMentionMessage:startMentionMessage})))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps){var contacts=nextProps.contacts;return contacts?{contacts:contacts}:null}}]),DraftJSMentionSelector}(react.Component);DraftJSMentionSelector_DraftJSMentionSelector.displayName="DraftJSMentionSelector",DraftJSMentionSelector_defineProperty(DraftJSMentionSelector_DraftJSMentionSelector,"defaultProps",{isRequired:!1,onChange:noop_default.a,validateOnBlur:!0}),DraftJSMentionSelector_DraftJSMentionSelector.__docgenInfo={description:"",methods:[{name:"getDerivedStateFromEditorState",docblock:null,modifiers:[],params:[{name:"currentEditorState",type:{name:"EditorState",alias:"EditorState"}},{name:"previousEditorState",type:{name:"EditorState",alias:"EditorState"}}],returns:null},{name:"checkValidityIfAllowed",docblock:null,modifiers:[],params:[],returns:null},{name:"isEditorStateEmpty",docblock:null,modifiers:[],params:[{name:"editorState",type:{name:"EditorState",alias:"EditorState"}}],returns:{type:{name:"boolean"}}},{name:"getErrorFromValidityState",docblock:"@returns {string}",modifiers:[],params:[],returns:{description:null,type:{name:"string"}},description:null},{name:"handleBlur",docblock:"Event handler called on blur. Triggers validation\n@param {SyntheticFocusEvent} event The event object\n@returns {void}",modifiers:[],params:[{name:"event",description:"The event object",type:{name:"SyntheticFocusEvent",elements:[],raw:"SyntheticFocusEvent<>",alias:"SyntheticFocusEvent"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Event handler called on blur. Triggers validation"},{name:"handleFocus",docblock:null,modifiers:[],params:[{name:"event",type:{name:"SyntheticEvent",elements:[],raw:"SyntheticEvent<>",alias:"SyntheticEvent"}}],returns:null},{name:"handleChange",docblock:"Updates editorState, rechecks validity\n@param {EditorState} nextEditorState The new editor state to set in the state\n@returns {void}",modifiers:[],params:[{name:"nextEditorState",description:"The new editor state to set in the state",type:{name:"EditorState",alias:"EditorState"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Updates editorState, rechecks validity"},{name:"handleValidityStateUpdateHandler",docblock:null,modifiers:[],params:[],returns:null},{name:"checkValidity",docblock:null,modifiers:[],params:[],returns:null}],displayName:"DraftJSMentionSelector",props:{isRequired:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:""},onChange:{defaultValue:{value:"noop",computed:!0},required:!1,flowType:{name:"Function"},description:""},validateOnBlur:{defaultValue:{value:"true",computed:!1},required:!1,flowType:{name:"boolean"},description:""},className:{required:!1,flowType:{name:"string"},description:""},contacts:{required:!0,flowType:{name:"SelectorItems"},description:""},editorState:{required:!1,flowType:{name:"EditorState"},description:""},hideLabel:{required:!1,flowType:{name:"boolean"},description:""},isDisabled:{required:!1,flowType:{name:"boolean"},description:""},label:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:""},maxLength:{required:!1,flowType:{name:"number"},description:""},mentionTriggers:{required:!1,flowType:{name:"Array",elements:[{name:"string"}],raw:"Array<string>"},description:""},minLength:{required:!1,flowType:{name:"number"},description:""},name:{required:!0,flowType:{name:"string"},description:""},onFocus:{required:!1,flowType:{name:"Function"},description:""},onMention:{required:!1,flowType:{name:"Function"},description:""},onReturn:{required:!1,flowType:{name:"Function"},description:""},placeholder:{required:!1,flowType:{name:"string"},description:""},selectorRow:{required:!1,flowType:{name:"ReactElement",raw:"React.Element<any>",elements:[{name:"any"}]},description:""},startMentionMessage:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:""}}};var draft_js_mention_selector_DraftJSMentionSelector=DraftJSMentionSelector_DraftJSMentionSelector;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/form-elements/draft-js-mention-selector/DraftJSMentionSelector.js"]={name:"DraftJSMentionSelector",docgenInfo:DraftJSMentionSelector_DraftJSMentionSelector.__docgenInfo,path:"src/components/form-elements/draft-js-mention-selector/DraftJSMentionSelector.js"});var draft_js_mention_selector_DraftMentionDecorator=new Draft.CompositeDecorator([{strategy:function(contentBlock,callback,contentState){contentBlock.findEntityRanges((function(character){var entityKey=character.getEntity();return null!==entityKey&&"MENTION"===contentState.getEntity(entityKey).getType()}),callback)},component:draft_js_mention_selector_DraftMentionItem}]);function createMentionSelectorState_slicedToArray(arr,i){return function createMentionSelectorState_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function createMentionSelectorState_iterableToArrayLimit(arr,i){if(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function createMentionSelectorState_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var getMentionFromText=function(text){var matchArray=/([@＠﹫])\[([0-9]+):([^\]]+)]/gi.exec(text);if(!matchArray)return null;var _matchArray=createMentionSelectorState_slicedToArray(matchArray,4),fullMatch=_matchArray[0],triggerSymbol=_matchArray[1],id=_matchArray[2],name=_matchArray[3],start=matchArray.index;return{start:start,end:start+fullMatch.length,data:{id:id,name:name,content:"".concat(triggerSymbol).concat(name)}}},draft_js_mention_selector_createMentionSelectorState=function(){for(var message=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",contentState=Draft.ContentState.createFromText(message),contentBlock=contentState.getFirstBlock();null!=contentBlock;){var text=contentBlock.getText(),mention=text?getMentionFromText(text):null;if(null==mention)contentBlock=contentState.getBlockAfter(contentBlock.getKey());else{var data=mention.data,start=mention.start,end=mention.end;contentState.createEntity("MENTION","IMMUTABLE",data);var mentionEntityKey=contentState.getLastCreatedEntityKey(),mentionRange=Draft.SelectionState.createEmpty(contentBlock.getKey()).merge({anchorOffset:start,focusOffset:end});contentBlock=(contentState=Draft.Modifier.replaceText(contentState,mentionRange,data.content,null,mentionEntityKey)).getBlockForKey(contentBlock.getKey())}}return Draft.EditorState.createWithContent(contentState,draft_js_mention_selector_DraftMentionDecorator)},Form=__webpack_require__(3208);__webpack_require__(3412);function CommentForm_typeof(obj){return(CommentForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function CommentForm_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function CommentForm_getPrototypeOf(o){return(CommentForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function CommentForm_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CommentForm_setPrototypeOf(o,p){return(CommentForm_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function CommentForm_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var CommentForm_CommentForm=function(_React$Component){function CommentForm(){var _getPrototypeOf2,_this;!function CommentForm_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CommentForm);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function CommentForm_possibleConstructorReturn(self,call){return!call||"object"!==CommentForm_typeof(call)&&"function"!=typeof call?CommentForm_assertThisInitialized(self):call}(this,(_getPrototypeOf2=CommentForm_getPrototypeOf(CommentForm)).call.apply(_getPrototypeOf2,[this].concat(args))),CommentForm_defineProperty(CommentForm_assertThisInitialized(_this),"state",{commentEditorState:draft_js_mention_selector_createMentionSelectorState(_this.props.tagged_message)}),CommentForm_defineProperty(CommentForm_assertThisInitialized(_this),"onFormValidSubmitHandler",(function(){var _this$props=_this.props,_this$props$createCom=_this$props.createComment,createComment=void 0===_this$props$createCom?noop_default.a:_this$props$createCom,_this$props$updateCom=_this$props.updateComment,updateComment=void 0===_this$props$updateCom?noop_default.a:_this$props$updateCom,onSubmit=_this$props.onSubmit,entityId=_this$props.entityId,_this$getFormattedCom=_this.getFormattedCommentText(),text=_this$getFormattedCom.text,hasMention=_this$getFormattedCom.hasMention;text&&(entityId?updateComment({id:entityId,text:text,hasMention:hasMention}):createComment({text:text,hasMention:hasMention}),onSubmit&&onSubmit(),_this.setState({commentEditorState:draft_js_mention_selector_createMentionSelectorState()}))})),CommentForm_defineProperty(CommentForm_assertThisInitialized(_this),"onMentionSelectorChangeHandler",(function(nextEditorState){return _this.setState({commentEditorState:nextEditorState})})),CommentForm_defineProperty(CommentForm_assertThisInitialized(_this),"getFormattedCommentText",(function(){var contentState=_this.state.commentEditorState.getCurrentContent(),blockMap=contentState.getBlockMap(),resultStringArr=[],hasMention=!1;return blockMap.forEach((function(block){var text=block.getText(),blockMapStringArr=[];block.findEntityRanges((function(){return!0}),(function(start,end){var entityKey=block.getEntityAt(start);if(entityKey){var entity=contentState.getEntity(entityKey),stringToAdd="@[".concat(entity.getData().id,":").concat(text.substring(start+1,end),"]");blockMapStringArr.push(stringToAdd),hasMention=!0}else blockMapStringArr.push(text.substring(start,end))})),resultStringArr.push(blockMapStringArr.join(""))})),{text:resultStringArr.join("\n"),hasMention:hasMention}})),_this}return function CommentForm_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&CommentForm_setPrototypeOf(subClass,superClass)}(CommentForm,_React$Component),function CommentForm_createClass(Constructor,protoProps,staticProps){return protoProps&&CommentForm_defineProperties(Constructor.prototype,protoProps),staticProps&&CommentForm_defineProperties(Constructor,staticProps),Constructor}(CommentForm,[{key:"componentDidUpdate",value:function componentDidUpdate(_ref){var prevIsOpen=_ref.isOpen,isOpen=this.props.isOpen;isOpen===prevIsOpen||isOpen||this.setState({commentEditorState:draft_js_mention_selector_createMentionSelectorState()})}},{key:"render",value:function render(){var _this$props2=this.props,className=_this$props2.className,getMentionWithQuery=_this$props2.getMentionWithQuery,formatMessage=_this$props2.intl.formatMessage,isDisabled=_this$props2.isDisabled,isOpen=_this$props2.isOpen,_this$props2$mentionS=_this$props2.mentionSelectorContacts,mentionSelectorContacts=void 0===_this$props2$mentionS?[]:_this$props2$mentionS,onCancel=_this$props2.onCancel,onFocus=_this$props2.onFocus,user=_this$props2.user,isEditing=_this$props2.isEditing,tagged_message=_this$props2.tagged_message,getAvatarUrl=_this$props2.getAvatarUrl,commentEditorState=this.state.commentEditorState,inputContainerClassNames=classnames_default()("bcs-CommentForm",className,{"bcs-is-open":isOpen});return react.createElement(media_Media,{className:inputContainerClassNames},!isEditing&&react.createElement(media_Media.Figure,{className:"bcs-CommentForm-avatar"},react.createElement(activity_feed_Avatar,{getAvatarUrl:getAvatarUrl,user:user})),react.createElement(media_Media.Body,{className:"bcs-CommentForm-body","data-testid":"bcs-CommentForm-body"},react.createElement(Form.a,{onValidSubmit:this.onFormValidSubmitHandler},react.createElement(draft_js_mention_selector_DraftJSMentionSelector,{className:"bcs-CommentForm-input",contacts:isOpen?mentionSelectorContacts:[],editorState:commentEditorState,hideLabel:!0,isDisabled:isDisabled,isRequired:isOpen,name:"commentText",label:"Comment",onChange:this.onMentionSelectorChangeHandler,onFocus:onFocus,onMention:getMentionWithQuery,placeholder:tagged_message?void 0:formatMessage(comment_form_messages.commentWrite),validateOnBlur:!1}),react.createElement("aside",{className:"bcs-CommentForm-tip"},react.createElement(index_es.b,comment_form_messages.atMentionTip)),isOpen&&react.createElement(CommentFormControls,{onCancel:onCancel}))))}}]),CommentForm}(react.Component);CommentForm_CommentForm.displayName="CommentForm",CommentForm_defineProperty(CommentForm_CommentForm,"defaultProps",{isOpen:!1}),CommentForm_CommentForm.__docgenInfo={description:"",methods:[{name:"onFormValidSubmitHandler",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"onMentionSelectorChangeHandler",docblock:null,modifiers:[],params:[{name:"nextEditorState",type:{name:"any"}}],returns:{type:{name:"void"}}},{name:"getFormattedCommentText",docblock:"Formats the comment editor's text such that it will be accepted by the server.\n\n@returns {Object}",modifiers:[],params:[],returns:{description:null,type:{name:"signature",type:"object",raw:"{ hasMention: boolean, text: string }",signature:{properties:[{key:"hasMention",value:{name:"boolean",required:!0}},{key:"text",value:{name:"string",required:!0}}]}}},description:"Formats the comment editor's text such that it will be accepted by the server."}],displayName:"CommentForm",props:{isOpen:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:""},className:{required:!0,flowType:{name:"string"},description:""},createComment:{required:!1,flowType:{name:"Function"},description:""},entityId:{required:!1,flowType:{name:"string"},description:""},getAvatarUrl:{required:!0,flowType:{name:"GetAvatarUrlCallback"},description:""},getMentionWithQuery:{required:!1,flowType:{name:"Function"},description:""},isDisabled:{required:!1,flowType:{name:"boolean"},description:""},isEditing:{required:!1,flowType:{name:"boolean"},description:""},mentionSelectorContacts:{required:!1,flowType:{name:"SelectorItems"},description:""},onCancel:{required:!0,flowType:{name:"Function"},description:""},onFocus:{required:!0,flowType:{name:"Function"},description:""},onSubmit:{required:!0,flowType:{name:"Function"},description:""},tagged_message:{required:!1,flowType:{name:"string"},description:""},updateComment:{required:!1,flowType:{name:"Function"},description:""},user:{required:!0,flowType:{name:"User"},description:""}}};var activity_feed_comment_form_CommentForm=Object(index_es.g)(CommentForm_CommentForm);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/comment-form/CommentForm.js"]={name:"CommentForm",docgenInfo:CommentForm_CommentForm.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/comment-form/CommentForm.js"});var comment_messages=Object(index_es.f)({commentDeleteMenuItem:{id:"be.contentSidebar.activityFeed.comment.commentDeleteMenuItem",defaultMessage:"Delete"},commentDeletePrompt:{id:"be.contentSidebar.activityFeed.comment.commentDeletePrompt",defaultMessage:"Are you sure you want to permanently delete this comment?"},commentEditMenuItem:{id:"be.contentSidebar.activityFeed.comment.commentEditMenuItem",defaultMessage:"Modify"},commentPostedFullDateTime:{id:"be.contentSidebar.activityFeed.comment.commentPostedFullDateTime",defaultMessage:"{time, date, full} at {time, time, short}"}});__webpack_require__(3413);function Comment_typeof(obj){return(Comment_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Comment_extends(){return(Comment_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function Comment_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function Comment_getPrototypeOf(o){return(Comment_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function Comment_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Comment_setPrototypeOf(o,p){return(Comment_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Comment_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var Comment_ref2=react.createElement(IconPencil.a,{color:variables.bdlGray80}),Comment_ref3=react.createElement(IconTrash.a,{color:variables.bdlGray80}),Comment_Comment=function(_React$Component){function Comment(){var _getPrototypeOf2,_this;!function Comment_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Comment);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function Comment_possibleConstructorReturn(self,call){return!call||"object"!==Comment_typeof(call)&&"function"!=typeof call?Comment_assertThisInitialized(self):call}(this,(_getPrototypeOf2=Comment_getPrototypeOf(Comment)).call.apply(_getPrototypeOf2,[this].concat(args))),Comment_defineProperty(Comment_assertThisInitialized(_this),"state",{isConfirmingDelete:!1,isEditing:!1,isInputOpen:!1}),Comment_defineProperty(Comment_assertThisInitialized(_this),"handleDeleteConfirm",(function(){var _this$props=_this.props,id=_this$props.id;(0,_this$props.onDelete)({id:id,permissions:_this$props.permissions})})),Comment_defineProperty(Comment_assertThisInitialized(_this),"handleDeleteCancel",(function(){_this.setState({isConfirmingDelete:!1})})),Comment_defineProperty(Comment_assertThisInitialized(_this),"handleDeleteClick",(function(){_this.setState({isConfirmingDelete:!0})})),Comment_defineProperty(Comment_assertThisInitialized(_this),"handleEditClick",(function(){_this.setState({isEditing:!0,isInputOpen:!0})})),Comment_defineProperty(Comment_assertThisInitialized(_this),"commentFormFocusHandler",(function(){return _this.setState({isInputOpen:!0})})),Comment_defineProperty(Comment_assertThisInitialized(_this),"commentFormCancelHandler",(function(){return _this.setState({isInputOpen:!1,isEditing:!1})})),Comment_defineProperty(Comment_assertThisInitialized(_this),"commentFormSubmitHandler",(function(){return _this.setState({isInputOpen:!1,isEditing:!1})})),Comment_defineProperty(Comment_assertThisInitialized(_this),"handleUpdate",(function(_ref){var id=_ref.id,text=_ref.text,hasMention=_ref.hasMention,_this$props2=_this.props;(0,_this$props2.onEdit)(id,text,hasMention,_this$props2.permissions),_this.commentFormSubmitHandler()})),_this}return function Comment_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Comment_setPrototypeOf(subClass,superClass)}(Comment,_React$Component),function Comment_createClass(Constructor,protoProps,staticProps){return protoProps&&Comment_defineProperties(Constructor.prototype,protoProps),staticProps&&Comment_defineProperties(Constructor,staticProps),Constructor}(Comment,[{key:"render",value:function render(){var _this$props3=this.props,created_by=_this$props3.created_by,created_at=_this$props3.created_at,_this$props3$permissi=_this$props3.permissions,permissions=void 0===_this$props3$permissi?{}:_this$props3$permissi,id=_this$props3.id,isPending=_this$props3.isPending,error=_this$props3.error,_this$props3$tagged_m=_this$props3.tagged_message,tagged_message=void 0===_this$props3$tagged_m?"":_this$props3$tagged_m,translatedTaggedMessage=_this$props3.translatedTaggedMessage,translations=_this$props3.translations,currentUser=_this$props3.currentUser,isDisabled=_this$props3.isDisabled,getAvatarUrl=_this$props3.getAvatarUrl,getUserProfileUrl=_this$props3.getUserProfileUrl,getMentionWithQuery=_this$props3.getMentionWithQuery,mentionSelectorContacts=_this$props3.mentionSelectorContacts,onEdit=_this$props3.onEdit,_this$state=this.state,isConfirmingDelete=_this$state.isConfirmingDelete,isEditing=_this$state.isEditing,isInputOpen=_this$state.isInputOpen,createdAtTimestamp=new Date(created_at).getTime(),createdByUser=created_by||constants.be,canEdit=onEdit!==noop_default.a&&permissions.can_edit,canDelete=permissions.can_delete;return react.createElement("div",{className:"bcs-Comment"},react.createElement(media_Media,{className:classnames_default()("bcs-Comment-media",{"bcs-is-pending":isPending||error})},react.createElement(media_Media.Figure,null,react.createElement(activity_feed_Avatar,{getAvatarUrl:getAvatarUrl,user:createdByUser})),react.createElement(media_Media.Body,null,(canDelete||canEdit)&&!isPending&&react.createElement(react_tether_default.a,{attachment:"top right",className:"bcs-Comment-deleteConfirmationModal",constraints:[{to:"scrollParent",attachment:"together"}],targetAttachment:"bottom right"},react.createElement(media_Media.Menu,{isDisabled:isConfirmingDelete,"data-testid":"comment-actions-menu",menuProps:{"data-resin-component":interactionTargets.a.COMMENT_OPTIONS}},canEdit&&react.createElement(menu.b,{"data-resin-target":interactionTargets.a.COMMENT_OPTIONS_EDIT,"data-testid":"edit-comment",onClick:this.handleEditClick},Comment_ref2,react.createElement(index_es.b,comment_messages.commentEditMenuItem)),canDelete&&react.createElement(menu.b,{"data-resin-target":interactionTargets.a.COMMENT_OPTIONS_DELETE,"data-testid":"delete-comment",onClick:this.handleDeleteClick},Comment_ref3,react.createElement(index_es.b,comment_messages.commentDeleteMenuItem))),isConfirmingDelete&&react.createElement(common_delete_confirmation_DeleteConfirmation,{"data-resin-component":interactionTargets.a.COMMENT_OPTIONS,isOpen:isConfirmingDelete,message:comment_messages.commentDeletePrompt,onDeleteCancel:this.handleDeleteCancel,onDeleteConfirm:this.handleDeleteConfirm})),react.createElement("div",{className:"bcs-Comment-headline"},react.createElement(common_user_link_UserLink,{"data-resin-target":interactionTargets.a.PROFILE,id:createdByUser.id,name:createdByUser.name,getUserProfileUrl:getUserProfileUrl})),react.createElement("div",null,react.createElement(activity_timestamp_ActivityTimestamp,{date:createdAtTimestamp})),isEditing?react.createElement(activity_feed_comment_form_CommentForm,{isDisabled:isDisabled,className:classnames_default()("bcs-Comment-editor",{"bcs-is-disabled":isDisabled}),updateComment:this.handleUpdate,isOpen:isInputOpen,user:currentUser,onCancel:this.commentFormCancelHandler,onFocus:this.commentFormFocusHandler,isEditing:isEditing,entityId:id,tagged_message:tagged_message,getAvatarUrl:getAvatarUrl,mentionSelectorContacts:mentionSelectorContacts,getMentionWithQuery:getMentionWithQuery}):react.createElement(common_activity_message_ActivityMessage,Comment_extends({id:id,tagged_message:tagged_message,translatedTaggedMessage:translatedTaggedMessage},translations,{translationFailed:!!error||null,getUserProfileUrl:getUserProfileUrl})))),error?react.createElement(activity_error_ActivityError,error):null)}}]),Comment}(react.Component);Comment_Comment.displayName="Comment",Comment_defineProperty(Comment_Comment,"defaultProps",{onDelete:noop_default.a,onEdit:noop_default.a}),Comment_Comment.__docgenInfo={description:"",methods:[{name:"handleDeleteConfirm",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"handleDeleteCancel",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"handleDeleteClick",docblock:null,modifiers:[],params:[],returns:null},{name:"handleEditClick",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"commentFormFocusHandler",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"commentFormCancelHandler",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"commentFormSubmitHandler",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"handleUpdate",docblock:null,modifiers:[],params:[{name:"{ id, text, hasMention }: { hasMention: boolean, id: string, text: string }",type:{name:"signature",type:"object",raw:"{ hasMention: boolean, id: string, text: string }",signature:{properties:[{key:"hasMention",value:{name:"boolean",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"text",value:{name:"string",required:!0}}]}}}],returns:{type:{name:"void"}}}],displayName:"Comment",props:{onDelete:{defaultValue:{value:"noop",computed:!0},required:!1,flowType:{name:"signature",type:"function",raw:"({ id: string, permissions?: BoxCommentPermission }) => any",signature:{arguments:[{name:"",type:{name:"signature",type:"object",raw:"{ id: string, permissions?: BoxCommentPermission }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"permissions",value:{name:"BoxCommentPermission",required:!1}}]}}}],return:{name:"any"}}},description:""},onEdit:{defaultValue:{value:"noop",computed:!0},required:!1,flowType:{name:"signature",type:"function",raw:"(id: string, text: string, hasMention: boolean, permissions?: BoxCommentPermission) => any",signature:{arguments:[{name:"id",type:{name:"string"}},{name:"text",type:{name:"string"}},{name:"hasMention",type:{name:"boolean"}},{name:"permissions",type:{name:"BoxCommentPermission"}}],return:{name:"any"}}},description:""},created_at:{required:!0,flowType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},created_by:{required:!0,flowType:{name:"User"},description:""},currentUser:{required:!1,flowType:{name:"User"},description:""},error:{required:!1,flowType:{name:"ActionItemError"},description:""},getAvatarUrl:{required:!0,flowType:{name:"GetAvatarUrlCallback"},description:""},getMentionWithQuery:{required:!1,flowType:{name:"Function"},description:""},getUserProfileUrl:{required:!1,flowType:{name:"GetProfileUrlCallback"},description:""},id:{required:!0,flowType:{name:"string"},description:""},isDisabled:{required:!1,flowType:{name:"boolean"},description:""},isPending:{required:!1,flowType:{name:"boolean"},description:""},mentionSelectorContacts:{required:!1,flowType:{name:"SelectorItems"},description:""},modified_at:{required:!1,flowType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},permissions:{required:!1,flowType:{name:"BoxCommentPermission"},description:""},tagged_message:{required:!0,flowType:{name:"string"},description:""},translatedTaggedMessage:{required:!1,flowType:{name:"string"},description:""},translations:{required:!1,flowType:{name:"Translations"},description:""}}};var activity_feed_comment_Comment=Comment_Comment;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/comment/Comment.js"]={name:"Comment",docgenInfo:Comment_Comment.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/comment/Comment.js"});var feature_checking=__webpack_require__(356),api_context=__webpack_require__(3183),IconTaskApproval_ref2=react.createElement("g",{fill:"none",fillRule:"nonzero"},react.createElement("circle",{className:"background-color",fill:variables.bdlBoxBlue,cx:"16",cy:"16",r:"16"}),react.createElement("g",{transform:"translate(8 5.333)",className:"foreground-color",fill:variables.white},react.createElement("path",{d:"M11.267 6.51c-1.133 2.242-1.669 4.276-1.614 6.102.006.213-.177.388-.405.388H6.752c-.228 0-.41-.175-.405-.388.055-1.826-.481-3.86-1.614-6.102C2.953 2.986 4.557 0 8 0s5.047 2.986 3.267 6.51z"}),react.createElement("rect",{y:"14.337",width:"16",height:"3.353",rx:"1.676"}),react.createElement("rect",{x:"1.143",y:"18.808",width:"13.714",height:"1.192",rx:".596"}))),IconTaskApproval=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$height=_ref.height,height=void 0===_ref$height?24:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?24:_ref$width;return react.createElement(accessible_svg.a,{className:"bdl-IconTaskApproval ".concat(className),height:height,title:title,viewBox:"0 0 32 32",width:width},IconTaskApproval_ref2)};IconTaskApproval.displayName="IconTaskApproval",IconTaskApproval.__docgenInfo={description:"",methods:[],displayName:"IconTaskApproval",props:{className:{defaultValue:{value:"''",computed:!1},required:!1},height:{defaultValue:{value:"24",computed:!1},required:!1},width:{defaultValue:{value:"24",computed:!1},required:!1}}};var two_toned_IconTaskApproval=IconTaskApproval;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/two-toned/IconTaskApproval.js"]={name:"IconTaskApproval",docgenInfo:IconTaskApproval.__docgenInfo,path:"src/icons/two-toned/IconTaskApproval.js"});var IconTaskGeneral_ref2=react.createElement("g",{fillRule:"nonzero",fill:"none"},react.createElement("circle",{className:"background-color",fill:variables.bdlBoxBlue,cx:"16.162",cy:"16.162",r:"16"}),react.createElement("path",{d:"M11.717 8.162v.889c0 1.472.995 2.666 2.222 2.666h4.445c1.227 0 2.222-1.194 2.222-2.666v-.89h1.281c.766 0 1.386.62 1.386 1.386v13.23c0 .764-.62 1.385-1.386 1.385H10.436c-.765 0-1.385-.62-1.385-1.386V9.546c0-.764.62-1.384 1.385-1.384h1.281zm6.463 6.503l-2.741 2.924-1.354-1.203a.889.889 0 1 0-1.18 1.329l2 1.778c.36.32.909.295 1.238-.057l3.334-3.555a.889.889 0 1 0-1.297-1.216zm-4.981-6.503h5.926v.889c0 .49-.332.888-.741.888h-4.445c-.409 0-.74-.398-.74-.888v-.89z",className:"foreground-color",fill:variables.white})),IconTaskGeneral=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$height=_ref.height,height=void 0===_ref$height?24:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?24:_ref$width;return react.createElement(accessible_svg.a,{className:"bdl-IconTaskGeneral ".concat(className),height:height,title:title,viewBox:"0 0 32 32",width:width},IconTaskGeneral_ref2)};IconTaskGeneral.displayName="IconTaskGeneral",IconTaskGeneral.__docgenInfo={description:"",methods:[],displayName:"IconTaskGeneral",props:{className:{defaultValue:{value:"''",computed:!1},required:!1},height:{defaultValue:{value:"24",computed:!1},required:!1},width:{defaultValue:{value:"24",computed:!1},required:!1}}};var two_toned_IconTaskGeneral=IconTaskGeneral;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/two-toned/IconTaskGeneral.js"]={name:"IconTaskGeneral",docgenInfo:IconTaskGeneral.__docgenInfo,path:"src/icons/two-toned/IconTaskGeneral.js"});__webpack_require__(1131);var task_new_messages=Object(index_es.f)({taskCollaboratorLoadErrorMessage:{id:"be.contentSidebar.activityFeed.taskNew.taskCollaboratorLoadErrorMessage",defaultMessage:"An error has occurred while loading collaborators for this task. Please try again."},taskShowMoreAssignees:{id:"be.contentSidebar.activityFeed.taskNew.taskShowMoreAssignees",defaultMessage:"Show {additionalAssigneeCount} More"},taskShowMoreAssigneesOverflow:{id:"be.contentSidebar.activityFeed.taskNew.taskShowMoreAssigneesOverflow",defaultMessage:"{additionalAssigneeCount, plural, one {Show #+ More} other {Show #+ More}}"},taskShowLessAssignees:{id:"be.contentSidebar.activityFeed.taskNew.taskShowLessAssignees",defaultMessage:"Show Less"},taskDueDateLabel:{id:"be.contentSidebar.activityFeed.taskNew.taskDueDateLabel",defaultMessage:"Due: {date}"},tasksFeedApproveAction:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedApproveAction",defaultMessage:"Approve"},tasksFeedCompleteAction:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedCompleteAction",defaultMessage:"Mark as Complete"},tasksFeedRejectAction:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedRejectAction",defaultMessage:"Reject"},tasksFeedStatusLabel:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedStatusLabel",defaultMessage:"Status: {taskStatus}"},tasksFeedCompletedLabel:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedCompletedLabel",defaultMessage:"Completed"},tasksFeedApprovedLabel:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedApprovedLabel",defaultMessage:"Approved"},tasksFeedRejectedLabel:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedRejectedLabel",defaultMessage:"Rejected"},tasksFeedInProgressLabel:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedInProgressLabel",defaultMessage:"In Progress"},tasksFeedHeadlineApprovalCurrentUser:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedHeadlineApprovalCurrentUser",defaultMessage:"{user} assigned you an Approval Task"},tasksFeedHeadlineApproval:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedHeadlineApproval",defaultMessage:"{user} assigned an Approval Task"},tasksFeedHeadlineGeneralCurrentUser:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedHeadlineGeneralCurrentUser",defaultMessage:"{user} assigned you a Task"},tasksFeedHeadlineGeneral:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedHeadlineGeneral",defaultMessage:"{user} assigned a Task"},tasksFeedMoreAssigneesLabel:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedMoreAssigneesLabel",defaultMessage:"See all assignees"},tasksFeedAssigneeListTitle:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedAssigneeListTitle",defaultMessage:"Assignees"},tasksFeedStatusRejected:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedStatusRejected",defaultMessage:"Rejected {dateTime}"},tasksFeedStatusApproved:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedStatusApproved",defaultMessage:"Approved {dateTime}"},tasksFeedStatusCompleted:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedStatusCompleted",defaultMessage:"Completed {dateTime}"},taskAssignmentCompleted:{id:"be.contentSidebar.activityFeed.taskNew.taskAssignmentCompleted",defaultMessage:"Completed"},taskDeleteMenuItem:{id:"be.contentSidebar.activityFeed.task.taskDeleteMenuItem",defaultMessage:"Delete task"},taskEditMenuItem:{id:"be.contentSidebar.activityFeed.task.taskEditMenuItem",defaultMessage:"Modify task"},taskDeletePrompt:{id:"be.contentSidebar.activityFeed.task.taskDeletePrompt",defaultMessage:"Are you sure you want to permanently delete this task?"},taskAnyAffordanceTooltip:{id:"be.contentSidebar.activityFeed.task.taskAnyAffordanceTooltip",defaultMessage:"Only one assignee is required to complete this task"}}),TaskActions_TaskActions=(__webpack_require__(3414),function(_ref){var onTaskApproval=_ref.onTaskApproval,onTaskReject=_ref.onTaskReject,onTaskComplete=_ref.onTaskComplete,taskType=_ref.taskType,action=null;return taskType===constants.Pe?action=react.createElement(react.Fragment,null,react.createElement(components_button.a,{className:"bcs-TaskActions-button","data-testid":"approve-task",onClick:onTaskApproval,"data-resin-target":interactionTargets.a.TASK_APPROVE},react.createElement(index_es.b,task_new_messages.tasksFeedApproveAction)),react.createElement(components_button.a,{className:"bcs-TaskActions-button","data-testid":"reject-task",onClick:onTaskReject,"data-resin-target":interactionTargets.a.TASK_REJECT},react.createElement(index_es.b,task_new_messages.tasksFeedRejectAction))):taskType===constants.Qe&&(action=react.createElement(components_button.a,{className:"bcs-TaskActions-button","data-testid":"complete-task",onClick:onTaskComplete,"data-resin-target":interactionTargets.a.TASK_COMPLETE},react.createElement(index_es.b,task_new_messages.tasksFeedCompleteAction))),react.createElement("div",{className:"bcs-TaskActions"},action)});TaskActions_TaskActions.displayName="TaskActions",TaskActions_TaskActions.__docgenInfo={description:"",methods:[],displayName:"TaskActions",props:{onTaskApproval:{required:!0,flowType:{name:"Function"},description:""},onTaskComplete:{required:!0,flowType:{name:"Function"},description:""},onTaskReject:{required:!0,flowType:{name:"Function"},description:""},taskType:{required:!0,flowType:{name:"TaskType"},description:""}}};var task_new_TaskActions=TaskActions_TaskActions;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/task-new/TaskActions.js"]={name:"TaskActions",docgenInfo:TaskActions_TaskActions.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/task-new/TaskActions.js"});var IconAnyTask_ref2=react.createElement("path",{d:"M28.7484364 16.4549424c0 1.0039348.7442362 1.8177849 1.6622981 1.8177849.9180618 0 1.662298-.8138501 1.662298-1.8177849V5.54823284c0-1.47292747-1.5180216-2.33430191-2.6193324-1.48629378L26.960253 5.9818905c-.7506441.57799516-.9306825 1.71198921-.402127 2.5328466.4995837.7758637 1.4533974.99427836 2.1903104.52782657v7.41237873zM13.1639416 17.5454545c4.0166164 0 7.2727273-3.2561109 7.2727273-7.2727272C20.4366689 6.25611091 17.180558 3 13.1639416 3c-4.01661637 0-7.27272728 3.25611091-7.27272728 7.2727273 0 4.0166163 3.25611091 7.2727272 7.27272728 7.2727272zm0-3.6363636c-2.0083082 0-3.63636365-1.6280554-3.63636365-3.6363636 0-2.00830821 1.62805545-3.63636366 3.63636365-3.63636366s3.6363636 1.62805545 3.6363636 3.63636366c0 2.0083082-1.6280554 3.6363636-3.6363636 3.6363636zM26.0799741 26.82097c-2.6627973-4.6162045-7.5876175-7.459488-12.9167671-7.4573363-5.33091328-.0023936-10.25839928 2.8441776-12.9201858 7.4647912-.50123987.8701058-.20221498 1.9818011.66789077 2.4830409.87010576.5012399 1.98180104.202215 2.48304091-.6678907 2.01238031-3.4933049 5.73768893-5.6453874 9.76917202-5.6435766 4.0305283-.0016279 7.7538215 2.147969 9.766966 5.6379405.5017421.8698163 1.6136099 1.1681993 2.4834261.6664571.8698162-.5017421 1.1681992-1.6136098.6664571-2.4834261z"}),IconAnyTask=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?variables.bdlGray62:_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?32:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?32:_ref$width;return react.createElement(accessible_svg.a,{className:className,height:height,title:title,viewBox:"0 0 32 32",width:width},react.createElement("g",{fill:color,fillRule:"nonzero"},IconAnyTask_ref2))};IconAnyTask.displayName="IconAnyTask",IconAnyTask.__docgenInfo={description:"",methods:[],displayName:"IconAnyTask",props:{className:{defaultValue:{value:"''",computed:!1},required:!1},color:{defaultValue:{value:"bdlGray62",computed:!0},required:!1},height:{defaultValue:{value:"32",computed:!1},required:!1},width:{defaultValue:{value:"32",computed:!1},required:!1}}};var general_IconAnyTask=IconAnyTask;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconAnyTask.js"]={name:"IconAnyTask",docgenInfo:IconAnyTask.__docgenInfo,path:"src/icons/general/IconAnyTask.js"});__webpack_require__(3415);var TaskCompletionRuleIcon_ref2=react.createElement("span",null,react.createElement(general_IconAnyTask,{height:11,width:11,className:"bcs-TaskCompletionRuleIcon"})),TaskCompletionRuleIcon_TaskCompletionRuleIcon=function(_ref){return _ref.completionRule===constants.He&&react.createElement(components_tooltip.a,{position:"top-center",text:react.createElement(index_es.b,task_new_messages.taskAnyAffordanceTooltip)},TaskCompletionRuleIcon_ref2)};TaskCompletionRuleIcon_TaskCompletionRuleIcon.__docgenInfo={description:"",methods:[],displayName:"TaskCompletionRuleIcon",props:{completionRule:{required:!0,flowType:{name:"TaskCompletionRule",nullable:!0},description:""}}};var task_new_TaskCompletionRuleIcon=TaskCompletionRuleIcon_TaskCompletionRuleIcon;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/task-new/TaskCompletionRuleIcon.js"]={name:"TaskCompletionRuleIcon",docgenInfo:TaskCompletionRuleIcon_TaskCompletionRuleIcon.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/task-new/TaskCompletionRuleIcon.js"});var time=__webpack_require__(3204);__webpack_require__(3416);function TaskDueDate_extends(){return(TaskDueDate_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}var TaskDueDate_TaskDueDate=function(_ref){var dueDate=_ref.dueDate,status=_ref.status,isOverdue=!!dueDate&&status===constants.Ne&&new Date(dueDate)<Date.now(),fullDueDate=new Date(dueDate);return react.createElement("div",{className:classnames_default()("bcs-TaskDueDate",{"bcs-is-taskOverdue":isOverdue}),"data-testid":"task-due-date"},react.createElement(index_es.b,TaskDueDate_extends({},task_new_messages.taskDueDateLabel,{values:{date:react.createElement(time.a,{alwaysShowTime:!0,timestamp:fullDueDate.getTime()})}})))};TaskDueDate_TaskDueDate.displayName="TaskDueDate",TaskDueDate_TaskDueDate.__docgenInfo={description:"",methods:[],displayName:"TaskDueDate",props:{dueDate:{required:!0,flowType:{name:"ISODate"},description:""},status:{required:!0,flowType:{name:"TaskStatus"},description:""}}};var task_new_TaskDueDate=TaskDueDate_TaskDueDate;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/task-new/TaskDueDate.js"]={name:"TaskDueDate",docgenInfo:TaskDueDate_TaskDueDate.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/task-new/TaskDueDate.js"});var _statusMessageKeyMap,camelCase=__webpack_require__(3253),camelCase_default=__webpack_require__.n(camelCase);__webpack_require__(3418);function TaskStatus_extends(){return(TaskStatus_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function TaskStatus_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var statusMessageKeyMap=(TaskStatus_defineProperty(_statusMessageKeyMap={},constants.Ke,task_new_messages.tasksFeedApprovedLabel),TaskStatus_defineProperty(_statusMessageKeyMap,constants.Le,task_new_messages.tasksFeedCompletedLabel),TaskStatus_defineProperty(_statusMessageKeyMap,constants.Oe,task_new_messages.tasksFeedRejectedLabel),TaskStatus_defineProperty(_statusMessageKeyMap,constants.Ne,task_new_messages.tasksFeedInProgressLabel),TaskStatus_defineProperty(_statusMessageKeyMap,constants.Me,task_new_messages.tasksFeedInProgressLabel),_statusMessageKeyMap),task_new_TaskStatus=react.memo((function(_ref){var status=_ref.status;return react.createElement(index_es.b,TaskStatus_extends({},task_new_messages.tasksFeedStatusLabel,{values:{taskStatus:react.createElement("span",{className:"bcs-TaskStatus-message ".concat(camelCase_default()(status))},react.createElement(index_es.b,statusMessageKeyMap[status]))}}),(function(){for(var _len=arguments.length,msg=Array(_len),_key=0;_key<_len;_key++)msg[_key]=arguments[_key];return react.createElement("div",{className:"bcs-TaskStatus"},msg)}))})),IconVerified=__webpack_require__(1818),IconRejected_ref2=react.createElement("path",{d:"M9 7.586l2.828-2.829 1.415 1.415L10.414 9l2.829 2.828-1.415 1.415L9 10.414l-2.828 2.829-1.415-1.415L7.586 9 4.757 6.172l1.415-1.415z",fill:"#FFF",fillRule:"nonzero"}),IconRejected=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?"#ED3757":_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?18:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?18:_ref$width;return react.createElement(accessible_svg.a,{className:"icon-rejected ".concat(className),height:height,title:title,viewBox:"0 0 18 18",width:width},react.createElement("g",{fill:"none",fillRule:"evenodd"},react.createElement("circle",{cx:9,cy:9,fill:color,r:9}),IconRejected_ref2))};IconRejected.displayName="IconRejected",IconRejected.__docgenInfo={description:"",methods:[],displayName:"IconRejected",props:{className:{defaultValue:{value:"''",computed:!1},required:!1},color:{defaultValue:{value:"'#ED3757'",computed:!1},required:!1},height:{defaultValue:{value:"18",computed:!1},required:!1},width:{defaultValue:{value:"18",computed:!1},required:!1}}};var general_IconRejected=IconRejected;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconRejected.js"]={name:"IconRejected",docgenInfo:IconRejected.__docgenInfo,path:"src/icons/general/IconRejected.js"});__webpack_require__(3419);function AvatarGroupAvatar_extends(){return(AvatarGroupAvatar_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function AvatarGroupAvatar_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function AvatarGroupAvatar_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var _statusMessages,StatusIcon=function(_ref){var status=_ref.status,rest=AvatarGroupAvatar_objectWithoutProperties(_ref,["status"]);switch(status){case constants.Ke:case constants.Le:return react.createElement(IconVerified.a,rest);case constants.Oe:return react.createElement(general_IconRejected,rest);case constants.Ne:default:return null}},task_new_AvatarGroupAvatar=react.memo((function(_ref2){var user=_ref2.user,status=_ref2.status,getAvatarUrl=_ref2.getAvatarUrl,className=_ref2.className,rest=AvatarGroupAvatar_objectWithoutProperties(_ref2,["user","status","getAvatarUrl","className"]);return react.createElement("div",AvatarGroupAvatar_extends({className:classnames_default()("bcs-AvatarGroupAvatar",className),"data-testid":"avatar-group-avatar-container"},rest),react.createElement(activity_feed_Avatar,{className:"bcs-AvatarGroupAvatar-avatar",user:user,getAvatarUrl:getAvatarUrl}),react.createElement(StatusIcon,{status:status,className:"bcs-AvatarGroupAvatar-statusIcon ".concat(camelCase_default()(status)),height:12,width:12,title:react.createElement(index_es.b,task_new_messages.taskAssignmentCompleted)}))}));__webpack_require__(3420);function AssigneeDetails_extends(){return(AssigneeDetails_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function AssigneeDetails_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var statusMessages=(AssigneeDetails_defineProperty(_statusMessages={},constants.Ke,task_new_messages.tasksFeedStatusApproved),AssigneeDetails_defineProperty(_statusMessages,constants.Oe,task_new_messages.tasksFeedStatusRejected),AssigneeDetails_defineProperty(_statusMessages,constants.Le,task_new_messages.tasksFeedStatusCompleted),AssigneeDetails_defineProperty(_statusMessages,constants.Ne,null),_statusMessages),Datestamp=function(_ref){var date=_ref.date;return react.createElement(ReadableTime.a,{timestamp:new Date(date).getTime(),alwaysShowTime:!0,relativeThreshold:0})};Datestamp.displayName="Datestamp",Datestamp.propTypes={date:prop_types_default.a.oneOfType([function(){return("function"==typeof ISODate?prop_types_default.a.instanceOf(ISODate):prop_types_default.a.any).apply(this,arguments)},function(){return("function"==typeof Date?prop_types_default.a.instanceOf(Date):prop_types_default.a.any).apply(this,arguments)}]).isRequired};var task_new_AssigneeDetails=react.memo((function(_ref2){var user=_ref2.user,status=_ref2.status,completedAt=_ref2.completedAt,className=_ref2.className,statusMessage=statusMessages[status]||null;return react.createElement("div",{className:classnames_default()(className,"bcs-AssigneeDetails")},react.createElement("div",{className:"bcs-AssigneeDetails-name"},user.name?user.name:react.createElement(index_es.b,messages.a.priorCollaborator)),statusMessage&&completedAt&&react.createElement("div",{className:"bcs-AssigneeDetails-status"},react.createElement(index_es.b,AssigneeDetails_extends({},statusMessage,{values:{dateTime:react.createElement(Datestamp,{date:completedAt})}}))))}));__webpack_require__(3421);function AssigneeList_extends(){return(AssigneeList_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}var DEFAULT_ASSIGNEES_SHOWN=3,TASKS_PAGE_SIZE=20;function AssigneeList_AssigneeList(props){var _props$initialAssigne=props.initialAssigneeCount,initialAssigneeCount=void 0===_props$initialAssigne?DEFAULT_ASSIGNEES_SHOWN:_props$initialAssigne,_props$users=props.users,users=void 0===_props$users?{}:_props$users,getAvatarUrl=props.getAvatarUrl,isOpen=props.isOpen,onCollapse=props.onCollapse,onExpand=props.onExpand,_users$entries=users.entries,entries=void 0===_users$entries?[]:_users$entries,next_marker=users.next_marker,entryCount=entries.length,numVisibleAssignees=isOpen?entryCount:initialAssigneeCount,visibleUsers=entries.slice(0,numVisibleAssignees).map((function(_ref){var id=_ref.id,target=_ref.target,status=_ref.status,completedAt=_ref.completed_at;return react.createElement("li",{key:id,className:"bcs-AssigneeList-listItem","data-testid":"assignee-list-item"},react.createElement(task_new_AvatarGroupAvatar,{status:status,className:"bcs-AssigneeList-listItemAvatar",user:target,getAvatarUrl:getAvatarUrl}),react.createElement(task_new_AssigneeDetails,{user:target,status:status,completedAt:completedAt}))})),hiddenAssigneeCount=Math.max(0,entryCount-initialAssigneeCount),maxAdditionalAssignees=TASKS_PAGE_SIZE-initialAssigneeCount,hasMoreAssigneesThanPageSize=hiddenAssigneeCount>maxAdditionalAssignees||next_marker,additionalAssigneeMessage=hasMoreAssigneesThanPageSize?task_new_messages.taskShowMoreAssigneesOverflow:task_new_messages.taskShowMoreAssignees;return react.createElement("div",{className:"bcs-AssigneeList"},react.createElement("ul",{className:"bcs-AssigneeList-list","data-testid":"task-assignee-list"},visibleUsers),!isOpen&&0<hiddenAssigneeCount&&react.createElement("div",{className:"bcs-AssigneeList-toggleBtn"},react.createElement(plain_button.a,{"data-resin-target":"showmorebtn","data-testid":"show-more-assignees",onClick:onExpand,className:"lnk"},react.createElement(index_es.b,AssigneeList_extends({},additionalAssigneeMessage,{values:{additionalAssigneeCount:hasMoreAssigneesThanPageSize?maxAdditionalAssignees:hiddenAssigneeCount}})))),isOpen&&react.createElement("div",{className:"bcs-AssigneeList-toggleBtn"},react.createElement(plain_button.a,{"data-resin-target":"showlessbtn","data-testid":"show-less-assignees",onClick:onCollapse,className:"lnk"},react.createElement(index_es.b,task_new_messages.taskShowLessAssignees))))}AssigneeList_AssigneeList.displayName="AssigneeList",AssigneeList_AssigneeList.__docgenInfo={description:"",methods:[],displayName:"AssigneeList",props:{getAvatarUrl:{required:!0,flowType:{name:"GetAvatarUrlCallback"},description:""},initialAssigneeCount:{required:!0,flowType:{name:"number"},description:""},isOpen:{required:!0,flowType:{name:"boolean"},description:""},onCollapse:{required:!0,flowType:{name:"signature",type:"function",raw:"() => void | Promise<void>",signature:{arguments:[],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},onExpand:{required:!0,flowType:{name:"signature",type:"function",raw:"() => void | Promise<void>",signature:{arguments:[],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},users:{required:!0,flowType:{name:"TaskAssigneeCollection"},description:""}}};var task_new_AssigneeList=AssigneeList_AssigneeList;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/task-new/AssigneeList.js"]={name:"AssigneeList",docgenInfo:AssigneeList_AssigneeList.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/task-new/AssigneeList.js"});var tabbable=__webpack_require__(1100),tabbable_default=__webpack_require__.n(tabbable),omit=__webpack_require__(62),omit_default=__webpack_require__.n(omit),focus_trap=__webpack_require__(1135),portal=__webpack_require__(1823),IconClose=__webpack_require__(134);function ModalDialog_typeof(obj){return(ModalDialog_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ModalDialog_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function ModalDialog_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function ModalDialog_extends(){return(ModalDialog_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function ModalDialog_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function ModalDialog_getPrototypeOf(o){return(ModalDialog_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function ModalDialog_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function ModalDialog_setPrototypeOf(o,p){return(ModalDialog_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function ModalDialog_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ModalDialog_messages=Object(index_es.f)({closeModalText:{id:"boxui.modalDialog.closeModalText",defaultMessage:"Close Modal"}}),ModalDialog_ref=react.createElement(IconClose.a,{color:"#909090",height:18,width:18}),ModalDialog_ModalDialog=function(_React$Component){function ModalDialog(){var _getPrototypeOf2,_this;!function ModalDialog_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ModalDialog);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function ModalDialog_possibleConstructorReturn(self,call){return!call||"object"!==ModalDialog_typeof(call)&&"function"!=typeof call?ModalDialog_assertThisInitialized(self):call}(this,(_getPrototypeOf2=ModalDialog_getPrototypeOf(ModalDialog)).call.apply(_getPrototypeOf2,[this].concat(args))),ModalDialog_defineProperty(ModalDialog_assertThisInitialized(_this),"onCloseButtonClick",(function(event){var onRequestClose=_this.props.onRequestClose;onRequestClose&&onRequestClose(event)})),ModalDialog_defineProperty(ModalDialog_assertThisInitialized(_this),"modalID",uniqueId_default()("modal")),_this}return function ModalDialog_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&ModalDialog_setPrototypeOf(subClass,superClass)}(ModalDialog,_React$Component),function ModalDialog_createClass(Constructor,protoProps,staticProps){return protoProps&&ModalDialog_defineProperties(Constructor.prototype,protoProps),staticProps&&ModalDialog_defineProperties(Constructor,staticProps),Constructor}(ModalDialog,[{key:"renderCloseButton",value:function renderCloseButton(){var _this$props=this.props,closeButtonProps=_this$props.closeButtonProps,onRequestClose=_this$props.onRequestClose,formatMessage=_this$props.intl.formatMessage;return onRequestClose?react.createElement("button",ModalDialog_extends({},closeButtonProps,{"aria-label":formatMessage(ModalDialog_messages.closeModalText),className:"modal-close-button",onClick:this.onCloseButtonClick}),ModalDialog_ref):null}},{key:"renderContent",value:function renderContent(){var _this$props2=this.props,children=_this$props2.children;if("alert"!==_this$props2.type)return react.createElement("div",{className:"modal-content"},children);var elements=react.Children.toArray(children);if(2!==elements.length)throw new Error("Alert modal must have exactly two children: A message and <ModalActions>");return react.createElement("div",{className:"modal-content"},react.createElement("p",{id:"".concat(this.modalID,"-desc")},elements[0]),elements[1])}},{key:"render",value:function render(){var _this$props3=this.props,className=_this$props3.className,modalRef=_this$props3.modalRef,title=_this$props3.title,type=_this$props3.type,rest=ModalDialog_objectWithoutProperties(_this$props3,["className","modalRef","title","type"]),isAlertType="alert"===type,divProps=omit_default()(rest,["children","closeButtonProps","onRequestClose","intl"]);return divProps.role=isAlertType?"alertdialog":"dialog",divProps["aria-labelledby"]="".concat(this.modalID,"-label"),isAlertType&&(divProps["aria-describedby"]="".concat(this.modalID,"-desc")),react.createElement("div",ModalDialog_extends({ref:modalRef,className:classnames_default()("modal-dialog",className)},divProps),react.createElement("div",{className:"modal-header"},react.createElement("h2",{className:"modal-title",id:"".concat(this.modalID,"-label")},title)),this.renderCloseButton(),this.renderContent())}}]),ModalDialog}(react.Component);ModalDialog_ModalDialog.displayName="ModalDialog",ModalDialog_defineProperty(ModalDialog_ModalDialog,"defaultProps",{type:"dialog",closeButtonProps:{}}),ModalDialog_ModalDialog.__docgenInfo={description:"",methods:[{name:"onCloseButtonClick",docblock:"Handles clicking on the close button\n@param {SyntheticMouseEvent} event\n@return {void}",modifiers:[],params:[{name:"event",description:null,type:{name:"SyntheticMouseEvent",elements:[{name:"HTMLButtonElement"}],raw:"SyntheticMouseEvent<HTMLButtonElement>",alias:"SyntheticMouseEvent"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Handles clicking on the close button"},{name:"renderCloseButton",docblock:"Renders a button if onRequestClose is passed in\n@return {ReactElement|null} - Returns the button, or null if the button shouldn't be rendered",modifiers:[],params:[],returns:{description:"Returns the button, or null if the button shouldn't be rendered",type:{name:"union",elements:[{name:"ReactElement"},null]}},description:"Renders a button if onRequestClose is passed in"},{name:"renderContent",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ModalDialog",props:{type:{defaultValue:{value:"'dialog'",computed:!1},required:!1,flowType:{name:"union",raw:"'alert' | 'dialog'",elements:[{name:"literal",value:"'alert'"},{name:"literal",value:"'dialog'"}]},description:""},closeButtonProps:{defaultValue:{value:"{}",computed:!1},required:!1,flowType:{name:"Object"},description:""},children:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:""},className:{required:!1,flowType:{name:"string"},description:""},intl:{required:!0,flowType:{name:"Object"},description:""},modalRef:{required:!1,flowType:{name:"Function"},description:""},onRequestClose:{required:!1,flowType:{name:"Function"},description:""},title:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:""}}};var modal_ModalDialog=Object(index_es.g)(ModalDialog_ModalDialog);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/modal/ModalDialog.js"]={name:"ModalDialog",docgenInfo:ModalDialog_ModalDialog.__docgenInfo,path:"src/components/modal/ModalDialog.js"});__webpack_require__(3422);function Modal_typeof(obj){return(Modal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Modal_extends(){return(Modal_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function Modal_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function Modal_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function Modal_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function Modal_getPrototypeOf(o){return(Modal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function Modal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Modal_setPrototypeOf(o,p){return(Modal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Modal_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var Modal_ref=react.createElement(loading_indicator.b,{size:"large"}),Modal_Modal=function(_React$Component){function Modal(){var _getPrototypeOf2,_this;!function Modal_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Modal);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function Modal_possibleConstructorReturn(self,call){return!call||"object"!==Modal_typeof(call)&&"function"!=typeof call?Modal_assertThisInitialized(self):call}(this,(_getPrototypeOf2=Modal_getPrototypeOf(Modal)).call.apply(_getPrototypeOf2,[this].concat(args))),Modal_defineProperty(Modal_assertThisInitialized(_this),"onKeyDown",(function(event){var _this$props=_this.props,isOpen=_this$props.isOpen,onRequestClose=_this$props.onRequestClose;isOpen&&onRequestClose&&"Escape"===event.key&&(event.stopPropagation(),onRequestClose(event))})),Modal_defineProperty(Modal_assertThisInitialized(_this),"onBackdropClick",(function(event){var _this$props2=_this.props,onRequestClose=_this$props2.onRequestClose,onBackdropClick=_this$props2.onBackdropClick;onBackdropClick?onBackdropClick(event):onRequestClose&&onRequestClose(event)})),Modal_defineProperty(Modal_assertThisInitialized(_this),"onModalOpen",(function(){setTimeout((function(){var focusElementSelector=_this.props.focusElementSelector,focusElementSelectorTrimmed=focusElementSelector&&focusElementSelector.trim();focusElementSelectorTrimmed?_this.focusElement(focusElementSelectorTrimmed):_this.focusFirstUsefulElement()}),0)})),Modal_defineProperty(Modal_assertThisInitialized(_this),"focusFirstUsefulElement",(function(){if(_this.dialog){var tabbableEls=tabbable_default()(_this.dialog);1<tabbableEls.length?tabbableEls[1].focus():0<tabbableEls.length&&tabbableEls[0].focus()}})),Modal_defineProperty(Modal_assertThisInitialized(_this),"focusElement",(function(elementSelector){if(_this.dialog){var el=_this.dialog.querySelector(elementSelector);if(!el)throw new Error("Could not find element matching selector ".concat(elementSelector," to focus on."));el.focus()}})),_this}return function Modal_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Modal_setPrototypeOf(subClass,superClass)}(Modal,_React$Component),function Modal_createClass(Constructor,protoProps,staticProps){return protoProps&&Modal_defineProperties(Constructor.prototype,protoProps),staticProps&&Modal_defineProperties(Constructor,staticProps),Constructor}(Modal,[{key:"componentDidMount",value:function componentDidMount(){this.props.isOpen&&this.onModalOpen()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _this$props3=this.props,isLoading=_this$props3.isLoading,isOpen=_this$props3.isOpen;(!prevProps.isOpen||prevProps.isLoading)&&isOpen&&!isLoading&&this.onModalOpen()}},{key:"render",value:function render(){var _this2=this,_this$props4=this.props,className=_this$props4.className,isLoading=_this$props4.isLoading,isOpen=_this$props4.isOpen,onRequestClose=_this$props4.onRequestClose,shouldNotUsePortal=_this$props4.shouldNotUsePortal,style=_this$props4.style,rest=Modal_objectWithoutProperties(_this$props4,["className","isLoading","isOpen","onRequestClose","shouldNotUsePortal","style"]);if(!isOpen)return null;var modalProps=omit_default()(rest,["onBackdropClick","focusElementSelector"]),WrapperComponent=shouldNotUsePortal?"div":portal.a;return react.createElement(WrapperComponent,{className:classnames_default()("modal",className),onKeyDown:this.onKeyDown,tabIndex:"-1"},react.createElement("div",{className:"modal-backdrop",onClick:this.onBackdropClick,style:style.backdrop}),react.createElement(focus_trap.a,{className:"modal-dialog-container"},isLoading?Modal_ref:react.createElement(modal_ModalDialog,Modal_extends({modalRef:function modalRef(modalEl){_this2.dialog=modalEl},onRequestClose:onRequestClose,style:style.dialog},modalProps))),react.createElement("style",{type:"text/css"},"\n            body {\n                overflow:hidden;\n            }\n        "))}}]),Modal}(react.Component);Modal_Modal.displayName="Modal",Modal_defineProperty(Modal_Modal,"defaultProps",{style:{backdrop:{},dialog:{}}}),Modal_Modal.__docgenInfo={description:"",methods:[{name:"onKeyDown",docblock:"Call props.onRequestClose when escape is pressed\n@param {SyntheticKeyboardEvent} event",modifiers:[],params:[{name:"event",description:null,type:{name:"SyntheticKeyboardEvent",elements:[],raw:"SyntheticKeyboardEvent<>",alias:"SyntheticKeyboardEvent"},optional:!1}],returns:null,description:"Call props.onRequestClose when escape is pressed"},{name:"onBackdropClick",docblock:"Call props.onRequestClose when backdrop is clicked\n@param {SyntheticMouseEvent} event",modifiers:[],params:[{name:"event",description:null,type:{name:"SyntheticMouseEvent",elements:[{name:"HTMLDivElement"}],raw:"SyntheticMouseEvent<HTMLDivElement>",alias:"SyntheticMouseEvent"},optional:!1}],returns:null,description:"Call props.onRequestClose when backdrop is clicked"},{name:"onModalOpen",docblock:"Focuses on the correct element in the popup when it opens",modifiers:[],params:[],returns:null,description:"Focuses on the correct element in the popup when it opens"},{name:"focusFirstUsefulElement",docblock:"Focus the first useful element in the modal (i.e. not the close button, unless it's the only thing)",modifiers:[],params:[],returns:null,description:"Focus the first useful element in the modal (i.e. not the close button, unless it's the only thing)"},{name:"focusElement",docblock:"Focus the element that matches the selector in the modal\n@throws {Error} When the elementSelector does not match any element",modifiers:[],params:[{name:"elementSelector",type:{name:"string"}}],returns:null,description:"Focus the element that matches the selector in the modal"}],displayName:"Modal",props:{style:{defaultValue:{value:"{\n    backdrop: {},\n    dialog: {},\n}",computed:!1},required:!1,flowType:{name:"signature",type:"object",raw:"{\n    backdrop?: Object,\n    dialog?: Object,\n}",signature:{properties:[{key:"backdrop",value:{name:"Object",required:!1}},{key:"dialog",value:{name:"Object",required:!1}}]}},description:""},children:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:""},className:{required:!1,flowType:{name:"string"},description:"Additional CSS classname of the `.modal` element"},focusElementSelector:{required:!1,flowType:{name:"string"},description:""},isLoading:{required:!1,flowType:{name:"boolean"},description:""},isOpen:{required:!1,flowType:{name:"boolean"},description:""},onBackdropClick:{required:!1,flowType:{name:"Function"},description:""},onRequestClose:{required:!1,flowType:{name:"Function"},description:"`(event) => {}`. `event` can be of type `SyntheticKeyboardEvent|SyntheticMouseEvent`."},shouldNotUsePortal:{required:!1,flowType:{name:"boolean"},description:"modal usually use Portal as Portal stays if parent is removed, but it cannot retain DOM tree's resin props"},title:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:""}}};var components_modal_Modal=Modal_Modal;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/modal/Modal.js"]={name:"Modal",docgenInfo:Modal_Modal.__docgenInfo,path:"src/components/modal/Modal.js"});__webpack_require__(560),__webpack_require__(1855);var task_form_messages=Object(index_es.f)({taskCreateErrorTitle:{id:"be.contentSidebar.activityFeed.taskForm.taskCreateErrorTitle",defaultMessage:"Error"},taskEditWarningTitle:{id:"be.contentSidebar.activityFeed.taskForm.taskEditWarningTitle",defaultMessage:"Task Updated with Errors"},taskUpdateErrorMessage:{id:"be.contentSidebar.activityFeed.taskForm.taskUpdateErrorMessage",defaultMessage:"An error occurred while modifying this task. Please try again."},taskApprovalAssigneeRemovalWarningMessage:{id:"be.contentSidebar.activityFeed.taskForm.taskApprovalAssigneeRemovalWarningMessage",defaultMessage:"Unable to remove assignee(s) because the task is now approved."},taskGeneralAssigneeRemovalWarningMessage:{id:"be.contentSidebar.activityFeed.taskForm.taskGeneralAssigneeRemovalWarningMessage",defaultMessage:"Unable to remove assignee(s) because the task is now completed."},tasksAddTaskFormSelectAssigneesLabel:{id:"be.contentSidebar.activityFeed.taskForm.tasksAddTaskFormSelectAssigneesLabel",defaultMessage:"Select Assignees"},tasksAddTaskFormMessageLabel:{id:"be.contentSidebar.activityFeed.taskForm.tasksAddTaskFormMessageLabel",defaultMessage:"Message"},tasksAddTaskFormDueDateLabel:{id:"be.contentSidebar.activityFeed.taskForm.tasksAddTaskFormDueDateLabel",defaultMessage:"Due Date"},tasksAddTaskFormSubmitLabel:{id:"be.contentSidebar.activityFeed.taskForm.tasksAddTaskFormSubmitLabel",defaultMessage:"Create"},tasksEditTaskFormSubmitLabel:{id:"be.contentSidebar.activityFeed.taskForm.tasksEditTaskFormSubmitLabel",defaultMessage:"Update"},tasksAddTaskFormCancelLabel:{id:"be.contentSidebar.activityFeed.taskForm.tasksAddTaskFormCancelLabel",defaultMessage:"Cancel"},taskAnyCheckboxLabel:{id:"be.contentSidebar.activityFeed.taskForm.taskAnyCheckboxLabel",defaultMessage:"Only one assignee is required to complete this task"},taskAnyInfoTooltip:{id:"be.contentSidebar.activityFeed.taskForm.taskAnyInfoTooltip",defaultMessage:"By default, all assignees are required to take action before a task is complete. Selecting this option will require only one assignee to complete this task."}});__webpack_require__(3423);function ContactDatalistItem_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function ContactDatalistItem_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var ContactDatalistItem_ContactDatalistItem=function(_ref){var name=_ref.name,subtitle=_ref.subtitle,rest=ContactDatalistItem_objectWithoutProperties(_ref,["name","subtitle"]);return react.createElement(datalist_item.a,rest,react.createElement("div",{className:"contact-text contact-name"},name),subtitle&&react.createElement("div",{className:"contact-text contact-sub-name"},subtitle))};ContactDatalistItem_ContactDatalistItem.displayName="ContactDatalistItem",ContactDatalistItem_ContactDatalistItem.__docgenInfo={description:"",methods:[],displayName:"ContactDatalistItem",props:{name:{required:!0,flowType:{name:"string",nullable:!0},description:""},subtitle:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:""}}};var contact_datalist_item_ContactDatalistItem=ContactDatalistItem_ContactDatalistItem;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/contact-datalist-item/ContactDatalistItem.js"]={name:"ContactDatalistItem",docgenInfo:ContactDatalistItem_ContactDatalistItem.__docgenInfo,path:"src/components/contact-datalist-item/ContactDatalistItem.js"});__webpack_require__(3424);function TextArea_extends(){return(TextArea_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function TextArea_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function TextArea_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var TextArea_TextArea=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,error=_ref.error,hideLabel=_ref.hideLabel,hideOptionalLabel=_ref.hideOptionalLabel,isRequired=_ref.isRequired,isResizable=_ref.isResizable,label=_ref.label,textareaRef=_ref.textareaRef,rest=TextArea_objectWithoutProperties(_ref,["className","error","hideLabel","hideOptionalLabel","isRequired","isResizable","label","textareaRef"]),hasError=!!error,classes=classnames_default()(className,"text-area-container",{"show-error":hasError}),errorMessageID=react.useRef(uniqueId_default()("errorMessage")).current;return react.createElement("div",{className:classes},react.createElement(components_label.a,{hideLabel:hideLabel,showOptionalText:!hideOptionalLabel&&!isRequired,text:label},react.createElement(components_tooltip.a,{isShown:hasError,position:"bottom-left",text:error||"",theme:"error"},react.createElement("textarea",TextArea_extends({ref:textareaRef,required:isRequired,style:{resize:isResizable?"":"none"}},{"aria-invalid":hasError,"aria-required":isRequired,"aria-errormessage":errorMessageID},rest))),react.createElement("span",{id:errorMessageID,className:"accessibility-hidden",role:"alert"},error)))};TextArea_TextArea.displayName="TextArea",TextArea_TextArea.displayName="TextArea",TextArea_TextArea.__docgenInfo={description:"",methods:[],displayName:"TextArea",props:{className:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},error:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:""},hideLabel:{required:!1,flowType:{name:"boolean"},description:"Hides the label"},hideOptionalLabel:{required:!1,flowType:{name:"boolean"},description:"Hides (optional) text from the label"},isRequired:{required:!1,flowType:{name:"boolean"},description:"Makes the text area value required"},isResizable:{required:!1,flowType:{name:"boolean"},description:"Is text area resizable"},label:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:"Label displayed for the text area"},textareaRef:{required:!1,flowType:{name:"Function"},description:""}}};var text_area_TextArea=TextArea_TextArea;function TextAreaField_extends(){return(TextAreaField_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function TextAreaField_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function TextAreaField_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/text-area/TextArea.js"]={name:"TextArea",docgenInfo:TextArea_TextArea.__docgenInfo,path:"src/components/text-area/TextArea.js"});var TextAreaField=function(_ref){var field=_ref.field,form=_ref.form,innerRef=_ref.innerRef,isRequired=_ref.isRequired,rest=TextAreaField_objectWithoutProperties(_ref,["field","form","innerRef","isRequired"]),name=field.name,errors=form.errors,touched=form.touched,error=get_default()(touched,name)?get_default()(errors,name):null;return react.createElement(text_area_TextArea,TextAreaField_extends({},field,rest,{textareaRef:innerRef,error:error,hideOptionalLabel:isRequired}))};TextAreaField.displayName="TextAreaField",TextAreaField.__docgenInfo={description:"",methods:[],displayName:"TextAreaField",props:{innerRef:{required:!1,flowType:{name:"signature",type:"function",raw:"(instance: any) => void",signature:{arguments:[{name:"instance",type:{name:"any"}}],return:{name:"void"}}},description:""}}};"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/text-area/TextAreaField.js"]={name:"TextAreaField",docgenInfo:TextAreaField.__docgenInfo,path:"src/components/text-area/TextAreaField.js"});var DatePicker=__webpack_require__(1134),IconInfo=__webpack_require__(1118),CheckboxTooltip_messages=Object(index_es.f)({checkboxTooltipIconInfoText:{id:"boxui.checkboxTooltip.iconInfoText",defaultMessage:"Info"}}),CheckboxTooltip=function(_ref){var label=_ref.label,tooltip=_ref.tooltip;return react.createElement("div",{className:"checkbox-tooltip-wrapper"},label,react.createElement(components_tooltip.a,{text:tooltip},react.createElement("div",{className:"info-tooltip"},react.createElement(IconInfo.a,{height:16,title:react.createElement(index_es.b,CheckboxTooltip_messages.checkboxTooltipIconInfoText),width:16}))))};CheckboxTooltip.displayName="CheckboxTooltip",CheckboxTooltip.__docgenInfo={description:"",methods:[],displayName:"CheckboxTooltip",props:{label:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:""},tooltip:{required:!0,flowType:{name:"string"},description:""}}};var checkbox_CheckboxTooltip=CheckboxTooltip;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/checkbox/CheckboxTooltip.js"]={name:"CheckboxTooltip",docgenInfo:CheckboxTooltip.__docgenInfo,path:"src/components/checkbox/CheckboxTooltip.js"});__webpack_require__(3425);function Checkbox_extends(){return(Checkbox_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function Checkbox_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function Checkbox_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var Checkbox_ref2=react.createElement("span",{className:"checkbox-pointer-target"}),Checkbox_Checkbox=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,description=_ref.description,fieldLabel=_ref.fieldLabel,hideLabel=_ref.hideLabel,id=_ref.id,isChecked=_ref.isChecked,isDisabled=_ref.isDisabled,label=_ref.label,name=_ref.name,onChange=_ref.onChange,subsection=_ref.subsection,tooltip=_ref.tooltip,rest=Checkbox_objectWithoutProperties(_ref,["className","description","fieldLabel","hideLabel","id","isChecked","isDisabled","label","name","onChange","subsection","tooltip"]),checkboxLabel=react.createElement("label",{className:"checkbox-label"},react.createElement("input",Checkbox_extends({checked:isChecked,disabled:isDisabled,id:id,name:name,onChange:onChange,type:"checkbox"},rest)),Checkbox_ref2,react.createElement("span",{className:hideLabel?"accessibility-hidden":""},label));return react.createElement("div",{className:"checkbox-container ".concat(className," ").concat(isDisabled?"is-disabled":"")},fieldLabel&&react.createElement("div",{className:"label"},fieldLabel),tooltip?react.createElement(checkbox_CheckboxTooltip,{label:checkboxLabel,tooltip:tooltip}):checkboxLabel,description?react.createElement("div",{className:"checkbox-description"},description):null,subsection?react.createElement("div",{className:"checkbox-subsection"},subsection):null)};Checkbox_Checkbox.displayName="Checkbox",Checkbox_Checkbox.__docgenInfo={description:"",methods:[],displayName:"Checkbox",props:{className:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},description:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:"Description to the checkbox"},fieldLabel:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:"Label for the field shown on top of the checkbox"},hideLabel:{required:!1,flowType:{name:"boolean"},description:"Hides the checkbox label when true"},id:{required:!1,flowType:{name:"string"},description:"Unique `id` for the input"},isChecked:{required:!1,flowType:{name:"boolean"},description:"Checkbox checked state"},isDisabled:{required:!1,flowType:{name:"boolean"},description:"Checkbox disabled state"},label:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:"Label displayed for the input"},name:{required:!0,flowType:{name:"string"},description:"Name of the input"},onBlur:{required:!1,flowType:{name:"signature",type:"function",raw:"(e: SyntheticInputEvent<HTMLInputElement>) => any",signature:{arguments:[{name:"e",type:{name:"SyntheticInputEvent",elements:[{name:"HTMLInputElement"}],raw:"SyntheticInputEvent<HTMLInputElement>"}}],return:{name:"any"}}},description:"blur callback function called with event as the argument"},onChange:{required:!1,flowType:{name:"signature",type:"function",raw:"(e: SyntheticInputEvent<HTMLInputElement>) => any",signature:{arguments:[{name:"e",type:{name:"SyntheticInputEvent",elements:[{name:"HTMLInputElement"}],raw:"SyntheticInputEvent<HTMLInputElement>"}}],return:{name:"any"}}},description:"change callback function called with event as the argument"},subsection:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:"Subsection below the checkbox"},tooltip:{required:!1,flowType:{name:"string"},description:"Info tooltip text next to the checkbox label"},value:{required:!1,flowType:{name:"any"},description:"optional value for the checkbox"}}};var checkbox_Checkbox=Checkbox_Checkbox;function CheckboxField_extends(){return(CheckboxField_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function CheckboxField_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function CheckboxField_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/checkbox/Checkbox.js"]={name:"Checkbox",docgenInfo:Checkbox_Checkbox.__docgenInfo,path:"src/components/checkbox/Checkbox.js"});var CheckboxField=function(_ref){var field=_ref.field,rest=(_ref.form,CheckboxField_objectWithoutProperties(_ref,["field","form"])),value=field.value;return react.createElement(checkbox_Checkbox,CheckboxField_extends({},field,rest,{isChecked:!!value}))};CheckboxField.displayName="CheckboxField",CheckboxField.__docgenInfo={description:"",methods:[],displayName:"CheckboxField"};"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/checkbox/CheckboxField.js"]={name:"CheckboxField",docgenInfo:CheckboxField.__docgenInfo,path:"src/components/checkbox/CheckboxField.js"});var PillSelectorDropdown=__webpack_require__(780),api_messages=__webpack_require__(208),InlineNotice=__webpack_require__(1129),TaskError=function(_ref){var editMode=_ref.editMode,error=_ref.error,taskType=_ref.taskType,isEditMode=editMode===constants.Je,isForbiddenErrorOnEdit=403===get_default()(error,"status")&&isEditMode,errorTitle=isForbiddenErrorOnEdit?task_form_messages.taskEditWarningTitle:task_form_messages.taskCreateErrorTitle,errorMessage=isEditMode?task_form_messages.taskUpdateErrorMessage:api_messages.a.taskCreateErrorMessage;if(!error)return null;if(isForbiddenErrorOnEdit)switch(taskType){case"GENERAL":errorMessage=task_form_messages.taskGeneralAssigneeRemovalWarningMessage;break;case"APPROVAL":errorMessage=task_form_messages.taskApprovalAssigneeRemovalWarningMessage;break;default:return null}return react.createElement(InlineNotice.a,{type:"error",title:react.createElement(index_es.b,errorTitle)},react.createElement(index_es.b,errorMessage))};TaskError.displayName="TaskError",TaskError.__docgenInfo={description:"",methods:[],displayName:"TaskError",props:{editMode:{required:!1,flowType:{name:"TaskEditMode"},description:""},error:{required:!1,flowType:{name:"signature",type:"object",raw:"{ status: number }",signature:{properties:[{key:"status",value:{name:"number",required:!0}}]}},description:""},taskType:{required:!0,flowType:{name:"TaskType"},description:""}}};var task_form_TaskError=TaskError;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/task-form/TaskError.js"]={name:"TaskError",docgenInfo:TaskError.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/task-form/TaskError.js"});__webpack_require__(3426);function TaskForm_typeof(obj){return(TaskForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function TaskForm_extends(){return(TaskForm_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function TaskForm_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function TaskForm_getPrototypeOf(o){return(TaskForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function TaskForm_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function TaskForm_setPrototypeOf(o,p){return(TaskForm_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function TaskForm_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function TaskForm_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?TaskForm_ownKeys(Object(source),!0).forEach((function(key){TaskForm_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):TaskForm_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function TaskForm_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function convertAssigneesToSelectorItems(approvers){return approvers.map((function(_ref){var target=_ref.target;return TaskForm_objectSpread({},target,{item:{},value:target.id,text:target.name})}))}var TaskForm_TaskForm=function(_React$Component){function TaskForm(){var _getPrototypeOf2,_this;!function TaskForm_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TaskForm);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function TaskForm_possibleConstructorReturn(self,call){return!call||"object"!==TaskForm_typeof(call)&&"function"!=typeof call?TaskForm_assertThisInitialized(self):call}(this,(_getPrototypeOf2=TaskForm_getPrototypeOf(TaskForm)).call.apply(_getPrototypeOf2,[this].concat(args))),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"state",_this.getInitialFormState()),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"validateForm",(function(only){_this.setState((function(state){var intl=_this.props.intl,approvers=state.approvers,message=state.message,approverTextInput=state.approverTextInput,assigneeFieldMissingError={code:"required",message:intl.formatMessage(common_messages.a.requiredFieldError)},assigneeFieldInvalidError={code:"invalid",message:intl.formatMessage(common_messages.a.invalidUserError)},messageFieldError={code:"required",message:intl.formatMessage(common_messages.a.requiredFieldError)},formValidityState={taskAssignees:(approverTextInput.length?assigneeFieldInvalidError:null)||(approvers.length?null:assigneeFieldMissingError),taskName:message?null:messageFieldError,taskDueDate:null};return{isValid:Object.values(formValidityState).every((function(val){return null==val})),formValidityState:only?TaskForm_objectSpread({},state.formValidityState,TaskForm_defineProperty({},only,formValidityState[only])):formValidityState}}))})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"getErrorByFieldname",(function(fieldName){var formValidityState=_this.state.formValidityState;return formValidityState[fieldName]?formValidityState[fieldName].message:null})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"clearForm",(function(){return _this.setState(_this.getInitialFormState())})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleInvalidSubmit",(function(){_this.validateForm()})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleSubmitSuccess",(function(){var onSubmitSuccess=_this.props.onSubmitSuccess;onSubmitSuccess&&onSubmitSuccess(),_this.clearForm(),_this.setState({isLoading:!1})})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleSubmitError",(function(e){(0,_this.props.onSubmitError)(e),_this.setState({isLoading:!1})})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"addResinInfo",(function(){var _this$props=_this.props,id=_this$props.id,taskType=_this$props.taskType,editMode=_this$props.editMode,dueDate=_this.state.dueDate,addedAssignees=_this.getAddedAssignees(),removedAssignees=_this.getRemovedAssignees();return{"data-resin-taskid":id,"data-resin-tasktype":taskType,"data-resin-isediting":editMode===constants.Je,"data-resin-numassigneesadded":addedAssignees.length,"data-resin-numassigneesremoved":removedAssignees.length,"data-resin-assigneesadded":addedAssignees.map((function(assignee){return assignee.target.id})),"data-resin-assigneesremoved":removedAssignees.map((function(assignee){return assignee.target.id})),"data-resin-duedate":dueDate&&dueDate.getTime()}})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"getAddedAssignees",(function(){var approvers=_this.props.approvers,currentApprovers=_this.state.approvers,approverIds=approvers.map((function(approver){return approver.id}));return currentApprovers.filter((function(currentApprover){return-1===approverIds.indexOf(currentApprover.id)}))})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"getRemovedAssignees",(function(){var approvers=_this.props.approvers,currentApproverIds=_this.state.approvers.map((function(currentApprover){return currentApprover.id}));return approvers.filter((function(approver){return-1===currentApproverIds.indexOf(approver.id)}))})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleValidSubmit",(function(){var _this$props2=_this.props,id=_this$props2.id,createTask=_this$props2.createTask,editTask=_this$props2.editTask,editMode=_this$props2.editMode,taskType=_this$props2.taskType,_this$state=_this.state,message=_this$state.message,currentApprovers=_this$state.approvers,dueDate=_this$state.dueDate,completionRule=_this$state.completionRule,isValid=_this$state.isValid,dueDateString=dueDate&&dueDate.toISOString();isValid&&(_this.setState({isLoading:!0}),editMode===constants.Je&&editTask?editTask({id:id,completion_rule:completionRule,description:message,due_at:dueDateString,addedAssignees:convertAssigneesToSelectorItems(_this.getAddedAssignees()),removedAssignees:_this.getRemovedAssignees()},_this.handleSubmitSuccess,_this.handleSubmitError):createTask(message,convertAssigneesToSelectorItems(currentApprovers),taskType,dueDateString,completionRule,_this.handleSubmitSuccess,_this.handleSubmitError))})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleDueDateChange",(function(date){var dateValue=null;date&&(dateValue=new Date(date)).setHours(23,59,59,999),_this.setState({dueDate:dateValue}),_this.validateForm("taskDueDate")})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleCompletionRuleChange",(function(event){_this.setState({completionRule:event.target.checked?constants.He:constants.Ge})})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleApproverSelectorInput",(function(value){var _this$props$getApprov=_this.props.getApproverWithQuery,getApproverWithQuery=void 0===_this$props$getApprov?noop_default.a:_this$props$getApprov;_this.setState({approverTextInput:value}),getApproverWithQuery(value)})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleApproverSelectorSelect",(function(pills){_this.setState({approvers:_this.state.approvers.concat(pills.map((function(pill){return{id:"",target:{id:pill.id,name:pill.text,type:"user"},role:"ASSIGNEE",type:"task_collaborator",status:"NOT_STARTED",permissions:{can_delete:!1,can_update:!1}}}))),approverTextInput:""}),_this.validateForm("taskAssignees")})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleApproverSelectorRemove",(function(option,index){var approvers=_toConsumableArray(_this.state.approvers);approvers.splice(index,1),_this.setState({approvers:approvers}),_this.validateForm("taskAssignees")})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleChangeMessage",(function(e){e.persist(),_this.setState({message:e.currentTarget.value}),_this.validateForm("taskName")})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleCancelClick",(function(){_this.props.onCancel()})),_this}return function TaskForm_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&TaskForm_setPrototypeOf(subClass,superClass)}(TaskForm,_React$Component),function TaskForm_createClass(Constructor,protoProps,staticProps){return protoProps&&TaskForm_defineProperties(Constructor.prototype,protoProps),staticProps&&TaskForm_defineProperties(Constructor,staticProps),Constructor}(TaskForm,[{key:"getInitialFormState",value:function getInitialFormState(){var _this$props3=this.props,dueDate=_this$props3.dueDate,id=_this$props3.id,message=_this$props3.message,approvers=_this$props3.approvers;return{id:id,completionRule:_this$props3.completionRule||constants.Ge,approvers:approvers,approverTextInput:"",dueDate:dueDate?new Date(dueDate):null,formValidityState:{},message:message,isLoading:!1,isValid:null}}},{key:"render",value:function render(){var _ref6,_this2=this,_this$props4=this.props,approverSelectorContacts=_this$props4.approverSelectorContacts,className=_this$props4.className,error=_this$props4.error,isDisabled=_this$props4.isDisabled,intl=_this$props4.intl,editMode=_this$props4.editMode,taskType=_this$props4.taskType,_this$state2=this.state,dueDate=_this$state2.dueDate,approvers=_this$state2.approvers,message=_this$state2.message,formValidityState=_this$state2.formValidityState,isLoading=_this$state2.isLoading,completionRule=_this$state2.completionRule,inputContainerClassNames=classnames_default()("bcs-task-input-container","bcs-task-input-is-open",className),isCreateEditMode=editMode===constants.Ie,renderApprovers=convertAssigneesToSelectorItems(approvers),approverOptions=approverSelectorContacts.filter((function(_ref2){var id=_ref2.id;return!renderApprovers.find((function(_ref3){return _ref3.value===id}))})).map((function(_ref4){var id=_ref4.id,item=_ref4.item;return TaskForm_objectSpread({},item,{text:item.name,value:id})})),pillSelectorOverlayClasses=classnames_default()({scrollable:4<approverOptions.length}),submitButtonMessage=isCreateEditMode?task_form_messages.tasksAddTaskFormSubmitLabel:task_form_messages.tasksEditTaskFormSubmitLabel,shouldShowCompletionRule=0<approvers.length,isCompletionRuleCheckboxDisabled=1>=approvers.length,isForbiddenErrorOnEdit=isLoading||403===get_default()(error,"status")&&!isCreateEditMode;return react.createElement("div",{className:inputContainerClassNames,"data-resin-component":"taskform"},react.createElement("div",{className:"bcs-task-input-form-container"},react.createElement(task_form_TaskError,{editMode:editMode,error:error,taskType:taskType}),react.createElement(Form.a,{formValidityState:formValidityState,onInvalidSubmit:this.handleInvalidSubmit,onValidSubmit:this.handleValidSubmit},react.createElement(PillSelectorDropdown.a,{className:pillSelectorOverlayClasses,error:this.getErrorByFieldname("taskAssignees"),disabled:isForbiddenErrorOnEdit,inputProps:{"data-testid":"task-form-assignee-input"},isRequired:!0,label:react.createElement(index_es.b,task_form_messages.tasksAddTaskFormSelectAssigneesLabel),name:"taskAssignees",onBlur:function onBlur(){return _this2.validateForm("taskAssignees")},onInput:this.handleApproverSelectorInput,onRemove:this.handleApproverSelectorRemove,onSelect:this.handleApproverSelectorSelect,placeholder:intl.formatMessage(comment_form_messages.approvalAddAssignee),selectedOptions:renderApprovers,selectorOptions:approverOptions,shouldSetActiveItemOnOpen:!0,shouldClearUnmatchedInput:!0,validateForError:function validateForError(){return _this2.validateForm("taskAssignees")}},approverOptions.map((function(_ref5){var id=_ref5.id,name=_ref5.name,email=_ref5.email;return react.createElement(contact_datalist_item_ContactDatalistItem,{key:id,"data-testid":"task-assignee-option",name:name,subtitle:email})}))),shouldShowCompletionRule&&react.createElement(feature_checking.FeatureFlag,{feature:"activityFeed.tasks.anyTask"},react.createElement(checkbox_Checkbox,{"data-testid":"task-form-completion-rule-checkbox",isChecked:completionRule===constants.He,isDisabled:isCompletionRuleCheckboxDisabled||isForbiddenErrorOnEdit,label:react.createElement(index_es.b,task_form_messages.taskAnyCheckboxLabel),tooltip:intl.formatMessage(task_form_messages.taskAnyInfoTooltip),name:"completionRule",onChange:this.handleCompletionRuleChange})),react.createElement(text_area_TextArea,{className:"bcs-task-name-input","data-testid":"task-form-name-input",disabled:isDisabled||isForbiddenErrorOnEdit,error:this.getErrorByFieldname("taskName"),isRequired:!0,label:react.createElement(index_es.b,task_form_messages.tasksAddTaskFormMessageLabel),name:"taskName",onBlur:function onBlur(){return _this2.validateForm("taskName")},onChange:this.handleChangeMessage,placeholder:intl.formatMessage(comment_form_messages.commentWrite),value:message}),react.createElement(DatePicker.a,{className:"bcs-task-add-due-date-input",error:this.getErrorByFieldname("taskDueDate"),inputProps:(_ref6={},TaskForm_defineProperty(_ref6,interactionTargets.c,interactionTargets.a.TASK_DATE_PICKER),TaskForm_defineProperty(_ref6,"data-testid","task-form-date-input"),_ref6),isDisabled:isForbiddenErrorOnEdit,isRequired:!1,label:react.createElement(index_es.b,task_form_messages.tasksAddTaskFormDueDateLabel),minDate:new Date,name:"taskDueDate",onChange:this.handleDueDateChange,placeholder:intl.formatMessage(comment_form_messages.approvalSelectDate),value:dueDate||void 0}),react.createElement("div",{className:"bcs-task-input-controls"},react.createElement(Button.a,TaskForm_extends({className:"bcs-task-input-cancel-btn","data-resin-target":interactionTargets.a.APPROVAL_FORM_CANCEL,"data-testid":"task-form-cancel-button",onClick:this.handleCancelClick,isDisabled:isLoading,type:"button"},this.addResinInfo()),react.createElement(index_es.b,task_form_messages.tasksAddTaskFormCancelLabel)),react.createElement(PrimaryButton.a,TaskForm_extends({className:"bcs-task-input-submit-btn","data-resin-target":interactionTargets.a.APPROVAL_FORM_POST,"data-testid":"task-form-submit-button",isDisabled:isForbiddenErrorOnEdit,isLoading:isLoading},this.addResinInfo()),react.createElement(index_es.b,submitButtonMessage))))))}}]),TaskForm}(react.Component);TaskForm_TaskForm.displayName="TaskForm",TaskForm_defineProperty(TaskForm_TaskForm,"defaultProps",{approvers:[],approverSelectorContacts:[],editMode:constants.Ie,id:"",message:""}),TaskForm_TaskForm.__docgenInfo={description:"",methods:[{name:"getInitialFormState",docblock:null,modifiers:[],params:[],returns:null},{name:"validateForm",docblock:null,modifiers:[],params:[{name:"only",optional:!0,type:{name:"union",raw:"'taskName' | 'taskAssignees' | 'taskDueDate'",elements:[{name:"literal",value:"'taskName'"},{name:"literal",value:"'taskAssignees'"},{name:"literal",value:"'taskDueDate'"}],alias:"TaskFormFieldName"}}],returns:null},{name:"getErrorByFieldname",docblock:null,modifiers:[],params:[{name:"fieldName",type:{name:"union",raw:"'taskName' | 'taskAssignees' | 'taskDueDate'",elements:[{name:"literal",value:"'taskName'"},{name:"literal",value:"'taskAssignees'"},{name:"literal",value:"'taskDueDate'"}],alias:"TaskFormFieldName"}}],returns:null},{name:"clearForm",docblock:null,modifiers:[],params:[],returns:null},{name:"handleInvalidSubmit",docblock:null,modifiers:[],params:[],returns:null},{name:"handleSubmitSuccess",docblock:null,modifiers:[],params:[],returns:null},{name:"handleSubmitError",docblock:null,modifiers:[],params:[{name:"e",type:{name:"ElementsXhrError",alias:"ElementsXhrError"}}],returns:null},{name:"addResinInfo",docblock:null,modifiers:[],params:[],returns:{type:{name:"Object"}}},{name:"getAddedAssignees",docblock:null,modifiers:[],params:[],returns:{type:{name:"Array",elements:[{name:"TaskCollabAssignee"}],raw:"Array<TaskCollabAssignee>"}}},{name:"getRemovedAssignees",docblock:null,modifiers:[],params:[],returns:{type:{name:"Array",elements:[{name:"TaskCollabAssignee"}],raw:"Array<TaskCollabAssignee>"}}},{name:"handleValidSubmit",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"handleDueDateChange",docblock:null,modifiers:[],params:[{name:"date",type:{name:"string",nullable:!0}}],returns:{type:{name:"void"}}},{name:"handleCompletionRuleChange",docblock:null,modifiers:[],params:[{name:"event",type:{name:"SyntheticInputEvent",elements:[{name:"HTMLInputElement"}],raw:"SyntheticInputEvent<HTMLInputElement>",alias:"SyntheticInputEvent"}}],returns:null},{name:"handleApproverSelectorInput",docblock:null,modifiers:[],params:[{name:"value",type:{name:"any"}}],returns:{type:{name:"void"}}},{name:"handleApproverSelectorSelect",docblock:null,modifiers:[],params:[{name:"pills",type:{name:"Array",elements:[{name:"any"}],raw:"Array<any>",alias:"Array"}}],returns:{type:{name:"void"}}},{name:"handleApproverSelectorRemove",docblock:null,modifiers:[],params:[{name:"option",type:{name:"any"}},{name:"index",type:{name:"number"}}],returns:{type:{name:"void"}}},{name:"handleChangeMessage",docblock:null,modifiers:[],params:[{name:"e",type:{name:"SyntheticInputEvent",elements:[{name:"HTMLTextAreaElement"}],raw:"SyntheticInputEvent<HTMLTextAreaElement>",alias:"SyntheticInputEvent"}}],returns:null},{name:"handleCancelClick",docblock:null,modifiers:[],params:[],returns:null}],displayName:"TaskForm",props:{approvers:{defaultValue:{value:"[]",computed:!1},required:!1,flowType:{name:"Array",elements:[{name:"TaskCollabAssignee"}],raw:"Array<TaskCollabAssignee>"},description:""},approverSelectorContacts:{defaultValue:{value:"[]",computed:!1},required:!1,flowType:{name:"SelectorItems"},description:""},editMode:{defaultValue:{value:"TASK_EDIT_MODE_CREATE",computed:!0},required:!1,flowType:{name:"TaskEditMode"},description:""},id:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},message:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},error:{required:!1,flowType:{name:"signature",type:"object",raw:"{ status: number }",signature:{properties:[{key:"status",value:{name:"number",required:!0}}]}},description:""},isDisabled:{required:!1,flowType:{name:"boolean"},description:""},onCancel:{required:!0,flowType:{name:"signature",type:"function",raw:"() => any",signature:{arguments:[],return:{name:"any"}}},description:""},onSubmitError:{required:!0,flowType:{name:"signature",type:"function",raw:"(e: ElementsXhrError) => any",signature:{arguments:[{name:"e",type:{name:"ElementsXhrError"}}],return:{name:"any"}}},description:""},onSubmitSuccess:{required:!0,flowType:{name:"signature",type:"function",raw:"() => any",signature:{arguments:[],return:{name:"any"}}},description:""},taskType:{required:!0,flowType:{name:"TaskType"},description:""},completionRule:{required:!0,flowType:{name:"TaskCompletionRule"},description:""},dueDate:{required:!1,flowType:{name:"string",nullable:!0},description:""},className:{required:!1,flowType:{name:"string"},description:""},createTask:{required:!0,flowType:{name:"signature",type:"function",raw:"(\n    text: string,\n    approvers: SelectorItems,\n    taskType: TaskType,\n    dueDate: ?string,\n    completionRule: TaskCompletionRule,\n    onSuccess: ?Function,\n    onError: ?Function,\n) => any",signature:{arguments:[{name:"text",type:{name:"string"}},{name:"approvers",type:{name:"SelectorItems"}},{name:"taskType",type:{name:"TaskType"}},{name:"dueDate",type:{name:"string",nullable:!0}},{name:"completionRule",type:{name:"TaskCompletionRule"}},{name:"onSuccess",type:{name:"Function",nullable:!0}},{name:"onError",type:{name:"Function",nullable:!0}}],return:{name:"any"}}},description:""},editTask:{required:!1,flowType:{name:"signature",type:"function",raw:"(task: TaskUpdatePayload, onSuccess: ?Function, onError: ?Function) => any",signature:{arguments:[{name:"task",type:{name:"TaskUpdatePayload"}},{name:"onSuccess",type:{name:"Function",nullable:!0}},{name:"onError",type:{name:"Function",nullable:!0}}],return:{name:"any"}}},description:""},getApproverWithQuery:{required:!1,flowType:{name:"Function"},description:""},getAvatarUrl:{required:!0,flowType:{name:"GetAvatarUrlCallback"},description:""}}};var activity_feed_task_form_TaskForm=Object(index_es.g)(TaskForm_TaskForm);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/task-form/TaskForm.js"]={name:"TaskForm",docgenInfo:TaskForm_TaskForm.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/task-form/TaskForm.js"});var content_sidebar_messages=Object(index_es.f)({tasksAddTask:{id:"be.contentSidebar.addTask",defaultMessage:"Add Task"},taskAddTaskGeneral:{id:"be.contentSidebar.addTask.general",defaultMessage:"General Task"},taskAddTaskGeneralDescription:{id:"be.contentSidebar.addTask.general.description",defaultMessage:"Assignees will be responsible for marking tasks as complete"},taskAddTaskApproval:{id:"be.contentSidebar.addTask.approval",defaultMessage:"Approval Task"},taskAddTaskApprovalDescription:{id:"be.contentSidebar.addTask.approval.description",defaultMessage:"Assignees will be responsible for approving or rejecting tasks"},tasksCreateGeneralTaskFormTitle:{id:"be.contentSidebar.addTask.general.title",defaultMessage:"Create General Task"},tasksCreateApprovalTaskFormTitle:{id:"be.contentSidebar.addTask.approval.title",defaultMessage:"Create Approval Task"},tasksEditApprovalTaskFormTitle:{id:"be.contentSidebar.editTask.approval.title",defaultMessage:"Modify Approval Task"},tasksEditGeneralTaskFormTitle:{id:"be.contentSidebar.editTask.general.title",defaultMessage:"Modify General Task"}});function TaskModal_extends(){return(TaskModal_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function getMessageForModalTitle(taskType,mode){switch(taskType){case constants.Qe:return mode===constants.Ie?content_sidebar_messages.tasksCreateGeneralTaskFormTitle:content_sidebar_messages.tasksEditGeneralTaskFormTitle;case constants.Pe:default:return mode===constants.Ie?content_sidebar_messages.tasksCreateApprovalTaskFormTitle:content_sidebar_messages.tasksEditApprovalTaskFormTitle}}var TaskModal=function(props){var _props$editMode=props.editMode,editMode=void 0===_props$editMode?constants.Ie:_props$editMode,error=props.error,onSubmitError=props.onSubmitError,onSubmitSuccess=props.onSubmitSuccess,onModalClose=props.onModalClose,taskType=props.taskType,isTaskFormOpen=props.isTaskFormOpen,taskFormProps=props.taskFormProps;return react.createElement(components_modal_Modal,{className:"be-modal task-modal","data-testid":"create-task-modal",focusElementSelector:".task-modal textarea, .task-modal input",isOpen:isTaskFormOpen,onRequestClose:onModalClose,title:react.createElement(index_es.b,getMessageForModalTitle(taskType,editMode))},react.createElement("div",{className:"be"},react.createElement(activity_feed_task_form_TaskForm,TaskModal_extends({editMode:editMode,error:error,onCancel:onModalClose,onSubmitError:onSubmitError,onSubmitSuccess:onSubmitSuccess,taskType:taskType},taskFormProps))))};TaskModal.displayName="TaskModal",TaskModal.__docgenInfo={description:"",methods:[],displayName:"TaskModal",props:{editMode:{required:!1,flowType:{name:"TaskEditMode"},description:""},error:{required:!0,flowType:{name:"ElementsXhrError",nullable:!0},description:""},isTaskFormOpen:{required:!0,flowType:{name:"boolean"},description:""},onModalClose:{required:!0,flowType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSubmitError:{required:!0,flowType:{name:"signature",type:"function",raw:"(e: ElementsXhrError) => void",signature:{arguments:[{name:"e",type:{name:"ElementsXhrError"}}],return:{name:"void"}}},description:""},onSubmitSuccess:{required:!0,flowType:{name:"signature",type:"function",raw:"() => any",signature:{arguments:[],return:{name:"any"}}},description:""},taskFormProps:{required:!0,flowType:{name:"TaskFormProps"},description:""},taskType:{required:!0,flowType:{name:"TaskType"},description:""}}};var content_sidebar_TaskModal=TaskModal;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/TaskModal.js"]={name:"TaskModal",docgenInfo:TaskModal.__docgenInfo,path:"src/elements/content-sidebar/TaskModal.js"});__webpack_require__(3427);function Task_typeof(obj){return(Task_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Task_extends(){return(Task_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function Task_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function Task_getPrototypeOf(o){return(Task_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function Task_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Task_setPrototypeOf(o,p){return(Task_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Task_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var Task_ref2=react.createElement(IconPencil.a,{color:variables.bdlGray80}),Task_ref3=react.createElement(IconTrash.a,{color:variables.bdlGray80}),Task_Task=function(_React$Component){function Task(){var _getPrototypeOf2,_this;!function Task_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Task);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function Task_possibleConstructorReturn(self,call){return!call||"object"!==Task_typeof(call)&&"function"!=typeof call?Task_assertThisInitialized(self):call}(this,(_getPrototypeOf2=Task_getPrototypeOf(Task)).call.apply(_getPrototypeOf2,[this].concat(args))),Task_defineProperty(Task_assertThisInitialized(_this),"state",{loadCollabError:void 0,assignedToFull:_this.props.assigned_to,modalError:void 0,isEditing:!1,isLoading:!1,isAssigneeListOpen:!1,isConfirmingDelete:!1}),Task_defineProperty(Task_assertThisInitialized(_this),"handleAssigneeListExpand",(function(){_this.getAllTaskCollaborators((function(){_this.setState({isAssigneeListOpen:!0})}))})),Task_defineProperty(Task_assertThisInitialized(_this),"handleAssigneeListCollapse",(function(){_this.setState({isAssigneeListOpen:!1})})),Task_defineProperty(Task_assertThisInitialized(_this),"handleEditClick",(function(){_this.getAllTaskCollaborators((function(){_this.setState({isEditing:!0})}))})),Task_defineProperty(Task_assertThisInitialized(_this),"handleDeleteClick",(function(){_this.setState({isConfirmingDelete:!0})})),Task_defineProperty(Task_assertThisInitialized(_this),"handleDeleteConfirm",(function(){var _this$props=_this.props,id=_this$props.id,onDelete=_this$props.onDelete,permissions=_this$props.permissions;onDelete&&onDelete({id:id,permissions:permissions})})),Task_defineProperty(Task_assertThisInitialized(_this),"handleDeleteCancel",(function(){_this.setState({isConfirmingDelete:!1})})),Task_defineProperty(Task_assertThisInitialized(_this),"handleEditModalClose",(function(){var onModalClose=_this.props.onModalClose;_this.setState({isEditing:!1,modalError:void 0}),onModalClose&&onModalClose()})),Task_defineProperty(Task_assertThisInitialized(_this),"handleEditSubmitError",(function(error){_this.setState({modalError:error})})),Task_defineProperty(Task_assertThisInitialized(_this),"getAllTaskCollaborators",(function(onSuccess){var _this$props2=_this.props,id=_this$props2.id,api=_this$props2.api,task_links=_this$props2.task_links,assigned_to=_this$props2.assigned_to,errorOccured=messages.a.errorOccured,taskCollaboratorLoadErrorMessage=task_new_messages.taskCollaboratorLoadErrorMessage;if(!assigned_to.next_marker)return _this.setState({assignedToFull:assigned_to}),void onSuccess();var fileId=get_default()(task_links,"entries[0].target.id");fileId&&(_this.setState({isLoading:!0}),api.getTaskCollaboratorsAPI(!1).getTaskCollaborators({task:{id:id},file:{id:fileId},errorCallback:function errorCallback(){_this.setState({isLoading:!1,loadCollabError:{message:taskCollaboratorLoadErrorMessage,title:errorOccured}})},successCallback:function successCallback(assignedToFull){_this.setState({assignedToFull:assignedToFull,isLoading:!1}),onSuccess()}}))})),Task_defineProperty(Task_assertThisInitialized(_this),"handleTaskAction",(function(taskId,assignmentId,taskStatus){var onAssignmentUpdate=_this.props.onAssignmentUpdate;_this.setState({isAssigneeListOpen:!1}),onAssignmentUpdate(taskId,assignmentId,taskStatus)})),_this}return function Task_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Task_setPrototypeOf(subClass,superClass)}(Task,_React$Component),function Task_createClass(Constructor,protoProps,staticProps){return protoProps&&Task_defineProperties(Constructor.prototype,protoProps),staticProps&&Task_defineProperties(Constructor,staticProps),Constructor}(Task,[{key:"render",value:function render(){var taskType,_this2=this,_this$props3=this.props,approverSelectorContacts=_this$props3.approverSelectorContacts,assigned_to=_this$props3.assigned_to,completion_rule=_this$props3.completion_rule,created_at=_this$props3.created_at,created_by=_this$props3.created_by,currentUser=_this$props3.currentUser,due_at=_this$props3.due_at,error=_this$props3.error,features=_this$props3.features,getApproverWithQuery=_this$props3.getApproverWithQuery,getAvatarUrl=_this$props3.getAvatarUrl,getUserProfileUrl=_this$props3.getUserProfileUrl,id=_this$props3.id,isPending=_this$props3.isPending,description=_this$props3.description,onEdit=_this$props3.onEdit,permissions=_this$props3.permissions,status=_this$props3.status,task_type=_this$props3.task_type,translatedTaggedMessage=_this$props3.translatedTaggedMessage,translations=_this$props3.translations,_this$state=this.state,assignedToFull=_this$state.assignedToFull,modalError=_this$state.modalError,isEditing=_this$state.isEditing,isLoading=_this$state.isLoading,loadCollabError=_this$state.loadCollabError,isAssigneeListOpen=_this$state.isAssigneeListOpen,isConfirmingDelete=_this$state.isConfirmingDelete,inlineError=loadCollabError||error,currentUserAssignment=assigned_to&&assigned_to.entries?assigned_to.entries.find((function(_ref){return _ref.target.id===currentUser.id})):null,createdByUser=created_by.target||constants.be,createdAtTimestamp=new Date(created_at).getTime(),shouldShowActions=currentUserAssignment&&currentUserAssignment.permissions&&currentUserAssignment.permissions.can_update&&currentUserAssignment.status===constants.Ne&&(status===constants.Ne||status===constants.Me),TaskTypeIcon=task_type===constants.Pe?two_toned_IconTaskApproval:two_toned_IconTaskGeneral,isMenuVisible=(permissions.can_delete||permissions.can_update)&&!isPending;return react.createElement("div",{className:"bcs-Task"},inlineError?react.createElement(activity_error_ActivityError,inlineError):null,react.createElement(media_Media,{className:classnames_default()("bcs-Task-media",{"bcs-is-pending":isPending||isLoading}),"data-testid":"task-card"},react.createElement(media_Media.Figure,{className:"bcs-Task-avatar"},react.createElement(activity_feed_Avatar,{getAvatarUrl:getAvatarUrl,user:createdByUser}),react.createElement(TaskTypeIcon,{width:20,height:20,className:"bcs-Task-avatarBadge"})),react.createElement(media_Media.Body,null,isMenuVisible&&react.createElement(react_tether_default.a,{attachment:"top right",className:"bcs-Task-deleteConfirmationModal",constraints:[{to:"scrollParent",attachment:"together"}],targetAttachment:"bottom right"},react.createElement(media_Media.Menu,{isDisabled:isConfirmingDelete,"data-testid":"task-actions-menu",menuProps:{"data-resin-component":interactionTargets.a.TASK_OPTIONS}},permissions.can_update&&react.createElement(menu.b,{"data-resin-target":interactionTargets.a.TASK_OPTIONS_EDIT,"data-testid":"edit-task",onClick:this.handleEditClick},Task_ref2,react.createElement(index_es.b,task_new_messages.taskEditMenuItem)),permissions.can_delete&&react.createElement(menu.b,{"data-resin-target":interactionTargets.a.TASK_OPTIONS_DELETE,"data-testid":"delete-task",onClick:this.handleDeleteClick},Task_ref3,react.createElement(index_es.b,task_new_messages.taskDeleteMenuItem))),isConfirmingDelete&&react.createElement(common_delete_confirmation_DeleteConfirmation,{"data-resin-component":interactionTargets.a.TASK_OPTIONS,isOpen:isConfirmingDelete,message:task_new_messages.taskDeletePrompt,onDeleteCancel:this.handleDeleteCancel,onDeleteConfirm:this.handleDeleteConfirm})),react.createElement("div",{className:"bcs-Task-headline"},react.createElement(index_es.b,Task_extends({},(taskType=task_type,!!currentUserAssignment?taskType===constants.Pe?task_new_messages.tasksFeedHeadlineApprovalCurrentUser:task_new_messages.tasksFeedHeadlineGeneralCurrentUser:taskType===constants.Pe?task_new_messages.tasksFeedHeadlineApproval:task_new_messages.tasksFeedHeadlineGeneral),{values:{user:react.createElement(common_user_link_UserLink,Task_extends({},createdByUser,{"data-resin-target":interactionTargets.a.PROFILE,getUserProfileUrl:getUserProfileUrl}))}}))),react.createElement("div",null,react.createElement(activity_timestamp_ActivityTimestamp,{date:createdAtTimestamp})),react.createElement("div",null,react.createElement(common_activity_message_ActivityMessage,Task_extends({id:id,tagged_message:description,translatedTaggedMessage:translatedTaggedMessage},translations,{translationFailed:!!error||null,getUserProfileUrl:getUserProfileUrl}))),react.createElement("div",{className:"bcs-Task-statusContainer"},!!due_at&&react.createElement(task_new_TaskDueDate,{dueDate:due_at,status:status}),react.createElement(task_new_TaskStatus,{status:status}),react.createElement(task_new_TaskCompletionRuleIcon,{completionRule:completion_rule})),react.createElement("div",{className:"bcs-Task-assigneeListContainer"},react.createElement(task_new_AssigneeList,{isOpen:isAssigneeListOpen,onCollapse:this.handleAssigneeListCollapse,onExpand:this.handleAssigneeListExpand,getAvatarUrl:getAvatarUrl,initialAssigneeCount:3,users:isAssigneeListOpen?assignedToFull:assigned_to})),currentUserAssignment&&shouldShowActions&&react.createElement("div",{className:"bcs-Task-actionsContainer"},react.createElement(task_new_TaskActions,{taskType:task_type,onTaskApproval:isPending?noop_default.a:function(){_this2.handleTaskAction(id,currentUserAssignment.id,constants.Ke)},onTaskReject:isPending?noop_default.a:function(){return _this2.handleTaskAction(id,currentUserAssignment.id,constants.Oe)},onTaskComplete:isPending?noop_default.a:function(){return _this2.handleTaskAction(id,currentUserAssignment.id,constants.Le)}})))),react.createElement(content_sidebar_TaskModal,{editMode:constants.Je,error:modalError,feedbackUrl:Object(feature_checking.getFeatureConfig)(features,"activityFeed.tasks").feedbackUrl||"",onSubmitError:this.handleEditSubmitError,onSubmitSuccess:this.handleEditModalClose,onModalClose:this.handleEditModalClose,isTaskFormOpen:isEditing,taskFormProps:{id:id,approvers:assignedToFull.entries,approverSelectorContacts:approverSelectorContacts,completionRule:completion_rule,getApproverWithQuery:getApproverWithQuery,getAvatarUrl:getAvatarUrl,createTask:function createTask(){},editTask:onEdit,dueDate:due_at,message:description},taskType:task_type}))}}]),Task}(react.Component);Task_Task.displayName="Task",Task_defineProperty(Task_Task,"defaultProps",{completion_rule:constants.Ge}),Task_Task.__docgenInfo={description:"",methods:[{name:"handleAssigneeListExpand",docblock:null,modifiers:[],params:[],returns:null},{name:"handleAssigneeListCollapse",docblock:null,modifiers:[],params:[],returns:null},{name:"handleEditClick",docblock:null,modifiers:[],params:[],returns:null},{name:"handleDeleteClick",docblock:null,modifiers:[],params:[],returns:null},{name:"handleDeleteConfirm",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"handleDeleteCancel",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"handleEditModalClose",docblock:null,modifiers:[],params:[],returns:null},{name:"handleEditSubmitError",docblock:null,modifiers:[],params:[{name:"error",type:{name:"ElementsXhrError",alias:"ElementsXhrError"}}],returns:null},{name:"getAllTaskCollaborators",docblock:null,modifiers:[],params:[{name:"onSuccess",type:{name:"signature",type:"function",raw:"() => any",signature:{arguments:[],return:{name:"any"}}}}],returns:null},{name:"handleTaskAction",docblock:null,modifiers:[],params:[{name:"taskId",type:{name:"string"}},{name:"assignmentId",type:{name:"string"}},{name:"taskStatus",type:{name:"string"}}],returns:null}],displayName:"Task",props:{completion_rule:{defaultValue:{value:"TASK_COMPLETION_RULE_ALL",computed:!0},required:!1},api:{required:!0,flowType:{name:"API"},description:""},approverSelectorContacts:{required:!0,flowType:{name:"SelectorItems"},description:""},currentUser:{required:!0,flowType:{name:"User"},description:""},error:{required:!1,flowType:{name:"ActionItemError"},description:""},features:{required:!1,flowType:{name:"FeatureConfig"},description:""},getApproverWithQuery:{required:!1,flowType:{name:"Function"},description:""},getAvatarUrl:{required:!0,flowType:{name:"GetAvatarUrlCallback"},description:""},getMentionWithQuery:{required:!1,flowType:{name:"Function"},description:""},getUserProfileUrl:{required:!1,flowType:{name:"GetProfileUrlCallback"},description:""},isPending:{required:!1,flowType:{name:"boolean"},description:""},onAssignmentUpdate:{required:!0,flowType:{name:"Function"},description:""},onDelete:{required:!1,flowType:{name:"Function"},description:""},onEdit:{required:!1,flowType:{name:"Function"},description:""},onModalClose:{required:!1,flowType:{name:"Function"},description:""},translatedTaggedMessage:{required:!1,flowType:{name:"string"},description:""},translations:{required:!1,flowType:{name:"Translations"},description:""}},composes:["TaskNew"]};var activity_feed_task_new_Task=flow_default()([feature_checking.withFeatureConsumer,api_context.b])(Task_Task);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/task-new/Task.js"]={name:"Task",docgenInfo:Task_Task.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/task-new/Task.js"});var IconInfoInverted=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?"#000000":_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?18:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?18:_ref$width;return react.createElement(accessible_svg.a,{className:"icon-info-inverted ".concat(className),height:height,title:title,viewBox:"0 0 18 18",width:width},react.createElement("path",{className:"fill-color",d:"M8.1 13.5h1.8V8.1H8.1v5.4zM9 0C4.05 0 0 4.05 0 9s4.05 9 9 9 9-4.05 9-9-4.05-9-9-9zm0 16.2c-3.96 0-7.2-3.24-7.2-7.2S5.04 1.8 9 1.8s7.2 3.24 7.2 7.2-3.24 7.2-7.2 7.2zm-.9-9.9h1.8V4.5H8.1v1.8z",fill:color,fillRule:"evenodd"}))};IconInfoInverted.displayName="IconInfoInverted",IconInfoInverted.__docgenInfo={description:"",methods:[],displayName:"IconInfoInverted",props:{className:{defaultValue:{value:"''",computed:!1},required:!1},color:{defaultValue:{value:"'#000000'",computed:!1},required:!1},height:{defaultValue:{value:"18",computed:!1},required:!1},width:{defaultValue:{value:"18",computed:!1},required:!1}}};var general_IconInfoInverted=IconInfoInverted;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconInfoInverted.js"]={name:"IconInfoInverted",docgenInfo:IconInfoInverted.__docgenInfo,path:"src/icons/general/IconInfoInverted.js"});var version=__webpack_require__(3196);__webpack_require__(3254);function CollapsedVersion_extends(){return(CollapsedVersion_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function getMessageForAction(action,collaborators,version_start,version_end){if("upload"!==action)return null;var collaboratorIDs=Object.keys(collaborators),numberOfCollaborators=collaboratorIDs.length,versionRange=react.createElement("span",{className:"bcs-Version-range"},version_start," - ",version_end);if(1===numberOfCollaborators){var collaborator=collaborators[collaboratorIDs[0]];return react.createElement(index_es.b,CollapsedVersion_extends({},messages.a.versionUploadCollapsed,{values:{name:react.createElement("strong",null,collaborator.name),versions:versionRange}}))}return react.createElement(index_es.b,CollapsedVersion_extends({},messages.a.versionMultipleUsersUploaded,{values:{numberOfCollaborators:numberOfCollaborators,versions:versionRange}}))}getMessageForAction.displayName="getMessageForAction";var CollapsedVersion_ref=react.createElement(general_IconInfoInverted,{height:16,width:16}),CollapsedVersion=function(props){var action=version.a.getVersionAction(props),collaborators=props.collaborators,intl=props.intl,onInfo=props.onInfo,versions=props.versions,version_start=props.version_start,version_end=props.version_end;return react.createElement("div",{className:"bcs-Version"},react.createElement("span",{className:"bcs-Version-message"},getMessageForAction(action,collaborators,version_start,version_end)),onInfo?react.createElement("span",{className:"bcs-Version-actions"},react.createElement(plain_button.a,{"aria-label":intl.formatMessage(messages.a.getVersionInfo),className:"bcs-Version-info","data-resin-target":interactionTargets.a.VERSION_CARD,onClick:function onClick(){onInfo({versions:versions})},type:"button"},CollapsedVersion_ref)):null)};CollapsedVersion.displayName="CollapsedVersion",CollapsedVersion.__docgenInfo={description:"",methods:[],displayName:"CollapsedVersion",props:{collaborators:{required:!0,flowType:{name:"signature",type:"object",raw:"{ [collaborator_id: string]: User }",signature:{properties:[{key:{name:"string"},value:{name:"User",required:!0}}]}},description:""},onInfo:{required:!1,flowType:{name:"Function"},description:""},version_end:{required:!0,flowType:{name:"number"},description:""},version_start:{required:!0,flowType:{name:"number"},description:""},versions:{required:!0,flowType:{name:"FileVersions"},description:""}}};var _ACTION_MAP,version_CollapsedVersion=Object(index_es.g)(CollapsedVersion);function Version_extends(){return(Version_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function Version_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/version/CollapsedVersion.js"]={name:"CollapsedVersion",docgenInfo:CollapsedVersion.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/version/CollapsedVersion.js"});var ACTION_MAP=(Version_defineProperty(_ACTION_MAP={},constants.Xe,messages.a.versionDeleted),Version_defineProperty(_ACTION_MAP,constants.Ye,messages.a.versionPromoted),Version_defineProperty(_ACTION_MAP,constants.Ze,messages.a.versionRestored),Version_defineProperty(_ACTION_MAP,constants.df,messages.a.versionUploaded),_ACTION_MAP),Version_ref=react.createElement(general_IconInfoInverted,{height:16,width:16}),Version_Version=function(props){var action=version.a.getVersionAction(props),id=props.id,intl=props.intl,onInfo=props.onInfo,version_number=props.version_number,version_promoted=props.version_promoted,name=version.a.getVersionUser(props).name;return react.createElement("div",{className:"bcs-Version"},react.createElement("span",{className:"bcs-Version-message"},react.createElement(index_es.b,Version_extends({},ACTION_MAP[action],{values:{name:react.createElement("strong",null,name),version_number:version_number,version_promoted:version_promoted}}))),onInfo?react.createElement("span",{className:"bcs-Version-actions"},react.createElement(plain_button.a,{"aria-label":intl.formatMessage(messages.a.getVersionInfo),className:"bcs-Version-info","data-resin-target":interactionTargets.a.VERSION_CARD,onClick:function onClick(){onInfo({id:id,version_number:version_number})},type:"button"},Version_ref)):null)};Version_Version.displayName="Version",Version_Version.__docgenInfo={description:"",methods:[],displayName:"Version",props:{id:{required:!0,flowType:{name:"string"},description:""},modified_by:{required:!0,flowType:{name:"User"},description:""},onInfo:{required:!1,flowType:{name:"Function"},description:""},version_number:{required:!0,flowType:{name:"string"},description:""},version_promoted:{required:!1,flowType:{name:"string"},description:""}}};var version_Version=Object(index_es.g)(Version_Version);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/version/Version.js"]={name:"Version",docgenInfo:Version_Version.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/version/Version.js"});var withErrorHandling=__webpack_require__(3198);function ActiveState_extends(){return(ActiveState_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}var ActiveState=function(_ref){var activeFeedEntryId=_ref.activeFeedEntryId,activeFeedEntryType=_ref.activeFeedEntryType,activeFeedItemRef=_ref.activeFeedItemRef,approverSelectorContacts=_ref.approverSelectorContacts,currentUser=_ref.currentUser,items=_ref.items,mentionSelectorContacts=_ref.mentionSelectorContacts,getMentionWithQuery=_ref.getMentionWithQuery,onAppActivityDelete=_ref.onAppActivityDelete,onCommentDelete=_ref.onCommentDelete,onCommentEdit=_ref.onCommentEdit,onTaskDelete=_ref.onTaskDelete,onTaskEdit=_ref.onTaskEdit,onTaskAssignmentUpdate=_ref.onTaskAssignmentUpdate,onTaskModalClose=_ref.onTaskModalClose,onVersionInfo=_ref.onVersionInfo,translations=_ref.translations,getApproverWithQuery=_ref.getApproverWithQuery,getAvatarUrl=_ref.getAvatarUrl,getUserProfileUrl=_ref.getUserProfileUrl,activeEntry=items.find((function(_ref2){var id=_ref2.id,type=_ref2.type;return id===activeFeedEntryId&&type===activeFeedEntryType}));return react.createElement("ul",{className:"bcs-activity-feed-active-state"},items.map((function(item){var isFocused=item===activeEntry,refValue=isFocused?activeFeedItemRef:void 0;switch(item.type){case"comment":return react.createElement("li",{key:item.type+item.id,className:classnames_default()("bcs-activity-feed-comment",{"bcs-is-focused":isFocused}),"data-testid":"comment",ref:refValue},react.createElement(activity_feed_comment_Comment,ActiveState_extends({},item,{currentUser:currentUser,getAvatarUrl:getAvatarUrl,getMentionWithQuery:getMentionWithQuery,getUserProfileUrl:getUserProfileUrl,mentionSelectorContacts:mentionSelectorContacts,onDelete:onCommentDelete,onEdit:onCommentEdit,permissions:{can_delete:get_default()(item.permissions,"can_delete",!1),can_edit:get_default()(item.permissions,"can_edit",!1)},translations:translations})));case"task":return react.createElement("li",{key:item.type+item.id,className:classnames_default()("bcs-activity-feed-task-new",{"bcs-is-focused":isFocused}),"data-testid":"task",ref:refValue},react.createElement(activity_feed_task_new_Task,ActiveState_extends({},item,{approverSelectorContacts:approverSelectorContacts,currentUser:currentUser,getApproverWithQuery:getApproverWithQuery,getAvatarUrl:getAvatarUrl,getUserProfileUrl:getUserProfileUrl,onAssignmentUpdate:onTaskAssignmentUpdate,onDelete:onTaskDelete,onEdit:onTaskEdit,onModalClose:onTaskModalClose,translations:translations})));case"file_version":return react.createElement("li",{key:item.type+item.id,className:"bcs-version-item","data-testid":"version"},item.versions?react.createElement(version_CollapsedVersion,ActiveState_extends({},item,{onInfo:onVersionInfo})):react.createElement(version_Version,ActiveState_extends({},item,{onInfo:onVersionInfo})));case"app_activity":return react.createElement("li",{key:item.type+item.id,className:"bcs-activity-feed-app-activity","data-testid":"app-activity"},react.createElement(activity_feed_app_activity_AppActivity,ActiveState_extends({currentUser:currentUser,onDelete:onAppActivityDelete},item)));default:return null}})))};ActiveState.displayName="ActiveState",ActiveState.__docgenInfo={description:"",methods:[],displayName:"ActiveState",props:{activeFeedEntryId:{required:!1,flowType:{name:"string"},description:""},activeFeedEntryType:{required:!1,flowType:{name:"FocusableFeedItemType"},description:""},activeFeedItemRef:{required:!0,flowType:{name:"signature",type:"object",raw:"{ current: null | HTMLElement }",signature:{properties:[{key:"current",value:{name:"union",raw:"null | HTMLElement",elements:[{name:"null"},{name:"HTMLElement"}],required:!0}}]}},description:""},approverSelectorContacts:{required:!1,flowType:{name:"SelectorItems"},description:""},currentUser:{required:!1,flowType:{name:"User"},description:""},getApproverWithQuery:{required:!1,flowType:{name:"Function"},description:""},getAvatarUrl:{required:!0,flowType:{name:"GetAvatarUrlCallback"},description:""},getMentionWithQuery:{required:!1,flowType:{name:"Function"},description:""},getUserProfileUrl:{required:!1,flowType:{name:"GetProfileUrlCallback"},description:""},items:{required:!0,flowType:{name:"FeedItems"},description:""},mentionSelectorContacts:{required:!1,flowType:{name:"SelectorItems"},description:""},onAppActivityDelete:{required:!1,flowType:{name:"Function"},description:""},onCommentDelete:{required:!1,flowType:{name:"Function"},description:""},onCommentEdit:{required:!1,flowType:{name:"Function"},description:""},onTaskAssignmentUpdate:{required:!1,flowType:{name:"Function"},description:""},onTaskDelete:{required:!1,flowType:{name:"Function"},description:""},onTaskEdit:{required:!1,flowType:{name:"Function"},description:""},onTaskModalClose:{required:!1,flowType:{name:"Function"},description:""},onVersionInfo:{required:!1,flowType:{name:"Function"},description:""},translations:{required:!1,flowType:{name:"Translations"},description:""}}};var activity_feed_ActiveState=Object(withErrorHandling.a)(ActiveState);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/activity-feed/ActiveState.js"]={name:"ActiveState",docgenInfo:ActiveState.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/activity-feed/ActiveState.js"});var IconActivityFeedEmptyState_ref2=react.createElement("path",{d:"M12.06 40.71v-.4a.31.31 0 0 0-.31-.31.31.31 0 0 0-.31.31v.4a.51.51 0 0 0-.23.23h-.4a.31.31 0 0 0-.31.31.31.31 0 0 0 .31.31h.4a.51.51 0 0 0 .23.23v.4a.31.31 0 0 0 .62 0v-.41a.57.57 0 0 0 .23-.23h.4a.31.31 0 0 0 .31-.31.31.31 0 0 0-.31-.31h-.4a.51.51 0 0 0-.23-.22zm74 25v-.4a.31.31 0 0 0-.31-.31.31.31 0 0 0-.31.31v.4a.51.51 0 0 0-.23.23h-.4a.31.31 0 0 0-.31.31.31.31 0 0 0 .31.31h.4a.61.61 0 0 0 .22.23v.4a.32.32 0 0 0 .32.31.31.31 0 0 0 .31-.3v-.41a.57.57 0 0 0 .23-.23h.4a.31.31 0 0 0 0-.62h-.4a.51.51 0 0 0-.23-.23zm-4-7v-.4a.31.31 0 0 0-.31-.31.31.31 0 0 0-.31.31v.4a.51.51 0 0 0-.23.23h-.4a.31.31 0 0 0-.31.31.31.31 0 0 0 .31.31h.4a.51.51 0 0 0 .23.23v.4a.31.31 0 0 0 .62 0v-.41a.63.63 0 0 0 .23-.23h.4a.31.31 0 0 0 0-.62h-.4a.51.51 0 0 0-.23-.23zM5.5 48.13v-.64A.5.5 0 0 0 5 47a.49.49 0 0 0-.5.49v.64a1.09 1.09 0 0 0-.37.37h-.64A.5.5 0 0 0 3 49a.49.49 0 0 0 .49.5h.64a1.09 1.09 0 0 0 .37.37v.64a.5.5 0 0 0 1 0v-.63a1.09 1.09 0 0 0 .37-.37h.64A.5.5 0 0 0 7 49a.49.49 0 0 0-.49-.5h-.64a1.09 1.09 0 0 0-.37-.37zm67 32v-.64A.5.5 0 0 0 72 79a.49.49 0 0 0-.5.49v.64a1.09 1.09 0 0 0-.37.37h-.64a.5.5 0 0 0-.49.5.49.49 0 0 0 .49.5h.64a1.09 1.09 0 0 0 .37.37v.64a.5.5 0 0 0 1 0v-.63a1 1 0 0 0 .37-.36h.64A.5.5 0 0 0 74 81a.49.49 0 0 0-.49-.5h-.64a1.09 1.09 0 0 0-.37-.37zm-63-56v-.64A.5.5 0 0 0 9 23a.49.49 0 0 0-.5.49v.64a1.09 1.09 0 0 0-.37.37h-.64A.5.5 0 0 0 7 25a.49.49 0 0 0 .49.5h.64a1.09 1.09 0 0 0 .37.37v.64a.5.5 0 0 0 1 0v-.63a1 1 0 0 0 .37-.36h.64A.5.5 0 0 0 11 25a.49.49 0 0 0-.49-.5h-.64a1.09 1.09 0 0 0-.37-.37zm16-20v-.64A.5.5 0 0 0 25 3a.49.49 0 0 0-.5.49v.64a1.09 1.09 0 0 0-.37.37h-.64A.5.5 0 0 0 23 5a.49.49 0 0 0 .49.5h.64a1.09 1.09 0 0 0 .37.37v.64a.5.5 0 0 0 1 0v-.65a1 1 0 0 0 .37-.36h.64A.5.5 0 0 0 27 5a.49.49 0 0 0-.49-.5h-.64a1.09 1.09 0 0 0-.37-.37zM44.46 27.21a3.12 3.12 0 1 1 3.1-3.11 3.11 3.11 0 0 1-3.1 3.11zm0-4.23a1.12 1.12 0 1 0 1.1 1.12 1.12 1.12 0 0 0-1.1-1.1zM54.28 27.2a3.11 3.11 0 1 1 3.1-3.11 3.11 3.11 0 0 1-3.1 3.11zm0-4.22a1.11 1.11 0 1 0 1.1 1.11 1.11 1.11 0 0 0-1.1-1.09zM64.09 27.2a3.11 3.11 0 1 1 3.11-3.11 3.1 3.1 0 0 1-3.11 3.11zm0-4.22a1.11 1.11 0 1 0 1.11 1.11A1.11 1.11 0 0 0 64.09 23z",fill:"#0061d5"}),IconActivityFeedEmptyState_ref3=react.createElement("path",{d:"M60.75 39.24c8 0 14.57-6.92 14.57-15.46S68.8 8.33 60.75 8.33c-1.35 0 9.78 5.07 9.27 15.45-.69 14.11-14.18 15.46-9.27 15.46zM21.73 59v-.7s2.5 2.46 5.34 1.68c1.57-.42 4.23 2.16 6.83 1.91 2.13-.21 4.72-2.7 4.72-2.7v2.05a4 4 0 0 1-4 4h-8.89a4 4 0 0 1-4-4V59z",fill:"#1891d3",opacity:".1"}),IconActivityFeedEmptyState_ref4=react.createElement("path",{d:"M54.45 3.4c-13.89 0-24 8.69-24 20.66a21.19 21.19 0 0 0 .17 2.41h-4a8.15 8.15 0 0 0-8.13 8v14a1 1 0 0 0-.45.81v1.22h-1.53v-2.14a1 1 0 0 0-1-1 4.1 4.1 0 0 0-1 8.08v5.81a11.67 11.67 0 0 0 11.66 11.66h1.23v7.34h-4.34a1 1 0 0 0-1 1v4.44a1 1 0 0 0 1 1h14.22a1 1 0 0 0 1-1v-4.44a1 1 0 0 0-1-1H33v-7.34h1.23a11.67 11.67 0 0 0 11.61-11.66v-5.81a4.1 4.1 0 0 0-1-8.08 1 1 0 0 0-1 1v2.11h-1.56v-1.22a1 1 0 0 0-.44-.81v-6.72A24.69 24.69 0 0 0 55 43.44a4.56 4.56 0 0 1-.53 1.25 6.88 6.88 0 0 0-1 3.1 1.21 1.21 0 0 0 1 1.24h.17c2 0 7.65-4.38 9.14-6.55a18.42 18.42 0 0 0 14.64-18.42c0-11.97-10.08-20.66-23.97-20.66zM36.28 84.69H24.06v-2.44h12.22zm-6.88-4.44v-7.33H31v7.33zm-2.75-51.78h7a6.16 6.16 0 0 1 6 5h-6a1 1 0 1 0 0 2h6.11v3h-6.03a1 1 0 1 0 0 2h6.11v3h-6.11a1 1 0 1 0 0 2h6.11v2.78H20.51v-2.78h6.11a1 1 0 1 0 0-2h-6.11v-3h6.11a1 1 0 1 0 0-2h-6.11v-3h6.11a1 1 0 1 0 0-2h-6a6.16 6.16 0 0 1 6.03-5zm13.63 21.78v2.44H20.06v-2.44zm-19.77 4.44h19.33v5.64a6.15 6.15 0 0 1-6.15 6.14h-7a6.14 6.14 0 0 1-6.14-6.14zm-7.11-3.22a2.12 2.12 0 0 1 1.11-1.86v3.72a2.12 2.12 0 0 1-1.11-1.86zm33.55 0a2.12 2.12 0 0 1-1.11 1.86v-3.72A2.12 2.12 0 0 1 47 51.47zm-3.11 1v8.78a9.67 9.67 0 0 1-9.66 9.66h-8a9.67 9.67 0 0 1-9.66-9.66v-8.78h1.55v1.22a1 1 0 0 0 .45.81v5.83a8.15 8.15 0 0 0 8.14 8.14h7a8.16 8.16 0 0 0 8.15-8.14V54.5a1 1 0 0 0 .44-.81v-1.22zM63 40.6a1.05 1.05 0 0 0-.79.68c-.33.94-4.37 4.16-6.48 5.34.14-.34.31-.68.48-1 .57-1.09 1.34-2.59.11-3.95a1 1 0 0 0-.74-.32h-.15a22.65 22.65 0 0 1-13.59-1.85v-4.88-.12a8.15 8.15 0 0 0-8.14-8h-1a17.29 17.29 0 0 1-.19-2.41c0-11 9-18.66 22-18.66s22 7.67 22 18.66A16.24 16.24 0 0 1 63 40.6z",fill:"#0061d5"}),IconActivityFeedEmptyState=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$width=_ref.width,width=void 0===_ref$width?90:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?90:_ref$height;return react.createElement(accessible_svg.a,{className:"bcs-activity-feed-empty-state-illustration ".concat(className),height:height,viewBox:"0 0 90 90",width:width},IconActivityFeedEmptyState_ref2,IconActivityFeedEmptyState_ref3,IconActivityFeedEmptyState_ref4)};IconActivityFeedEmptyState.displayName="IconActivityFeedEmptyState",IconActivityFeedEmptyState.__docgenInfo={description:"",methods:[],displayName:"IconActivityFeedEmptyState",props:{className:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},width:{defaultValue:{value:"90",computed:!1},required:!1,flowType:{name:"number"},description:""},height:{defaultValue:{value:"90",computed:!1},required:!1,flowType:{name:"number"},description:""}}};var icons_IconActivityFeedEmptyState=IconActivityFeedEmptyState;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/icons/IconActivityFeedEmptyState.js"]={name:"IconActivityFeedEmptyState",docgenInfo:IconActivityFeedEmptyState.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/icons/IconActivityFeedEmptyState.js"});var EmptyState_ref2=react.createElement(icons_IconActivityFeedEmptyState,null),EmptyState=function(_ref){var showCommentMessage=_ref.showCommentMessage;return react.createElement("div",{className:"bcs-activity-feed-empty-state"},EmptyState_ref2,react.createElement("div",{className:"bcs-empty-state-cta"},react.createElement(index_es.b,messages.a.noActivity),showCommentMessage?react.createElement("aside",null,react.createElement(index_es.b,messages.a.noActivityCommentPrompt)):null))};EmptyState.displayName="EmptyState",EmptyState.__docgenInfo={description:"",methods:[],displayName:"EmptyState",props:{showCommentMessage:{required:!1,flowType:{name:"boolean"},description:""}}};var activity_feed_EmptyState=EmptyState;function activityFeedUtils_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function activityFeedUtils_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?activityFeedUtils_ownKeys(Object(source),!0).forEach((function(key){activityFeedUtils_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):activityFeedUtils_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function activityFeedUtils_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/activity-feed/EmptyState.js"]={name:"EmptyState",docgenInfo:EmptyState.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/activity-feed/EmptyState.js"});var ItemTypes={fileVersion:"file_version"};var InlineError=__webpack_require__(1109),LoadingIndicator=__webpack_require__(280),activity_feed_messages=Object(index_es.f)({feedInlineErrorTitle:{id:"be.activitySidebar.activityFeed.feedInlineErrorTitle",defaultMessage:"Error"},taskMissingError:{id:"be.activitySidebar.activityFeed.taskMissingError",defaultMessage:"This task no longer exists"},commentMissingError:{id:"be.activitySidebar.activityFeed.commentMissingError",defaultMessage:"This comment no longer exists"}});__webpack_require__(3428);function ActivityFeed_typeof(obj){return(ActivityFeed_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ActivityFeed_extends(){return(ActivityFeed_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function ActivityFeed_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function ActivityFeed_getPrototypeOf(o){return(ActivityFeed_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function ActivityFeed_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function ActivityFeed_setPrototypeOf(o,p){return(ActivityFeed_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function ActivityFeed_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ActivityFeed_ref6=react.createElement("div",{className:"bcs-activity-feed-loading-state"},react.createElement(LoadingIndicator.a,null)),ActivityFeed_ActivityFeed=function(_React$Component){function ActivityFeed(){var _getPrototypeOf2,_this;!function ActivityFeed_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ActivityFeed);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function ActivityFeed_possibleConstructorReturn(self,call){return!call||"object"!==ActivityFeed_typeof(call)&&"function"!=typeof call?ActivityFeed_assertThisInitialized(self):call}(this,(_getPrototypeOf2=ActivityFeed_getPrototypeOf(ActivityFeed)).call.apply(_getPrototypeOf2,[this].concat(args))),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"state",{isInputOpen:!1}),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"activeFeedItemRef",react.createRef()),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"isEmpty",(function(){var _ref=0<arguments.length&&void 0!==arguments[0]?arguments[0]:_this.props,feedItems=_ref.feedItems;return void 0!==feedItems&&(0===feedItems.length||1===feedItems.length&&feedItems[0].type===ItemTypes.fileVersion)})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"hasLoaded",(function(){var _ref2=0<arguments.length&&void 0!==arguments[0]?arguments[0]:_this.props,currentUser=_ref2.currentUser,feedItems=_ref2.feedItems;return void 0!==currentUser&&void 0!==feedItems})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"resetFeedScroll",(function(){_this.feedContainer&&(_this.feedContainer.scrollTop=_this.feedContainer.scrollHeight)})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"onKeyDown",(function(event){event.nativeEvent.stopImmediatePropagation()})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"commentFormFocusHandler",(function(){_this.resetFeedScroll(),_this.setState({isInputOpen:!0})})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"commentFormCancelHandler",(function(){return _this.setState({isInputOpen:!1})})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"commentFormSubmitHandler",(function(){return _this.setState({isInputOpen:!1})})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"onCommentCreate",(function(_ref3){var text=_ref3.text,hasMention=_ref3.hasMention,_this$props$onComment=_this.props.onCommentCreate;(void 0===_this$props$onComment?noop_default.a:_this$props$onComment)(text,hasMention),_this.commentFormSubmitHandler()})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"onTaskCreate",(function(_ref4){var text=_ref4.text,assignees=_ref4.assignees,dueAt=_ref4.dueAt,_this$props$onTaskCre=_this.props.onTaskCreate;(void 0===_this$props$onTaskCre?noop_default.a:_this$props$onTaskCre)(text,assignees,dueAt),_this.commentFormSubmitHandler()})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"openVersionHistoryPopup",(function(data){(_this.props.onVersionHistoryClick||noop_default.a)(data)})),_this}return function ActivityFeed_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&ActivityFeed_setPrototypeOf(subClass,superClass)}(ActivityFeed,_React$Component),function ActivityFeed_createClass(Constructor,protoProps,staticProps){return protoProps&&ActivityFeed_defineProperties(Constructor.prototype,protoProps),staticProps&&ActivityFeed_defineProperties(Constructor,staticProps),Constructor}(ActivityFeed,[{key:"componentDidMount",value:function componentDidMount(){this.resetFeedScroll()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){var prevFeedItems=prevProps.feedItems,_this$props=this.props,currFeedItems=_this$props.feedItems,activeFeedEntryId=_this$props.activeFeedEntryId,prevIsInputOpen=prevState.isInputOpen,currIsInputOpen=this.state.isInputOpen,hasLoaded=this.hasLoaded(),hasMoreItems=prevFeedItems&&currFeedItems&&prevFeedItems.length<currFeedItems.length,didLoadFeedItems=void 0===prevFeedItems&&void 0!==currFeedItems;(hasLoaded||hasMoreItems||didLoadFeedItems||currIsInputOpen!==prevIsInputOpen)&&void 0===activeFeedEntryId&&this.resetFeedScroll(),didLoadFeedItems&&this.scrollToActiveFeedItemOrErrorMessage()}},{key:"scrollToActiveFeedItemOrErrorMessage",value:function scrollToActiveFeedItemOrErrorMessage(){var activeFeedItemRef=this.activeFeedItemRef.current;return this.props.activeFeedEntryId?null===activeFeedItemRef?void this.resetFeedScroll():void Object(dom.e)(activeFeedItemRef):void 0}},{key:"render",value:function render(){var feedState,_this2=this,_this$props2=this.props,translations=_this$props2.translations,approverSelectorContacts=_this$props2.approverSelectorContacts,mentionSelectorContacts=_this$props2.mentionSelectorContacts,currentUser=_this$props2.currentUser,isDisabled=_this$props2.isDisabled,getAvatarUrl=_this$props2.getAvatarUrl,getUserProfileUrl=_this$props2.getUserProfileUrl,file=_this$props2.file,onAppActivityDelete=_this$props2.onAppActivityDelete,onCommentCreate=_this$props2.onCommentCreate,getApproverWithQuery=_this$props2.getApproverWithQuery,getMentionWithQuery=_this$props2.getMentionWithQuery,activityFeedError=_this$props2.activityFeedError,onVersionHistoryClick=_this$props2.onVersionHistoryClick,onCommentDelete=_this$props2.onCommentDelete,onCommentUpdate=_this$props2.onCommentUpdate,onTaskDelete=_this$props2.onTaskDelete,onTaskUpdate=_this$props2.onTaskUpdate,onTaskAssignmentUpdate=_this$props2.onTaskAssignmentUpdate,onTaskModalClose=_this$props2.onTaskModalClose,feedItems=_this$props2.feedItems,activeFeedEntryId=_this$props2.activeFeedEntryId,activeFeedEntryType=_this$props2.activeFeedEntryType,isInputOpen=this.state.isInputOpen,hasCommentPermission=get_default()(file,"permissions.can_comment",!1),showCommentForm=!!(currentUser&&hasCommentPermission&&onCommentCreate&&feedItems),isEmpty=this.isEmpty(this.props),isLoading=!this.hasLoaded(),activeEntry=Array.isArray(feedItems)&&feedItems.find((function(_ref5){var id=_ref5.id,type=_ref5.type;return id===activeFeedEntryId&&type===activeFeedEntryType})),errorMessageByEntryType={comment:activity_feed_messages.commentMissingError,task:activity_feed_messages.taskMissingError},inlineFeedItemErrorMessage=activeFeedEntryType?errorMessageByEntryType[activeFeedEntryType]:void 0;return(react.createElement("div",{className:"bcs-activity-feed","data-testid":"activityfeed",onKeyDown:this.onKeyDown},react.createElement("div",{ref:function ref(_ref7){_this2.feedContainer=_ref7},className:"bcs-activity-feed-items-container"},isLoading&&ActivityFeed_ref6,isEmpty&&!isLoading&&react.createElement(activity_feed_EmptyState,{showCommentMessage:showCommentForm}),!isEmpty&&!isLoading&&react.createElement(activity_feed_ActiveState,ActivityFeed_extends({},activityFeedError,{items:(feedState=feedItems,feedState?feedState.reduce((function(collapsedFeedState,feedItem){var previousFeedItem=collapsedFeedState.pop();if(!previousFeedItem)return collapsedFeedState.concat([feedItem]);if(feedItem.type===ItemTypes.fileVersion&&previousFeedItem.type===ItemTypes.fileVersion&&version.a.getVersionAction(feedItem)===constants.df&&version.a.getVersionAction(previousFeedItem)===constants.df){var tmpModifiedBy=previousFeedItem.modified_by,_previousFeedItem$ver=previousFeedItem.versions,versions=void 0===_previousFeedItem$ver?[previousFeedItem]:_previousFeedItem$ver,_previousFeedItem$ver2=previousFeedItem.version_start,version_start=void 0===_previousFeedItem$ver2?parseInt(previousFeedItem.version_number,10):_previousFeedItem$ver2,_previousFeedItem$ver3=previousFeedItem.version_end,version_end=void 0===_previousFeedItem$ver3?parseInt(previousFeedItem.version_number,10):_previousFeedItem$ver3,prevModifiedBy=tmpModifiedBy||constants.be,tmpCurModifiedBy=feedItem.modified_by,created_at=feedItem.created_at,trashed_at=feedItem.trashed_at,id=feedItem.id,version_number=feedItem.version_number,parsedVersionNumber=parseInt(version_number,10),collaborators=previousFeedItem.collaborators||activityFeedUtils_defineProperty({},prevModifiedBy.id,activityFeedUtils_objectSpread({},prevModifiedBy)),modifiedBy=tmpCurModifiedBy||constants.be;return collaborators[modifiedBy.id]=activityFeedUtils_objectSpread({},modifiedBy),collapsedFeedState.concat([{collaborators:collaborators,created_at:created_at,modified_by:modifiedBy,trashed_at:trashed_at,id:id,type:ItemTypes.fileVersion,version_number:version_number,versions:versions.concat([feedItem]),version_start:Math.min(version_start,parsedVersionNumber),version_end:Math.max(version_end,parsedVersionNumber)}])}return collapsedFeedState.concat([previousFeedItem,feedItem])}),[]):[]),isDisabled:isDisabled,currentUser:currentUser,onTaskAssignmentUpdate:onTaskAssignmentUpdate,onAppActivityDelete:onAppActivityDelete,onCommentDelete:hasCommentPermission?onCommentDelete:noop_default.a,onCommentEdit:hasCommentPermission?onCommentUpdate:noop_default.a,onTaskDelete:hasCommentPermission?onTaskDelete:noop_default.a,onTaskEdit:hasCommentPermission?onTaskUpdate:noop_default.a,onTaskModalClose:onTaskModalClose,onVersionInfo:onVersionHistoryClick?this.openVersionHistoryPopup:null,translations:translations,getAvatarUrl:getAvatarUrl,getUserProfileUrl:getUserProfileUrl,mentionSelectorContacts:mentionSelectorContacts,getMentionWithQuery:getMentionWithQuery,approverSelectorContacts:approverSelectorContacts,getApproverWithQuery:getApproverWithQuery,activeFeedEntryId:activeFeedEntryId,activeFeedEntryType:activeFeedEntryType,activeFeedItemRef:this.activeFeedItemRef})),!isLoading&&activeFeedEntryType&&!activeEntry&&inlineFeedItemErrorMessage&&react.createElement(InlineError.a,{title:react.createElement(index_es.b,activity_feed_messages.feedInlineErrorTitle),className:"bcs-feedItemInlineError"},react.createElement(index_es.b,inlineFeedItemErrorMessage))),showCommentForm?react.createElement(activity_feed_comment_form_CommentForm,{onSubmit:this.resetFeedScroll,isDisabled:isDisabled,mentionSelectorContacts:mentionSelectorContacts,className:classnames_default()("bcs-activity-feed-comment-input",{"bcs-is-disabled":isDisabled}),createComment:hasCommentPermission?this.onCommentCreate:noop_default.a,getMentionWithQuery:getMentionWithQuery,isOpen:isInputOpen,user:currentUser,onCancel:this.commentFormCancelHandler,onFocus:this.commentFormFocusHandler,getAvatarUrl:getAvatarUrl}):null))}}]),ActivityFeed}(react.Component);ActivityFeed_ActivityFeed.displayName="ActivityFeed",ActivityFeed_ActivityFeed.__docgenInfo={description:"",methods:[{name:"scrollToActiveFeedItemOrErrorMessage",docblock:null,modifiers:[],params:[],returns:null},{name:"isEmpty",docblock:"Detects whether or not the empty state should be shown.\n@param {object} currentUser - The user that is logged into the account\n@param {object} feedItems - Items in the activity feed",modifiers:[],params:[{name:"{ feedItems }: Props"}],returns:{type:{name:"boolean"}},description:"Detects whether or not the empty state should be shown."},{name:"hasLoaded",docblock:null,modifiers:[],params:[{name:"{ currentUser, feedItems }: Props",type:null}],returns:{type:{name:"boolean"}}},{name:"resetFeedScroll",docblock:"Scrolls the container to the bottom",modifiers:[],params:[],returns:null,description:"Scrolls the container to the bottom"},{name:"onKeyDown",docblock:null,modifiers:[],params:[{name:"event",type:{name:"SyntheticKeyboardEvent",elements:[],raw:"SyntheticKeyboardEvent<>",alias:"SyntheticKeyboardEvent"}}],returns:{type:{name:"void"}}},{name:"commentFormFocusHandler",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"commentFormCancelHandler",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"commentFormSubmitHandler",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"onCommentCreate",docblock:null,modifiers:[],params:[{name:"{ text, hasMention }: { hasMention: boolean, text: string }",type:{name:"signature",type:"object",raw:"{ hasMention: boolean, text: string }",signature:{properties:[{key:"hasMention",value:{name:"boolean",required:!0}},{key:"text",value:{name:"string",required:!0}}]}}}],returns:null},{name:"onTaskCreate",docblock:"Creates a task.\n\n@param {string} text - Task text\n@param {Array} assignees - List of assignees\n@param {number} dueAt - Task's due date\n@return {void}",modifiers:[],params:[{name:"{ text, assignees, dueAt }: { assignees: SelectorItems, dueAt: string, text: string }",type:{name:"signature",type:"object",raw:"{ assignees: SelectorItems, dueAt: string, text: string }",signature:{properties:[{key:"assignees",value:{name:"SelectorItems",required:!0}},{key:"dueAt",value:{name:"string",required:!0}},{key:"text",value:{name:"string",required:!0}}]}}}],returns:{description:null,type:{name:"void"}},description:"Creates a task."},{name:"openVersionHistoryPopup",docblock:"Invokes version history popup handler.\n\n@param {Object} data - Version history data\n@return {void}",modifiers:[],params:[{name:"data",description:"Version history data",type:{name:"any"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Invokes version history popup handler."}],displayName:"ActivityFeed",props:{activeFeedEntryId:{required:!1,flowType:{name:"string"},description:""},activeFeedEntryType:{required:!1,flowType:{name:"FocusableFeedItemType"},description:""},activityFeedError:{required:!0,flowType:{name:"Errors",nullable:!0},description:""},approverSelectorContacts:{required:!1,flowType:{name:"SelectorItems"},description:""},currentUser:{required:!1,flowType:{name:"User"},description:""},feedItems:{required:!1,flowType:{name:"FeedItems"},description:""},file:{required:!0,flowType:{name:"BoxItem"},description:""},getApproverWithQuery:{required:!1,flowType:{name:"Function"},description:""},getAvatarUrl:{required:!0,flowType:{name:"GetAvatarUrlCallback"},description:""},getMentionWithQuery:{required:!1,flowType:{name:"Function"},description:""},getUserProfileUrl:{required:!1,flowType:{name:"GetProfileUrlCallback"},description:""},isDisabled:{required:!1,flowType:{name:"boolean"},description:""},mentionSelectorContacts:{required:!1,flowType:{name:"SelectorItems"},description:""},onAppActivityDelete:{required:!1,flowType:{name:"Function"},description:""},onCommentCreate:{required:!1,flowType:{name:"Function"},description:""},onCommentDelete:{required:!1,flowType:{name:"Function"},description:""},onCommentUpdate:{required:!1,flowType:{name:"Function"},description:""},onTaskAssignmentUpdate:{required:!1,flowType:{name:"Function"},description:""},onTaskCreate:{required:!1,flowType:{name:"Function"},description:""},onTaskDelete:{required:!1,flowType:{name:"Function"},description:""},onTaskModalClose:{required:!1,flowType:{name:"Function"},description:""},onTaskUpdate:{required:!1,flowType:{name:"Function"},description:""},onVersionHistoryClick:{required:!1,flowType:{name:"Function"},description:""},translations:{required:!1,flowType:{name:"Translations"},description:""}}};var activity_feed_activity_feed_ActivityFeed=ActivityFeed_ActivityFeed;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/activity-feed/ActivityFeed.js"]={name:"ActivityFeed",docgenInfo:ActivityFeed_ActivityFeed.__docgenInfo,path:"src/elements/content-sidebar/activity-feed/activity-feed/ActivityFeed.js"});__webpack_require__(184);var react_router=__webpack_require__(3169),MenuToggle=__webpack_require__(1115),AddTaskMenu_ref=(__webpack_require__(3429),react.createElement("div",{className:"bcs-AddTaskMenu-icon"},react.createElement(two_toned_IconTaskGeneral,{width:30,height:30}))),AddTaskMenu_ref2=react.createElement("div",{className:"bcs-AddTaskMenu-icon"},react.createElement(two_toned_IconTaskApproval,{width:30,height:30})),AddTaskMenu_AddTaskMenu=function(props){return react.createElement(dropdown_menu.a,{constrainToScrollParent:!0,isRightAligned:!0},react.createElement(components_button.a,{isDisabled:props.isDisabled,type:"button"},react.createElement(MenuToggle.a,null,react.createElement(index_es.b,content_sidebar_messages.tasksAddTask))),react.createElement(menu.a,{className:"bcs-AddTaskMenu"},react.createElement(menu.b,{className:"bcs-AddTaskMenu-menuItem",onClick:function onClick(){return props.onMenuItemClick(constants.Qe)}},AddTaskMenu_ref,react.createElement("div",null,react.createElement("div",{className:"bcs-AddTaskMenu-title"},react.createElement(index_es.b,content_sidebar_messages.taskAddTaskGeneral)),react.createElement("div",{className:"bcs-AddTaskMenu-description"},react.createElement(index_es.b,content_sidebar_messages.taskAddTaskGeneralDescription)))),react.createElement(menu.b,{className:"bcs-AddTaskMenu-menuItem",onClick:function onClick(){return props.onMenuItemClick(constants.Pe)}},AddTaskMenu_ref2,react.createElement("div",null,react.createElement("div",{className:"bcs-AddTaskMenu-title"},react.createElement(index_es.b,content_sidebar_messages.taskAddTaskApproval)),react.createElement("div",{className:"bcs-AddTaskMenu-description"},react.createElement(index_es.b,content_sidebar_messages.taskAddTaskApprovalDescription))))))};AddTaskMenu_AddTaskMenu.displayName="AddTaskMenu",AddTaskMenu_AddTaskMenu.__docgenInfo={description:"",methods:[],displayName:"AddTaskMenu",props:{isDisabled:{required:!0,flowType:{name:"boolean"},description:""},onMenuItemClick:{required:!0,flowType:{name:"signature",type:"function",raw:"(taskType: TaskType) => void",signature:{arguments:[{name:"taskType",type:{name:"TaskType"}}],return:{name:"void"}}},description:""}}};var content_sidebar_AddTaskMenu=AddTaskMenu_AddTaskMenu;function AddTaskButton_typeof(obj){return(AddTaskButton_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function AddTaskButton_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function AddTaskButton_getPrototypeOf(o){return(AddTaskButton_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function AddTaskButton_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function AddTaskButton_setPrototypeOf(o,p){return(AddTaskButton_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function AddTaskButton_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/AddTaskMenu.js"]={name:"AddTaskMenu",docgenInfo:AddTaskMenu_AddTaskMenu.__docgenInfo,path:"src/elements/content-sidebar/AddTaskMenu.js"});var AddTaskButton_AddTaskButton=function(_React$Component){function AddTaskButton(){var _getPrototypeOf2,_this;!function AddTaskButton_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AddTaskButton);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function AddTaskButton_possibleConstructorReturn(self,call){return!call||"object"!==AddTaskButton_typeof(call)&&"function"!=typeof call?AddTaskButton_assertThisInitialized(self):call}(this,(_getPrototypeOf2=AddTaskButton_getPrototypeOf(AddTaskButton)).call.apply(_getPrototypeOf2,[this].concat(args))),AddTaskButton_defineProperty(AddTaskButton_assertThisInitialized(_this),"state",{error:null,isTaskFormOpen:!1,taskType:constants.Pe}),AddTaskButton_defineProperty(AddTaskButton_assertThisInitialized(_this),"handleClickMenuItem",(function(taskType){_this.props.history.replace({state:{open:!0}}),_this.setState({isTaskFormOpen:!0,taskType:taskType})})),AddTaskButton_defineProperty(AddTaskButton_assertThisInitialized(_this),"handleModalClose",(function(){var onTaskModalClose=_this.props.onTaskModalClose;_this.setState({isTaskFormOpen:!1,error:null}),onTaskModalClose()})),AddTaskButton_defineProperty(AddTaskButton_assertThisInitialized(_this),"handleSubmitError",(function(e){return _this.setState({error:e})})),_this}return function AddTaskButton_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&AddTaskButton_setPrototypeOf(subClass,superClass)}(AddTaskButton,_React$Component),function AddTaskButton_createClass(Constructor,protoProps,staticProps){return protoProps&&AddTaskButton_defineProperties(Constructor.prototype,protoProps),staticProps&&AddTaskButton_defineProperties(Constructor,staticProps),Constructor}(AddTaskButton,[{key:"render",value:function render(){var _this$props=this.props,isDisabled=_this$props.isDisabled,taskFormProps=_this$props.taskFormProps,_this$state=this.state,isTaskFormOpen=_this$state.isTaskFormOpen,taskType=_this$state.taskType,error=_this$state.error;return react.createElement(react.Fragment,null,react.createElement(content_sidebar_AddTaskMenu,{isDisabled:isDisabled,onMenuItemClick:this.handleClickMenuItem}),react.createElement(content_sidebar_TaskModal,{error:error,onSubmitError:this.handleSubmitError,onSubmitSuccess:this.handleModalClose,onModalClose:this.handleModalClose,isTaskFormOpen:isTaskFormOpen,taskFormProps:taskFormProps,taskType:taskType}))}}]),AddTaskButton}(react.Component);AddTaskButton_AddTaskButton.displayName="AddTaskButton",AddTaskButton_defineProperty(AddTaskButton_AddTaskButton,"defaultProps",{isDisabled:!1}),AddTaskButton_AddTaskButton.__docgenInfo={description:"",methods:[{name:"handleClickMenuItem",docblock:null,modifiers:[],params:[{name:"taskType",type:{name:"TaskType",alias:"TaskType"}}],returns:null},{name:"handleModalClose",docblock:null,modifiers:[],params:[],returns:null},{name:"handleSubmitError",docblock:null,modifiers:[],params:[{name:"e",type:{name:"ElementsXhrError",alias:"ElementsXhrError"}}],returns:null}],displayName:"AddTaskButton",props:{isDisabled:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:""},history:{required:!0,flowType:{name:"RouterHistory"},description:""},onTaskModalClose:{required:!0,flowType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},taskFormProps:{required:!0,flowType:{name:"TaskFormProps"},description:""}}};var content_sidebar_AddTaskButton=Object(react_router.g)(AddTaskButton_AddTaskButton);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/AddTaskButton.js"]={name:"AddTaskButton",docgenInfo:AddTaskButton_AddTaskButton.__docgenInfo,path:"src/elements/content-sidebar/AddTaskButton.js"});__webpack_require__(313);var SidebarContent=__webpack_require__(3185),logger_constants=__webpack_require__(562),utils_error=__webpack_require__(21),performance=__webpack_require__(561),error_boundary=__webpack_require__(1111),common_logger=__webpack_require__(1113);__webpack_require__(3430);function ActivitySidebar_typeof(obj){return(ActivitySidebar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ActivitySidebar_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function ActivitySidebar_getPrototypeOf(o){return(ActivitySidebar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function ActivitySidebar_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function ActivitySidebar_setPrototypeOf(o,p){return(ActivitySidebar_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function ActivitySidebar_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__.d(__webpack_exports__,"activityFeedInlineError",(function(){return activityFeedInlineError})),__webpack_require__.d(__webpack_exports__,"ActivitySidebarComponent",(function(){return ActivitySidebar_ActivitySidebar}));var activityFeedInlineError={inlineError:{title:messages.a.errorOccured,content:messages.a.activityFeedItemApiError}},MARK_NAME_JS_READY="".concat(constants.Jd,"_").concat(logger_constants.a);Object(performance.b)(MARK_NAME_JS_READY);var ActivitySidebar_ActivitySidebar=function(_React$PureComponent){function ActivitySidebar(props){var _this;return function ActivitySidebar_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ActivitySidebar),_this=function ActivitySidebar_possibleConstructorReturn(self,call){return!call||"object"!==ActivitySidebar_typeof(call)&&"function"!=typeof call?ActivitySidebar_assertThisInitialized(self):call}(this,ActivitySidebar_getPrototypeOf(ActivitySidebar).call(this,props)),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"feedSuccessCallback",(function(){_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"feedErrorCallback",(function(e,code,contextInfo){_this.errorCallback(e,code,contextInfo),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"createTask",(function(message,assignees,taskType,dueAt,completionRule,onSuccess,onError){var currentUser=_this.state.currentUser,_this$props=_this.props,file=_this$props.file,api=_this$props.api;if(!currentUser)throw Object(utils_error.c)();api.getFeedAPI(!1).createTaskNew(file,currentUser,message,assignees,taskType,dueAt,completionRule,(function(){onSuccess&&onSuccess(),_this.feedSuccessCallback()}),(function(e,code,contextInfo){onError&&onError(e,code,contextInfo),_this.feedErrorCallback(e,code,contextInfo)})),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"deleteTask",(function(task){var _this$props2=_this.props,file=_this$props2.file,api=_this$props2.api,onTaskDelete=_this$props2.onTaskDelete;api.getFeedAPI(!1).deleteTaskNew(file,task,(function(taskId){_this.feedSuccessCallback(),onTaskDelete(taskId)}),_this.feedErrorCallback),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"updateTask",(function(task,onSuccess,onError){var _this$props3=_this.props,file=_this$props3.file,api=_this$props3.api,onTaskUpdate=_this$props3.onTaskUpdate;api.getFeedAPI(!1).updateTaskNew(file,task,(function(){_this.feedSuccessCallback(),onSuccess&&onSuccess(),onTaskUpdate()}),(function(e,code){onError&&onError(e,code),_this.feedErrorCallback(e,code)})),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"updateTaskAssignment",(function(taskId,taskAssignmentId,status){var _this$props4=_this.props,file=_this$props4.file;_this$props4.api.getFeedAPI(!1).updateTaskCollaborator(file,taskId,taskAssignmentId,status,_this.feedSuccessCallback,_this.feedErrorCallback),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"deleteComment",(function(_ref){var id=_ref.id,permissions=_ref.permissions,_this$props5=_this.props,file=_this$props5.file,api=_this$props5.api,onCommentDelete=_this$props5.onCommentDelete;api.getFeedAPI(!1).deleteComment(file,id,permissions,(function(comment){_this.feedSuccessCallback(),onCommentDelete(comment)}),_this.feedErrorCallback),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"updateComment",(function(id,text,hasMention,permissions,onSuccess,onError){var _this$props6=_this.props,file=_this$props6.file,api=_this$props6.api,onCommentUpdate=_this$props6.onCommentUpdate;api.getFeedAPI(!1).updateComment(file,id,text,hasMention,permissions,(function(){_this.feedSuccessCallback(),onSuccess&&onSuccess(),onCommentUpdate()}),(function(e,code){onError&&onError(e,code),_this.feedErrorCallback(e,code)})),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"createComment",(function(text,hasMention){var _this$props7=_this.props,file=_this$props7.file,api=_this$props7.api,onCommentCreate=_this$props7.onCommentCreate,currentUser=_this.state.currentUser;if(!currentUser)throw Object(utils_error.c)();api.getFeedAPI(!1).createComment(file,currentUser,text,hasMention,(function(comment){onCommentCreate(comment),_this.feedSuccessCallback()}),_this.feedErrorCallback),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"deleteAppActivity",(function(_ref2){var id=_ref2.id,_this$props8=_this.props,file=_this$props8.file;_this$props8.api.getFeedAPI(!1).deleteAppActivity(file,id,_this.feedSuccessCallback,_this.feedErrorCallback),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"fetchFeedItemsSuccessCallback",(function(feedItems){_this.setState({feedItems:feedItems,activityFeedError:void 0})})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"fetchFeedItemsErrorCallback",(function(feedItems){_this.setState({feedItems:feedItems,activityFeedError:activityFeedInlineError})})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"errorCallback",(function(error,code){var contextInfo=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};console.error(error),_this.props.onError(error,code,contextInfo)})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"fetchCurrentUserSuccessCallback",(function(currentUser){_this.setState({currentUser:currentUser,currentUserError:void 0})})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"getApproverContactsSuccessCallback",(function(collaborators){var entries=collaborators.entries;_this.setState({approverSelectorContacts:entries})})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"getMentionContactsSuccessCallback",(function(collaborators){var entries=collaborators.entries;_this.setState({mentionSelectorContacts:entries})})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"getApproverWithQuery",debounce_default()(_this.getCollaborators.bind(ActivitySidebar_assertThisInitialized(_this),_this.getApproverContactsSuccessCallback,_this.errorCallback),constants.E)),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"getMentionWithQuery",debounce_default()(_this.getCollaborators.bind(ActivitySidebar_assertThisInitialized(_this),_this.getMentionContactsSuccessCallback,_this.errorCallback),constants.E)),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"fetchCurrentUserErrorCallback",(function(e,code){_this.setState({currentUser:void 0,currentUserError:{maskError:{errorHeader:messages.a.currentUserErrorHeaderMessage,errorSubHeader:messages.a.defaultErrorMaskSubHeaderMessage}}}),_this.errorCallback(e,code,{error:e})})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"getAvatarUrl",(function(userId){var _this$props9,file,api;return regeneratorRuntime.async((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _this$props9=_this.props,file=_this$props9.file,api=_this$props9.api,_context.abrupt("return",api.getUsersAPI(!1).getAvatarUrlWithAccessToken(userId,file.id));case 2:case"end":return _context.stop()}}))})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"onTaskModalClose",(function(){_this.setState({approverSelectorContacts:[]})})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"renderAddTaskButton",(function(){var isDisabled=_this.props.isDisabled,approverSelectorContacts=_this.state.approverSelectorContacts,_assertThisInitialize=ActivitySidebar_assertThisInitialized(_this),getApproverWithQuery=_assertThisInitialize.getApproverWithQuery,getAvatarUrl=_assertThisInitialize.getAvatarUrl,createTask=_assertThisInitialize.createTask,onTaskModalClose=_assertThisInitialize.onTaskModalClose;return react.createElement(content_sidebar_AddTaskButton,{isDisabled:isDisabled,onTaskModalClose:onTaskModalClose,taskFormProps:{approverSelectorContacts:approverSelectorContacts,completionRule:constants.Ge,createTask:createTask,getApproverWithQuery:getApproverWithQuery,getAvatarUrl:getAvatarUrl,id:"",message:"",approvers:[]}})})),_this.props.logger.onReadyMetric({endMarkName:MARK_NAME_JS_READY}),_this.state={},_this}return function ActivitySidebar_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&ActivitySidebar_setPrototypeOf(subClass,superClass)}(ActivitySidebar,_React$PureComponent),function ActivitySidebar_createClass(Constructor,protoProps,staticProps){return protoProps&&ActivitySidebar_defineProperties(Constructor.prototype,protoProps),staticProps&&ActivitySidebar_defineProperties(Constructor,staticProps),Constructor}(ActivitySidebar,[{key:"componentDidMount",value:function componentDidMount(){var currentUser=this.props.currentUser;this.fetchFeedItems(!0),this.fetchCurrentUser(currentUser)}},{key:"fetchCurrentUser",value:function fetchCurrentUser(user){var shouldDestroy=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],_this$props10=this.props,api=_this$props10.api,file=_this$props10.file;if(!file)throw Object(utils_error.a)();void 0===user?api.getUsersAPI(shouldDestroy).getUser(file.id,this.fetchCurrentUserSuccessCallback,this.fetchCurrentUserErrorCallback):this.setState({currentUser:user,currentUserError:void 0})}},{key:"fetchFeedItems",value:function fetchFeedItems(){var shouldRefreshCache=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],shouldDestroy=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],_this$props11=this.props,file=_this$props11.file,api=_this$props11.api,features=_this$props11.features,shouldShowAppActivity=Object(feature_checking.isFeatureEnabled)(features,"activityFeed.appActivity.enabled");api.getFeedAPI(shouldDestroy).feedItems(file,shouldRefreshCache,this.fetchFeedItemsSuccessCallback,this.fetchFeedItemsErrorCallback,this.errorCallback,{shouldShowAppActivity:shouldShowAppActivity})}},{key:"getCollaborators",value:function getCollaborators(successCallback,errorCallback,searchStr){var _this$props12=this.props,file=_this$props12.file,api=_this$props12.api;searchStr&&""!==searchStr.trim()&&api.getFileCollaboratorsAPI(!0).getFileCollaborators(file.id,successCallback,errorCallback,{filter_term:searchStr})}},{key:"refresh",value:function refresh(){this.fetchFeedItems(!0)}},{key:"render",value:function render(){var _this$props13=this.props,elementId=_this$props13.elementId,file=_this$props13.file,_this$props13$isDisab=_this$props13.isDisabled,onVersionHistoryClick=_this$props13.onVersionHistoryClick,getUserProfileUrl=_this$props13.getUserProfileUrl,activeFeedEntryId=_this$props13.activeFeedEntryId,activeFeedEntryType=_this$props13.activeFeedEntryType,_this$state=this.state,currentUser=_this$state.currentUser,approverSelectorContacts=_this$state.approverSelectorContacts,mentionSelectorContacts=_this$state.mentionSelectorContacts,feedItems=_this$state.feedItems,activityFeedError=_this$state.activityFeedError,currentUserError=_this$state.currentUserError;return react.createElement(SidebarContent.a,{actions:this.renderAddTaskButton(),className:"bcs-activity",elementId:elementId,sidebarView:constants.ce,title:react.createElement(index_es.b,messages.a.sidebarActivityTitle)},react.createElement(activity_feed_activity_feed_ActivityFeed,{file:file,activityFeedError:activityFeedError,approverSelectorContacts:approverSelectorContacts,mentionSelectorContacts:mentionSelectorContacts,currentUser:currentUser,isDisabled:void 0!==_this$props13$isDisab&&_this$props13$isDisab,onAppActivityDelete:this.deleteAppActivity,onCommentCreate:this.createComment,onCommentDelete:this.deleteComment,onCommentUpdate:this.updateComment,onTaskCreate:this.createTask,onTaskDelete:this.deleteTask,onTaskUpdate:this.updateTask,onTaskModalClose:this.onTaskModalClose,onTaskAssignmentUpdate:this.updateTaskAssignment,getApproverWithQuery:this.getApproverWithQuery,getMentionWithQuery:this.getMentionWithQuery,onVersionHistoryClick:onVersionHistoryClick,getAvatarUrl:this.getAvatarUrl,getUserProfileUrl:getUserProfileUrl,feedItems:feedItems,currentUserError:currentUserError,activeFeedEntryId:activeFeedEntryId,activeFeedEntryType:activeFeedEntryType}))}}]),ActivitySidebar}(react.PureComponent);ActivitySidebar_ActivitySidebar.displayName="ActivitySidebar",ActivitySidebar_defineProperty(ActivitySidebar_ActivitySidebar,"defaultProps",{isDisabled:!1,onCommentCreate:noop_default.a,onCommentDelete:noop_default.a,onCommentUpdate:noop_default.a,onTaskAssignmentUpdate:noop_default.a,onTaskCreate:noop_default.a,onTaskDelete:noop_default.a,onTaskUpdate:noop_default.a}),ActivitySidebar_ActivitySidebar.__docgenInfo={description:"",methods:[{name:"fetchCurrentUser",docblock:"Fetches a Users info\n\n@private\n@param {User} [user] - Box User. If missing, gets user that the current token was generated for.\n@return {void}",modifiers:[],params:[{name:"user",optional:!0,type:{name:"User",alias:"User"}},{name:"shouldDestroy"}],returns:{type:{name:"void"}},description:"Fetches a Users info"},{name:"feedSuccessCallback",docblock:"Success callback for fetching feed items",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Success callback for fetching feed items"},{name:"feedErrorCallback",docblock:"Error callback for fetching feed items\n\n@param {Error} e - the error which occured\n@param {Error} code - the code for the error\n@param {Object} contextInfo - the context info for the error",modifiers:[],params:[{name:"e",description:"the error which occured",type:{name:"ElementsXhrError",alias:"ElementsXhrError"},optional:!1},{name:"code",description:"the code for the error",type:{name:"string"},optional:!1},{name:"contextInfo",description:"the context info for the error",type:{name:"Object",alias:"Object"},optional:!0}],returns:null,description:"Error callback for fetching feed items"},{name:"createTask",docblock:null,modifiers:[],params:[{name:"message",type:{name:"string"}},{name:"assignees",type:{name:"SelectorItems",alias:"SelectorItems"}},{name:"taskType",type:{name:"TaskType",alias:"TaskType"}},{name:"dueAt",type:{name:"string",nullable:!0}},{name:"completionRule",type:{name:"TaskCompletionRule",alias:"TaskCompletionRule"}},{name:"onSuccess",type:{name:"Function",nullable:!0}},{name:"onError",type:{name:"Function",nullable:!0}}],returns:{type:{name:"void"}}},{name:"deleteTask",docblock:null,modifiers:[],params:[{name:"task",type:{name:"TaskNew",alias:"TaskNew"}}],returns:{type:{name:"void"}}},{name:"updateTask",docblock:null,modifiers:[],params:[{name:"task",type:{name:"TaskUpdatePayload",alias:"TaskUpdatePayload"}},{name:"onSuccess",type:{name:"Function",nullable:!0}},{name:"onError",type:{name:"Function",nullable:!0}}],returns:{type:{name:"void"}}},{name:"updateTaskAssignment",docblock:null,modifiers:[],params:[{name:"taskId",type:{name:"string"}},{name:"taskAssignmentId",type:{name:"string"}},{name:"status",type:{name:"TaskAssignmentStatus",alias:"TaskAssignmentStatus"}}],returns:{type:{name:"void"}}},{name:"deleteComment",docblock:"Deletes a comment via the API.\n\n@param {Object} args - A subset of the comment\n@return void",modifiers:[],params:[{name:"{ id, permissions }: { id: string, permissions: BoxItemPermission }",type:{name:"signature",type:"object",raw:"{ id: string, permissions: BoxItemPermission }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"permissions",value:{name:"BoxItemPermission",required:!0}}]}}}],returns:{description:"void",type:{name:"void"}},description:"Deletes a comment via the API."},{name:"updateComment",docblock:null,modifiers:[],params:[{name:"id",type:{name:"string"}},{name:"text",type:{name:"string"}},{name:"hasMention",type:{name:"boolean"}},{name:"permissions",type:{name:"BoxItemPermission",alias:"BoxItemPermission"}},{name:"onSuccess",type:{name:"Function",nullable:!0}},{name:"onError",type:{name:"Function",nullable:!0}}],returns:{type:{name:"void"}}},{name:"createComment",docblock:"Posts a new comment to the API\n\n@param {string} text - The comment's text\n@param {boolean} hasMention - The comment's text\n@return {void}",modifiers:[],params:[{name:"text",description:"The comment's text",type:{name:"string"},optional:!1},{name:"hasMention",description:"The comment's text",type:{name:"boolean"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Posts a new comment to the API"},{name:"deleteAppActivity",docblock:"Deletes an app activity item via the API.\n\n@param {Object} args - A subset of the app activity\n@return void",modifiers:[],params:[{name:"{ id }: { id: string }",type:{name:"signature",type:"object",raw:"{ id: string }",signature:{properties:[{key:"id",value:{name:"string",required:!0}}]}}}],returns:{description:"void",type:{name:"void"}},description:"Deletes an app activity item via the API."},{name:"fetchFeedItems",docblock:"Fetches the feed items for the sidebar\n\n@param {boolean} shouldDestroy true if the api factory should be destroyed",modifiers:[],params:[{name:"shouldRefreshCache"},{name:"shouldDestroy",description:"true if the api factory should be destroyed",type:{name:"boolean"},optional:!1}],returns:null,description:"Fetches the feed items for the sidebar"},{name:"fetchFeedItemsSuccessCallback",docblock:"Handles a successful feed API fetch\n\n@private\n@param {Array} feedItems - the feed items\n@return {void}",modifiers:[],params:[{name:"feedItems",description:"the feed items",type:{name:"FeedItems",alias:"FeedItems"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Handles a successful feed API fetch"},{name:"fetchFeedItemsErrorCallback",docblock:"Handles a failed feed item fetch\n\n@private\n@param {Error} e - API error\n@return {void}",modifiers:[],params:[{name:"feedItems",type:{name:"FeedItems",alias:"FeedItems"}}],returns:{description:null,type:{name:"void"}},description:"Handles a failed feed item fetch"},{name:"errorCallback",docblock:"Network error callback\n\n@private\n@param {Error} error - Error object\n@param {Error} code - the code for the error\n@param {Object} contextInfo - the context info for the error\n@return {void}",modifiers:[],params:[{name:"error",description:"Error object",type:{name:"ElementsXhrError",alias:"ElementsXhrError"},optional:!1},{name:"code",description:"the code for the error",type:{name:"string"},optional:!1},{name:"contextInfo",description:"the context info for the error",type:{name:"Object"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Network error callback"},{name:"fetchCurrentUserSuccessCallback",docblock:"User fetch success callback\n\n@private\n@param {Object} currentUser - User info object\n@return {void}",modifiers:[],params:[{name:"currentUser",description:"User info object",type:{name:"User",alias:"User"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"User fetch success callback"},{name:"getApproverContactsSuccessCallback",docblock:"File approver contacts fetch success callback\n\n@private\n@param {BoxItemCollection} collaborators - Collaborators response data\n@return {void}",modifiers:[],params:[{name:"collaborators",description:"Collaborators response data",type:{name:"Collaborators",alias:"Collaborators"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"File approver contacts fetch success callback"},{name:"getMentionContactsSuccessCallback",docblock:"File @mention contacts fetch success callback\n\n@private\n@param {BoxItemCollection} collaborators - Collaborators response data\n@return {void}",modifiers:[],params:[{name:"collaborators",description:"Collaborators response data",type:{name:"Collaborators",alias:"Collaborators"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"File @mention contacts fetch success callback"},{name:"getCollaborators",docblock:"Fetches file collaborators\n\n@param {Function} successCallback - the success callback\n@param {Function} errorCallback - the error callback\n@param {string} searchStr - the search string\n@return {void}",modifiers:[],params:[{name:"successCallback",description:"the success callback",type:{name:"Function",alias:"Function"},optional:!1},{name:"errorCallback",description:"the error callback",type:{name:"ElementsErrorCallback",alias:"ElementsErrorCallback"},optional:!1},{name:"searchStr",description:"the search string",type:{name:"string"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Fetches file collaborators"},{name:"fetchCurrentUserErrorCallback",docblock:"Handles a failed file user info fetch\n\n@private\n@param {ElementsXhrError} e - API error\n@return {void}",modifiers:[],params:[{name:"e",description:"API error",type:{name:"ElementsXhrError",alias:"ElementsXhrError"},optional:!1},{name:"code",type:{name:"string"}}],returns:{description:null,type:{name:"void"}},description:"Handles a failed file user info fetch"},{name:"getAvatarUrl",docblock:"Gets the user avatar URL\n\n@param {string} userId the user id\n@param {string} fileId the file id\n@return the user avatar URL string for a given user with access token attached",modifiers:["async"],params:[{name:"userId",description:"the user id",type:{name:"string"},optional:!1}],returns:{description:"the user avatar URL string for a given user with access token attached",type:{name:"Promise",elements:[{name:"string",nullable:!0}],raw:"Promise<?string>"}},description:"Gets the user avatar URL"},{name:"onTaskModalClose",docblock:null,modifiers:[],params:[],returns:null},{name:"refresh",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"renderAddTaskButton",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ActivitySidebar",props:{isDisabled:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:""},onCommentCreate:{defaultValue:{value:"noop",computed:!0},required:!1,flowType:{name:"Function"},description:""},onCommentDelete:{defaultValue:{value:"noop",computed:!0},required:!1,flowType:{name:"signature",type:"function",raw:"(comment: Comment) => any",signature:{arguments:[{name:"comment",type:{name:"Comment"}}],return:{name:"any"}}},description:""},onCommentUpdate:{defaultValue:{value:"noop",computed:!0},required:!1,flowType:{name:"signature",type:"function",raw:"() => any",signature:{arguments:[],return:{name:"any"}}},description:""},onTaskAssignmentUpdate:{defaultValue:{value:"noop",computed:!0},required:!1,flowType:{name:"Function"},description:""},onTaskCreate:{defaultValue:{value:"noop",computed:!0},required:!1,flowType:{name:"Function"},description:""},onTaskDelete:{defaultValue:{value:"noop",computed:!0},required:!1,flowType:{name:"signature",type:"function",raw:"(id: string) => any",signature:{arguments:[{name:"id",type:{name:"string"}}],return:{name:"any"}}},description:""},onTaskUpdate:{defaultValue:{value:"noop",computed:!0},required:!1,flowType:{name:"signature",type:"function",raw:"() => any",signature:{arguments:[],return:{name:"any"}}},description:""},api:{required:!0,flowType:{name:"API"},description:""},features:{required:!0,flowType:{name:"FeatureConfig"},description:""},elementId:{required:!0,flowType:{name:"string"},description:""},file:{required:!0,flowType:{name:"BoxItem"},description:""},onVersionHistoryClick:{required:!1,flowType:{name:"Function"},description:""},translations:{required:!1,flowType:{name:"Translations"},description:""},activeFeedEntryId:{required:!1,flowType:{name:"string"},description:""},activeFeedEntryType:{required:!1,flowType:{name:"FocusableFeedItemType"},description:""},currentUser:{required:!1,flowType:{name:"User"},description:""},getUserProfileUrl:{required:!1,flowType:{name:"GetProfileUrlCallback"},description:""}}};__webpack_exports__.default=flow_default()([Object(common_logger.a)(constants.Jd),Object(error_boundary.a)(constants.Jd),api_context.b,feature_checking.withFeatureConsumer])(ActivitySidebar_ActivitySidebar);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/ActivitySidebar.js"]={name:"ActivitySidebar",docgenInfo:ActivitySidebar_ActivitySidebar.__docgenInfo,path:"src/elements/content-sidebar/ActivitySidebar.js"})}}]);
//# sourceMappingURL=activity-sidebar.84720d5f22f57bab8d32.bundle.js.map