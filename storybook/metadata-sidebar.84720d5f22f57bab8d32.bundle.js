/*!
 * Box UI Element
 * 
 * Copyright 2019 Box, Inc. All rights reserved.
 * 
 * This product includes software developed by Box, Inc. ("Box")
 * (http://www.box.com)
 * 
 * ALL BOX SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL BOX BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 * See the Box license for the specific language governing permissions
 * and limitations under the license.
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{3190:function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_accessible_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),IconEdit=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?"#999":_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?14:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?14:_ref$width;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_accessible_svg__WEBPACK_IMPORTED_MODULE_1__.a,{className:"icon-edit ".concat(className),height:height,title:title,viewBox:"0 0 14 14",width:width},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{className:"fill-color",d:"M3.21 7.89l6.47-6.48a2 2 0 0 1 2.88 2.78h-.05L6 10.72 3.21 7.89zM2.24 9l2.83 2.83L1.67 13c-.52.18-.79-.1-.62-.61z",fill:color}))};IconEdit.displayName="IconEdit",IconEdit.__docgenInfo={description:"",methods:[],displayName:"IconEdit",props:{className:{defaultValue:{value:"''",computed:!1},required:!1},color:{defaultValue:{value:"'#999'",computed:!1},required:!1},height:{defaultValue:{value:"14",computed:!1},required:!1},width:{defaultValue:{value:"14",computed:!1},required:!1}}},__webpack_exports__.a=IconEdit,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconEdit.js"]={name:"IconEdit",docgenInfo:IconEdit.__docgenInfo,path:"src/icons/general/IconEdit.js"})},3199:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(6),__webpack_require__(11),__webpack_require__(18),__webpack_require__(19),__webpack_require__(12),__webpack_require__(9),__webpack_require__(20),__webpack_require__(10),__webpack_require__(16),__webpack_require__(15);var react__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(0),classnames__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(8),classnames__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_11__),lodash_omit__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(62),lodash_omit__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(lodash_omit__WEBPACK_IMPORTED_MODULE_12__),react_animate_height__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(3206),react_animate_height__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(react_animate_height__WEBPACK_IMPORTED_MODULE_13__),_common_variables__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(1123),_icons_general_IconCaretDown__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(1121),_plain_button__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(183),_styles_variables__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(14);__webpack_require__(3207);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _ref=react__WEBPACK_IMPORTED_MODULE_10__.createElement(_icons_general_IconCaretDown__WEBPACK_IMPORTED_MODULE_15__.a,{className:"collapsible-card-header-caret",color:_styles_variables__WEBPACK_IMPORTED_MODULE_17__.bdlGray50,width:8}),Collapsible=function(_React$PureComponent){function Collapsible(props){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Collapsible),_this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(Collapsible).call(this,props)),_defineProperty(_assertThisInitialized(_this),"toggleVisibility",(function(){var _this$props=_this.props,onOpen=_this$props.onOpen,onClose=_this$props.onClose;_this.setState((function(prevState){return{isOpen:!prevState.isOpen}}),(function(){var isOpen=_this.state.isOpen;isOpen&&onOpen?onOpen(_assertThisInitialized(_this)):!isOpen&&onClose&&onClose(_assertThisInitialized(_this))}))})),_this.state={isOpen:props.isOpen},_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Collapsible,_React$PureComponent),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Collapsible,[{key:"render",value:function render(){var isOpen=this.state.isOpen,_this$props2=this.props,animationDuration=_this$props2.animationDuration,_this$props2$buttonPr=_this$props2.buttonProps,buttonProps=void 0===_this$props2$buttonPr?{}:_this$props2$buttonPr,children=_this$props2.children,className=_this$props2.className,isBordered=_this$props2.isBordered,hasStickyHeader=_this$props2.hasStickyHeader,headerActionItems=_this$props2.headerActionItems,title=_this$props2.title,sectionClassName=classnames__WEBPACK_IMPORTED_MODULE_11___default()("collapsible-card",{"is-open":isOpen},{"is-bordered":isBordered},className),interactionTarget=buttonProps[_common_variables__WEBPACK_IMPORTED_MODULE_14__.a],modifiedButtonProps=lodash_omit__WEBPACK_IMPORTED_MODULE_12___default()(buttonProps,[_common_variables__WEBPACK_IMPORTED_MODULE_14__.a]),buttonClassName=hasStickyHeader?"collapsible-card-header has-sticky-header":"collapsible-card-header";return interactionTarget&&(modifiedButtonProps[_common_variables__WEBPACK_IMPORTED_MODULE_14__.a]="".concat(interactionTarget).concat(isOpen?"collapse":"expand")),react__WEBPACK_IMPORTED_MODULE_10__.createElement("div",{className:sectionClassName},react__WEBPACK_IMPORTED_MODULE_10__.createElement("div",{className:buttonClassName},react__WEBPACK_IMPORTED_MODULE_10__.createElement(_plain_button__WEBPACK_IMPORTED_MODULE_16__.a,_extends({},modifiedButtonProps,{className:"collapsible-card-title",onClick:this.toggleVisibility,type:"button"}),title,_ref),isOpen&&headerActionItems),react__WEBPACK_IMPORTED_MODULE_10__.createElement(react_animate_height__WEBPACK_IMPORTED_MODULE_13___default.a,{duration:animationDuration,height:isOpen?"auto":0},react__WEBPACK_IMPORTED_MODULE_10__.createElement("div",{className:"collapsible-card-content"},children)))}}]),Collapsible}(react__WEBPACK_IMPORTED_MODULE_10__.PureComponent);Collapsible.displayName="Collapsible",_defineProperty(Collapsible,"defaultProps",{buttonProps:{},className:"",isOpen:!0,animationDuration:100}),Collapsible.__docgenInfo={description:"",methods:[{name:"toggleVisibility",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Collapsible",props:{buttonProps:{defaultValue:{value:"{}",computed:!1},required:!1,flowType:{name:"Object"},description:"Other props (e.g. resin target names) to be included in the button"},className:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:"CSS class for the wrapper div"},isOpen:{defaultValue:{value:"true",computed:!1},required:!1,flowType:{name:"boolean"},description:"Initial state of the collapsible card"},animationDuration:{defaultValue:{value:"100",computed:!1},required:!1,flowType:{name:"number"},description:"Duration of animation (milliseconds)"},children:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:"Content to be displayed in the card if it's expanded"},hasStickyHeader:{required:!1,flowType:{name:"boolean"},description:"Determines look of component"},headerActionItems:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:"Determines stickiness of the header"},isBordered:{required:!1,flowType:{name:"boolean"},description:"Determines optional header action items"},onClose:{required:!1,flowType:{name:"Function"},description:"callback called when collapsible is opened"},onOpen:{required:!1,flowType:{name:"Function"},description:"callback called when collapsible is collapsed"},title:{required:!0,flowType:{name:"union",raw:"string | React.Node",elements:[{name:"string"},{name:"ReactNode",raw:"React.Node"}]},description:"Title string or component"}}},__webpack_exports__.a=Collapsible,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/collapsible/Collapsible.js"]={name:"Collapsible",docgenInfo:Collapsible.__docgenInfo,path:"src/components/collapsible/Collapsible.js"})},3206:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react2=_interopRequireDefault(__webpack_require__(0)),_propTypes2=_interopRequireDefault(__webpack_require__(2)),_classnames2=_interopRequireDefault(__webpack_require__(8));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ANIMATION_STATE_CLASSES={animating:"rah-animating",animatingUp:"rah-animating--up",animatingDown:"rah-animating--down",animatingToHeightZero:"rah-animating--to-height-zero",animatingToHeightAuto:"rah-animating--to-height-auto",animatingToHeightSpecific:"rah-animating--to-height-specific",static:"rah-static",staticHeightZero:"rah-static--height-zero",staticHeightAuto:"rah-static--height-auto",staticHeightSpecific:"rah-static--height-specific"},PROPS_TO_OMIT=["animateOpacity","animationStateClasses","applyInlineTransitions","children","contentClassName","delay","duration","easing","height","onAnimationEnd","onAnimationStart"];function omit(obj){for(var _len=arguments.length,keys=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)keys[_key-1]=arguments[_key];if(!keys.length)return obj;for(var res={},objectKeys=Object.keys(obj),i=0;i<objectKeys.length;i++){var key=objectKeys[i];-1===keys.indexOf(key)&&(res[key]=obj[key])}return res}function isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function isPercentage(height){return"string"==typeof height&&height.search("%")===height.length-1&&isNumber(height.substr(0,height.length-1))}function runCallback(callback,params){callback&&"function"==typeof callback&&callback(params)}var AnimateHeight=function(_React$Component){function AnimateHeight(props){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AnimateHeight);var _this=function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(AnimateHeight.__proto__||Object.getPrototypeOf(AnimateHeight)).call(this,props)),height="auto",overflow="visible";isNumber(props.height)?(height=props.height<0?0:props.height,overflow="hidden"):isPercentage(props.height)&&(height=props.height,overflow="hidden"),_this.animationStateClasses=_extends({},ANIMATION_STATE_CLASSES,props.animationStateClasses);var animationStateClasses=_this.getStaticStateClasses(height);return _this.state={animationStateClasses:animationStateClasses,height:height,overflow:overflow,shouldUseTransitions:!1},_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(AnimateHeight,_React$Component),_createClass(AnimateHeight,[{key:"componentDidMount",value:function componentDidMount(){var height=this.state.height;this.contentElement&&this.contentElement.style&&this.hideContent(height)}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){var _this2=this,_props=this.props,delay=_props.delay,duration=_props.duration,height=_props.height,onAnimationEnd=_props.onAnimationEnd,onAnimationStart=_props.onAnimationStart;if(this.contentElement&&height!==prevProps.height){var _cx;this.showContent(prevState.height),this.contentElement.style.overflow="hidden";var contentHeight=this.contentElement.offsetHeight;this.contentElement.style.overflow="";var totalDuration=duration+delay,newHeight=null,timeoutState={height:null,overflow:"hidden"},isCurrentHeightAuto="auto"===prevState.height;isNumber(height)?(newHeight=height<0?0:height,timeoutState.height=newHeight):isPercentage(height)?(newHeight=height,timeoutState.height=newHeight):(newHeight=contentHeight,timeoutState.height="auto",timeoutState.overflow=null),isCurrentHeightAuto&&(timeoutState.height=newHeight,newHeight=contentHeight);var animationStateClasses=(0,_classnames2.default)((_defineProperty(_cx={},this.animationStateClasses.animating,!0),_defineProperty(_cx,this.animationStateClasses.animatingUp,"auto"===prevProps.height||height<prevProps.height),_defineProperty(_cx,this.animationStateClasses.animatingDown,"auto"===height||height>prevProps.height),_defineProperty(_cx,this.animationStateClasses.animatingToHeightZero,0===timeoutState.height),_defineProperty(_cx,this.animationStateClasses.animatingToHeightAuto,"auto"===timeoutState.height),_defineProperty(_cx,this.animationStateClasses.animatingToHeightSpecific,timeoutState.height>0),_cx)),timeoutAnimationStateClasses=this.getStaticStateClasses(timeoutState.height);this.setState({animationStateClasses:animationStateClasses,height:newHeight,overflow:"hidden",shouldUseTransitions:!isCurrentHeightAuto}),clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),isCurrentHeightAuto?(timeoutState.shouldUseTransitions=!0,function startAnimationHelper(callback){requestAnimationFrame((function(){requestAnimationFrame((function(){callback()}))}))}((function(){_this2.setState(timeoutState),runCallback(onAnimationStart,{newHeight:timeoutState.height})})),this.animationClassesTimeoutID=setTimeout((function(){_this2.setState({animationStateClasses:timeoutAnimationStateClasses,shouldUseTransitions:!1}),_this2.hideContent(timeoutState.height),runCallback(onAnimationEnd,{newHeight:timeoutState.height})}),totalDuration)):(runCallback(onAnimationStart,{newHeight:newHeight}),this.timeoutID=setTimeout((function(){timeoutState.animationStateClasses=timeoutAnimationStateClasses,timeoutState.shouldUseTransitions=!1,_this2.setState(timeoutState),"auto"!==height&&_this2.hideContent(newHeight),runCallback(onAnimationEnd,{newHeight:newHeight})}),totalDuration))}}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),this.timeoutID=null,this.animationClassesTimeoutID=null,this.animationStateClasses=null}},{key:"showContent",value:function showContent(height){0===height&&(this.contentElement.style.display="")}},{key:"hideContent",value:function hideContent(newHeight){0===newHeight&&(this.contentElement.style.display="none")}},{key:"getStaticStateClasses",value:function getStaticStateClasses(height){var _cx2;return(0,_classnames2.default)((_defineProperty(_cx2={},this.animationStateClasses.static,!0),_defineProperty(_cx2,this.animationStateClasses.staticHeightZero,0===height),_defineProperty(_cx2,this.animationStateClasses.staticHeightSpecific,height>0),_defineProperty(_cx2,this.animationStateClasses.staticHeightAuto,"auto"===height),_cx2))}},{key:"render",value:function render(){var _cx3,_this3=this,_props2=this.props,animateOpacity=_props2.animateOpacity,applyInlineTransitions=_props2.applyInlineTransitions,children=_props2.children,className=_props2.className,contentClassName=_props2.contentClassName,duration=_props2.duration,easing=_props2.easing,delay=_props2.delay,style=_props2.style,_state=this.state,height=_state.height,overflow=_state.overflow,animationStateClasses=_state.animationStateClasses,shouldUseTransitions=_state.shouldUseTransitions,componentStyle=_extends({},style,{height:height,overflow:overflow||style.overflow});shouldUseTransitions&&applyInlineTransitions&&(componentStyle.transition="height "+duration+"ms "+easing+" "+delay+"ms",style.transition&&(componentStyle.transition=style.transition+", "+componentStyle.transition),componentStyle.WebkitTransition=componentStyle.transition);var contentStyle={};animateOpacity&&(contentStyle.transition="opacity "+duration+"ms "+easing+" "+delay+"ms",contentStyle.WebkitTransition=contentStyle.transition,0===height&&(contentStyle.opacity=0));var componentClasses=(0,_classnames2.default)((_defineProperty(_cx3={},animationStateClasses,!0),_defineProperty(_cx3,className,className),_cx3));return _react2.default.createElement("div",_extends({},omit.apply(void 0,[this.props].concat(PROPS_TO_OMIT)),{"aria-hidden":0===height,className:componentClasses,style:componentStyle}),_react2.default.createElement("div",{className:contentClassName,style:contentStyle,ref:function ref(el){return _this3.contentElement=el}},children))}}]),AnimateHeight}(_react2.default.Component);AnimateHeight.propTypes={animateOpacity:_propTypes2.default.bool,animationStateClasses:_propTypes2.default.object,applyInlineTransitions:_propTypes2.default.bool,children:_propTypes2.default.any.isRequired,className:_propTypes2.default.string,contentClassName:_propTypes2.default.string,duration:_propTypes2.default.number,delay:_propTypes2.default.number,easing:_propTypes2.default.string,height:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),onAnimationEnd:_propTypes2.default.func,onAnimationStart:_propTypes2.default.func,style:_propTypes2.default.object},AnimateHeight.defaultProps={animateOpacity:!1,animationStateClasses:ANIMATION_STATE_CLASSES,applyInlineTransitions:!0,duration:250,delay:0,easing:"ease",style:{}},exports.default=AnimateHeight},3207:function(module,exports,__webpack_require__){},3225:function(module,exports){var k_r_submitter=/^(?:submit|button|image|reset|file)$/i,k_r_success_contrls=/^(?:input|select|textarea|keygen)/i,brackets=/(\[[^\[\]]*\])/g;function hash_serializer(result,key,value){if(key.match(brackets)){!function hash_assign(result,keys,value){if(0===keys.length)return result=value;var key=keys.shift(),between=key.match(/^\[(.+?)\]$/);if("[]"===key)return result=result||[],Array.isArray(result)?result.push(hash_assign(null,keys,value)):(result._values=result._values||[],result._values.push(hash_assign(null,keys,value))),result;if(between){var string=between[1],index=+string;isNaN(index)?(result=result||{})[string]=hash_assign(result[string],keys,value):(result=result||[])[index]=hash_assign(result[index],keys,value)}else result[key]=hash_assign(result[key],keys,value);return result}(result,function parse_keys(string){var keys=[],children=new RegExp(brackets),match=/^([^\[\]]*)/.exec(string);for(match[1]&&keys.push(match[1]);null!==(match=children.exec(string));)keys.push(match[1]);return keys}(key),value)}else{var existing=result[key];existing?(Array.isArray(existing)||(result[key]=[existing]),result[key].push(value)):result[key]=value}return result}function str_serialize(result,key,value){return value=value.replace(/(\r)?\n/g,"\r\n"),value=(value=encodeURIComponent(value)).replace(/%20/g,"+"),result+(result?"&":"")+encodeURIComponent(key)+"="+value}module.exports=function serialize(form,options){"object"!=typeof options?options={hash:!!options}:void 0===options.hash&&(options.hash=!0);for(var result=options.hash?{}:"",serializer=options.serializer||(options.hash?hash_serializer:str_serialize),elements=form&&form.elements?form.elements:[],radio_store=Object.create(null),i=0;i<elements.length;++i){var element=elements[i];if((options.disabled||!element.disabled)&&element.name&&(k_r_success_contrls.test(element.nodeName)&&!k_r_submitter.test(element.type))){var key=element.name,val=element.value;if("checkbox"!==element.type&&"radio"!==element.type||element.checked||(val=void 0),options.empty){if("checkbox"!==element.type||element.checked||(val=""),"radio"===element.type&&(radio_store[element.name]||element.checked?element.checked&&(radio_store[element.name]=!0):radio_store[element.name]=!1),null==val&&"radio"==element.type)continue}else if(!val)continue;if("select-multiple"!==element.type)result=serializer(result,key,val);else{val=[];for(var selectOptions=element.options,isSelectedOptions=!1,j=0;j<selectOptions.length;++j){var option=selectOptions[j],allowedEmpty=options.empty&&!option.value,hasValue=option.value||allowedEmpty;option.selected&&hasValue&&(isSelectedOptions=!0,result=options.hash&&"[]"!==key.slice(key.length-2)?serializer(result,key+"[]",option.value):serializer(result,key,option.value))}!isSelectedOptions&&options.empty&&(result=serializer(result,key,""))}}}if(options.empty)for(var key in radio_store)radio_store[key]||(result=serializer(result,key,""));return result}},3298:function(module,exports,__webpack_require__){},3299:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(35),isArray=__webpack_require__(564),nativeReverse=[].reverse,test=[1,2];$({target:"Array",proto:!0,forced:String(test)===String(test.reverse())},{reverse:function reverse(){return isArray(this)&&(this.length=this.length),nativeReverse.call(this)}})},3300:function(module,exports,__webpack_require__){},3301:function(module,exports,__webpack_require__){},3302:function(module,exports,__webpack_require__){},3303:function(module,exports,__webpack_require__){},3304:function(module,exports,__webpack_require__){},3305:function(module,exports,__webpack_require__){},3306:function(module,exports,__webpack_require__){},3307:function(module,exports,__webpack_require__){},3308:function(module,exports,__webpack_require__){},3309:function(module,exports,__webpack_require__){},3311:function(module,exports,__webpack_require__){},3312:function(module,exports,__webpack_require__){},3443:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(6),__webpack_require__(11),__webpack_require__(18),__webpack_require__(19),__webpack_require__(24),__webpack_require__(1108),__webpack_require__(12),__webpack_require__(30),__webpack_require__(210),__webpack_require__(560),__webpack_require__(33),__webpack_require__(34),__webpack_require__(20),__webpack_require__(17),__webpack_require__(10),__webpack_require__(16),__webpack_require__(25),__webpack_require__(15);var react=__webpack_require__(0),flow=__webpack_require__(558),flow_default=__webpack_require__.n(flow),get=__webpack_require__(13),get_default=__webpack_require__.n(get),noop=__webpack_require__(7),noop_default=__webpack_require__.n(noop),index_es=__webpack_require__(3),accessible_svg=(__webpack_require__(313),__webpack_require__(5)),IconAddMetadataEmptyState_ref2=react.createElement("path",{d:"M117.944 95.189l3.215-3.832a.996.996 0 0 1 1.407-.121c.423.355.475.99.126 1.406l-3.861 4.6a.993.993 0 0 1-1.4.128l-3.078-2.583a.993.993 0 0 1-.116-1.403 1 1 0 0 1 1.401-.13l2.306 1.935zm12-40l3.215-3.832a.996.996 0 0 1 1.407-.121c.423.355.475.99.126 1.406l-3.861 4.6a.993.993 0 0 1-1.4.128l-3.078-2.583a.993.993 0 0 1-.116-1.403 1 1 0 0 1 1.401-.13l2.306 1.935z",fill:"#FFF"}),IconAddMetadataEmptyState_ref3=react.createElement("path",{d:"M27 40.49c0-.823.668-1.49 1.494-1.49h25.164c.825 0 1.751.62 2.07 1.386l2.869 6.9c.318.766-.096 1.386-.933 1.386H28.51A1.498 1.498 0 0 1 27 47.182V40.49z",fill:"#22A7F0",fillOpacity:".1"}),IconAddMetadataEmptyState=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?"#0061D5":_ref$color,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?140:_ref$width;return react.createElement(accessible_svg.a,{className:"icon-add-metadata-empty-state ".concat(className),title:title,viewBox:"0 0 140 105",width:width},react.createElement("g",{fill:"none",fillRule:"evenodd"},react.createElement("path",{d:"M92 1.134V.492a.501.501 0 0 1 1-.002v.644c.152.088.278.214.366.366h.644a.5.5 0 0 1 .49.5c0 .276-.215.5-.49.5h-.644a1.005 1.005 0 0 1-.366.366v.644a.5.5 0 0 1-.5.49.506.506 0 0 1-.5-.505v-.629a1.005 1.005 0 0 1-.366-.366h-.644a.5.5 0 0 1-.49-.5c0-.276.215-.5.49-.5h.644c.088-.152.214-.278.366-.366zm-90.5 83.5v-.642a.501.501 0 0 1 1-.002v.644c.152.088.278.214.366.366h.644a.5.5 0 0 1 .49.5c0 .276-.215.5-.49.5h-.644a1.005 1.005 0 0 1-.366.366v.644a.5.5 0 0 1-.5.49.506.506 0 0 1-.5-.505v-.629A1.005 1.005 0 0 1 1.134 86H.49a.5.5 0 0 1-.49-.5c0-.276.215-.5.49-.5h.644c.088-.152.214-.278.366-.366zm136 5.5v-.642a.501.501 0 0 1 1-.002v.644c.152.088.278.214.366.366h.644a.5.5 0 0 1 .49.5c0 .276-.215.5-.49.5h-.644a1.005 1.005 0 0 1-.366.366v.644a.5.5 0 0 1-.5.49.506.506 0 0 1-.5-.505v-.629a1.005 1.005 0 0 1-.366-.366h-.644a.5.5 0 0 1-.49-.5c0-.276.215-.5.49-.5h.644c.088-.152.214-.278.366-.366zm-29-78v-.642a.501.501 0 0 1 1-.002v.644c.152.088.278.214.366.366h.644a.5.5 0 0 1 .49.5c0 .276-.215.5-.49.5h-.644a1.005 1.005 0 0 1-.366.366v.644a.5.5 0 0 1-.5.49.506.506 0 0 1-.5-.505v-.629a1.005 1.005 0 0 1-.366-.366h-.644a.5.5 0 0 1-.49-.5c0-.276.215-.5.49-.5h.644c.088-.152.214-.278.366-.366zm-80 3.5v-.642a.501.501 0 0 1 1-.002v.644c.152.088.278.214.366.366h.644a.5.5 0 0 1 .49.5c0 .276-.215.5-.49.5h-.644a1.005 1.005 0 0 1-.366.366v.644a.5.5 0 0 1-.5.49.506.506 0 0 1-.5-.505v-.629a1.005 1.005 0 0 1-.366-.366h-.644a.5.5 0 0 1-.49-.5c0-.276.215-.5.49-.5h.644c.088-.152.214-.278.366-.366zm-5.563 8.075v-.402a.313.313 0 0 1 .625 0v.402a.628.628 0 0 1 .23.229h.401c.17 0 .307.144.307.312a.308.308 0 0 1-.307.313h-.402a.628.628 0 0 1-.229.228v.402a.313.313 0 0 1-.625.004v-.406a.628.628 0 0 1-.228-.229h-.402A.313.313 0 0 1 22 24.25c0-.173.134-.313.307-.313h.402a.628.628 0 0 1 .229-.228zm-11.5 79v-.402a.313.313 0 0 1 .626 0v.402a.628.628 0 0 1 .228.228h.402c.17 0 .307.145.307.313a.308.308 0 0 1-.307.313h-.402a.628.628 0 0 1-.229.228v.402a.313.313 0 0 1-.624.004v-.406a.628.628 0 0 1-.23-.228h-.401a.313.313 0 0 1-.307-.313c0-.173.134-.313.307-.313h.402a.628.628 0 0 1 .229-.228z",fill:color}),react.createElement("path",{d:"M17 54c0-3.866 3.133-7 6.992-7h106.016c3.861 0 6.992 3.142 6.992 7 0 3.866-3.133 7-6.992 7H23.992C20.131 61 17 57.858 17 54zm-6 20c0-3.866 3.133-7 6.992-7h106.016c3.861 0 6.992 3.142 6.992 7 0 3.866-3.133 7-6.992 7H17.992C14.131 81 11 77.858 11 74zM5 94c0-3.866 3.133-7 6.992-7h106.016c3.861 0 6.992 3.142 6.992 7 0 3.866-3.133 7-6.992 7H11.992C8.131 101 5 97.858 5 94z",fill:color,fillOpacity:".1"}),react.createElement("path",{d:"M130 61a7 7 0 1 1 0-14 7 7 0 0 1 0 14zm-6 20a7 7 0 1 1 0-14 7 7 0 0 1 0 14zm0-2a5 5 0 1 0 0-10 5 5 0 0 0 0 10zm-6 22a7 7 0 1 1 0-14 7 7 0 0 1 0 14z",fill:color}),IconAddMetadataEmptyState_ref2,react.createElement("path",{d:"M25 38.49c0-.823.668-1.49 1.509-1.49H54.77c.833 0 1.788.605 2.139 1.365l3.207 6.942c.348.754-.036 1.365-.86 1.365H26.491c-.824 0-1.491-.665-1.491-1.49V38.49z",fill:"#FFF",stroke:color,strokeWidth:"2"}),IconAddMetadataEmptyState_ref3,react.createElement("rect",{fill:"#FFF",height:"53.197",rx:"1.5",stroke:color,strokeWidth:"2",width:"80",x:"25",y:"43"}),react.createElement("path",{d:"M27 82.214c0-.827.657-1.34 1.475-1.185 0 0 3.614 1.268 23.858 1.268 12.585 0 18.165 3.312 25.334 3.312 14.499 0 23.954-4.331 23.954-4.331.762-.31 1.379.115 1.379.936v10.284c0 .827-.68 1.497-1.501 1.497H28.501A1.503 1.503 0 0 1 27 92.498V82.214z",fill:color,fillOpacity:".1"})))};IconAddMetadataEmptyState.displayName="IconAddMetadataEmptyState",IconAddMetadataEmptyState.__docgenInfo={description:"",methods:[],displayName:"IconAddMetadataEmptyState",props:{className:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},color:{defaultValue:{value:"'#0061D5'",computed:!1},required:!1,flowType:{name:"string"},description:""},width:{defaultValue:{value:"140",computed:!1},required:!1,flowType:{name:"number"},description:""},title:{required:!1,flowType:{name:"union",raw:"string | React.Element<any>",elements:[{name:"string"},{name:"ReactElement",raw:"React.Element<any>",elements:[{name:"any"}]}]},description:"A text-only string describing the icon if it's not purely decorative for accessibility"}}};var general_IconAddMetadataEmptyState=IconAddMetadataEmptyState;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconAddMetadataEmptyState.js"]={name:"IconAddMetadataEmptyState",docgenInfo:IconAddMetadataEmptyState.__docgenInfo,path:"src/icons/general/IconAddMetadataEmptyState.js"});var messages=__webpack_require__(158),EmptyContent_ref2=(__webpack_require__(3298),react.createElement(general_IconAddMetadataEmptyState,null)),EmptyContent_EmptyContent=function(_ref){var canAdd=_ref.canAdd;return react.createElement("div",{className:"metadata-instance-editor-no-instances"},EmptyContent_ref2,react.createElement("p",{className:"metadata-instance-editor-no-instances--call-out"},react.createElement(index_es.b,messages.a.noMetadata)),canAdd&&react.createElement("p",{className:"metadata-instance-editor-no-instances--how-add-template"},react.createElement(index_es.b,messages.a.noMetadataAddTemplate)))};EmptyContent_EmptyContent.displayName="EmptyContent",EmptyContent_EmptyContent.__docgenInfo={description:"",methods:[],displayName:"EmptyContent",props:{canAdd:{required:!1,flowType:{name:"boolean"},description:""}}};var metadata_instance_editor_EmptyContent=EmptyContent_EmptyContent;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/features/metadata-instance-editor/EmptyContent.js"]={name:"EmptyContent",docgenInfo:EmptyContent_EmptyContent.__docgenInfo,path:"src/features/metadata-instance-editor/EmptyContent.js"});var InlineError=__webpack_require__(1109),classnames=(__webpack_require__(9),__webpack_require__(8)),classnames_default=__webpack_require__.n(classnames),isEqual=__webpack_require__(784),isEqual_default=__webpack_require__.n(isEqual),cloneDeep=__webpack_require__(137),cloneDeep_default=__webpack_require__.n(cloneDeep),Collapsible=__webpack_require__(3199),Form=__webpack_require__(3208),LoadingIndicatorWrapper=__webpack_require__(1110),PlainButton=__webpack_require__(51),tooltip=__webpack_require__(76),variables=__webpack_require__(14),IconMetadataColored=function(_ref){var fill,_ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,color=_ref.color,title=_ref.title,type=_ref.type,_ref$width=_ref.width,width=void 0===_ref$width?16:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?16:_ref$height;return fill=color||("cascade"===type?variables.bdlPurpleRain:variables.bdlBoxBlue),react.createElement(accessible_svg.a,{className:"icon-metadata ".concat(className),height:height,title:title,viewBox:"0 0 16 16",width:width},react.createElement("path",{className:"fill-color",d:"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zm-2.515-5.879L6.2 7.263l1.376 2.202a.5.5 0 0 0 .848 0L9.8 7.263l.715 2.858a.5.5 0 0 0 .97-.242l-1-4a.5.5 0 0 0-.909-.144L8 8.257 6.424 5.735a.5.5 0 0 0-.91.144l-1 4a.5.5 0 0 0 .971.242z",fill:fill,fillRule:"evenodd"}))};IconMetadataColored.displayName="IconMetadataColored",IconMetadataColored.__docgenInfo={description:"",methods:[],displayName:"IconMetadataColored",props:{className:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},width:{defaultValue:{value:"16",computed:!1},required:!1,flowType:{name:"number"},description:""},height:{defaultValue:{value:"16",computed:!1},required:!1,flowType:{name:"number"},description:""},color:{required:!1,flowType:{name:"string"},description:""},title:{required:!1,flowType:{name:"union",raw:"string | React.Element<any>",elements:[{name:"string"},{name:"ReactElement",raw:"React.Element<any>",elements:[{name:"any"}]}]},description:""},type:{required:!1,flowType:{name:"union",raw:"'cascade' | 'default'",elements:[{name:"literal",value:"'cascade'"},{name:"literal",value:"'default'"}]},description:""}}};var general_IconMetadataColored=IconMetadataColored;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconMetadataColored.js"]={name:"IconMetadataColored",docgenInfo:IconMetadataColored.__docgenInfo,path:"src/icons/general/IconMetadataColored.js"});var IconAlertCircle=__webpack_require__(1814),IconEdit=__webpack_require__(3190),dom=__webpack_require__(70);__webpack_require__(3299),__webpack_require__(27),__webpack_require__(3300);function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var Toggle_ref2=react.createElement("div",{key:"toggle-simple-switch",className:"toggle-simple-switch"}),Toggle_Toggle=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,description=_ref.description,isDisabled=_ref.isDisabled,isOn=_ref.isOn,_ref$isToggleRightAli=_ref.isToggleRightAligned,isToggleRightAligned=void 0!==_ref$isToggleRightAli&&_ref$isToggleRightAli,label=_ref.label,name=_ref.name,onBlur=_ref.onBlur,onChange=_ref.onChange,rest=_objectWithoutProperties(_ref,["className","description","isDisabled","isOn","isToggleRightAligned","label","name","onBlur","onChange"]),classes=classnames_default()("toggle-container",className,{"is-toggle-right-aligned":isToggleRightAligned}),toggleElements=[Toggle_ref2,react.createElement("div",{key:"toggle-simple-label",className:"toggle-simple-label"},label)];return isToggleRightAligned&&(toggleElements=toggleElements.reverse()),react.createElement("div",{className:classes},react.createElement("label",{className:"toggle-simple"},react.createElement("input",_extends({checked:isOn,className:"toggle-simple-input",disabled:isDisabled,name:name,onBlur:onBlur,onChange:onChange,type:"checkbox"},rest)),toggleElements),description?react.createElement("div",{className:"toggle-simple-description"},description):null)};Toggle_Toggle.displayName="Toggle",Toggle_Toggle.__docgenInfo={description:"",methods:[],displayName:"Toggle",props:{className:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},isToggleRightAligned:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:"If set to true, the toggle will be aligned to the right"},description:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:"Description of the input"},isDisabled:{required:!1,flowType:{name:"boolean"},description:""},isOn:{required:!1,flowType:{name:"boolean"},description:"Toggle state"},label:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:"Label displayed for the input"},name:{required:!1,flowType:{name:"string"},description:"Name of the input"},onBlur:{required:!1,flowType:{name:"signature",type:"function",raw:"(e: SyntheticInputEvent<HTMLInputElement>) => any",signature:{arguments:[{name:"e",type:{name:"SyntheticInputEvent",elements:[{name:"HTMLInputElement"}],raw:"SyntheticInputEvent<HTMLInputElement>"}}],return:{name:"any"}}},description:"blur callback function called with event as the argument"},onChange:{required:!1,flowType:{name:"signature",type:"function",raw:"(e: SyntheticInputEvent<HTMLInputElement>) => any",signature:{arguments:[{name:"e",type:{name:"SyntheticInputEvent",elements:[{name:"HTMLInputElement"}],raw:"SyntheticInputEvent<HTMLInputElement>"}}],return:{name:"any"}}},description:"change callback function called with event as the argument"},value:{required:!1,flowType:{name:"any"},description:"optional value for the toggles checkbox"}}};var toggle_Toggle=Toggle_Toggle;function ToggleField_extends(){return(ToggleField_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function ToggleField_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function ToggleField_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/toggle/Toggle.js"]={name:"Toggle",docgenInfo:Toggle_Toggle.__docgenInfo,path:"src/components/toggle/Toggle.js"});var ToggleField=function(_ref){var field=_ref.field,rest=(_ref.form,ToggleField_objectWithoutProperties(_ref,["field","form"])),value=field.value;return react.createElement(toggle_Toggle,ToggleField_extends({},field,rest,{isOn:!!value}))};ToggleField.displayName="ToggleField",ToggleField.__docgenInfo={description:"",methods:[],displayName:"ToggleField"};"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/toggle/ToggleField.js"]={name:"ToggleField",docgenInfo:ToggleField.__docgenInfo,path:"src/components/toggle/ToggleField.js"});__webpack_require__(3301);function RadioButton_extends(){return(RadioButton_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function RadioButton_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function RadioButton_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var onChangeStub=function(){},RadioButton_ref2=react.createElement("span",null),RadioButton_RadioButton=function(_ref){var isDisabled=_ref.isDisabled,_ref$isSelected=_ref.isSelected,description=_ref.description,_ref$hideLabel=_ref.hideLabel,label=_ref.label,name=_ref.name,value=_ref.value,rest=RadioButton_objectWithoutProperties(_ref,["isDisabled","isSelected","description","hideLabel","label","name","value"]);return react.createElement("div",{className:"radio-container"},react.createElement("label",{className:"radio-label"},react.createElement("input",RadioButton_extends({checked:void 0!==_ref$isSelected&&_ref$isSelected,disabled:isDisabled,name:name,onChange:onChangeStub,type:"radio",value:value},rest)),RadioButton_ref2,react.createElement("span",{className:void 0!==_ref$hideLabel&&_ref$hideLabel?"accessibility-hidden":""},label)),description?react.createElement("div",{className:"radio-description"},description):null)};RadioButton_RadioButton.displayName="RadioButton",RadioButton_RadioButton.__docgenInfo={description:"",methods:[],displayName:"RadioButton",props:{isSelected:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:""},hideLabel:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:""},description:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:""},isDisabled:{required:!1,flowType:{name:"boolean"},description:""},label:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:""},name:{required:!1,flowType:{name:"string"},description:""},value:{required:!0,flowType:{name:"string"},description:""}}};var radio_RadioButton=RadioButton_RadioButton;function RadioButtonField_extends(){return(RadioButtonField_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function RadioButtonField_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function RadioButtonField_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/radio/RadioButton.js"]={name:"RadioButton",docgenInfo:RadioButton_RadioButton.__docgenInfo,path:"src/components/radio/RadioButton.js"});var RadioButtonField=function(_ref){var field=_ref.field,value=(_ref.form,_ref.value),rest=RadioButtonField_objectWithoutProperties(_ref,["field","form","value"]),fieldValue=field.value,fieldRest=RadioButtonField_objectWithoutProperties(field,["value"]);return react.createElement(radio_RadioButton,RadioButtonField_extends({},fieldRest,rest,{value:value,isSelected:value===fieldValue}))};RadioButtonField.displayName="RadioButtonField",RadioButtonField.__docgenInfo={description:"",methods:[],displayName:"RadioButtonField"};function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function RadioGroup_extends(){return(RadioGroup_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function RadioGroup_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function RadioGroup_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/radio/RadioButtonField.js"]={name:"RadioButtonField",docgenInfo:RadioButtonField.__docgenInfo,path:"src/components/radio/RadioButtonField.js"});var RadioGroup_RadioGroup=function(_React$Component){function RadioGroup(props){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,RadioGroup),_this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(RadioGroup).call(this,props)),_defineProperty(_assertThisInitialized(_this),"onChangeHandler",(function(event){var target=event.target,onChange=_this.props.onChange;target instanceof HTMLInputElement&&_this.setState({value:target.value}),onChange&&onChange(event)})),_this.state={value:props.value},_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(RadioGroup,_React$Component),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(RadioGroup,[{key:"render",value:function render(){var _this$props=this.props,children=_this$props.children,className=_this$props.className,name=_this$props.name,stateValue=this.state.value;return react.createElement("div",{className:"radio-group ".concat(className),onChange:this.onChangeHandler},react.Children.map(children,(function(radio){var _radio$props=radio.props,value=_radio$props.value,rest=RadioGroup_objectWithoutProperties(_radio$props,["value"]);return react.createElement(radio_RadioButton,RadioGroup_extends({isSelected:value===stateValue,name:name,value:value},rest))})))}}]),RadioGroup}(react.Component);RadioGroup_RadioGroup.displayName="RadioGroup",_defineProperty(RadioGroup_RadioGroup,"defaultProps",{className:""}),RadioGroup_RadioGroup.__docgenInfo={description:"",methods:[{name:"onChangeHandler",docblock:null,modifiers:[],params:[{name:"event",type:{name:"SyntheticEvent",elements:[],raw:"SyntheticEvent<>",alias:"SyntheticEvent"}}],returns:null}],displayName:"RadioGroup",props:{className:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},children:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:""},name:{required:!1,flowType:{name:"string"},description:""},onChange:{required:!1,flowType:{name:"Function"},description:""},value:{required:!1,flowType:{name:"string"},description:""}}};var radio_RadioGroup=RadioGroup_RadioGroup;function RadioGroupField_extends(){return(RadioGroupField_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function RadioGroupField_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function RadioGroupField_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/radio/RadioGroup.js"]={name:"RadioGroup",docgenInfo:RadioGroup_RadioGroup.__docgenInfo,path:"src/components/radio/RadioGroup.js"});var RadioGroupField=function(_ref){var field=_ref.field,rest=(_ref.form,RadioGroupField_objectWithoutProperties(_ref,["field","form"])),value=field.value;return react.createElement(radio_RadioGroup,RadioGroupField_extends({key:value},field,rest))};RadioGroupField.displayName="RadioGroupField",RadioGroupField.__docgenInfo={description:"",methods:[],displayName:"RadioGroupField"};"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/radio/RadioGroupField.js"]={name:"RadioGroupField",docgenInfo:RadioGroupField.__docgenInfo,path:"src/components/radio/RadioGroupField.js"});var Link=__webpack_require__(3209),IconAlertDefault=__webpack_require__(1126);__webpack_require__(3302);function CascadePolicy_extends(){return(CascadePolicy_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}var CascadePolicy_ref2=react.createElement(IconAlertDefault.a,null),CascadePolicy_CascadePolicy=function(_ref){var canEdit=_ref.canEdit,isCascadingEnabled=_ref.isCascadingEnabled,isCascadingOverwritten=_ref.isCascadingOverwritten,isCustomMetadata=_ref.isCustomMetadata,onCascadeToggle=_ref.onCascadeToggle,onCascadeModeChange=_ref.onCascadeModeChange,shouldShowCascadeOptions=_ref.shouldShowCascadeOptions,readOnlyState=isCascadingEnabled?react.createElement("div",{className:"metadata-cascade-notice"},react.createElement(index_es.b,messages.a.metadataCascadePolicyEnabledInfo)):null;return canEdit?react.createElement(react.Fragment,null,react.createElement("div",{className:"metadata-cascade-editor"},react.createElement("div",{className:"metadata-cascade-enable"},react.createElement("div",null,react.createElement(index_es.b,CascadePolicy_extends({tagName:"strong"},messages.a.enableCascadePolicy)),!isCustomMetadata&&react.createElement(toggle_Toggle,{className:"metadata-cascade-toggle ".concat(isCascadingEnabled?"cascade-on":"cascade-off"),isOn:isCascadingEnabled,label:"",onChange:function onChange(e){return onCascadeToggle(e.target.checked)}})),isCustomMetadata?react.createElement("div",null,react.createElement(index_es.b,messages.a.cannotApplyCascadePolicyText)):react.createElement("div",{className:"cascade-policy-text"},react.createElement(index_es.b,messages.a.applyCascadePolicyText),"",react.createElement(Link.a,{className:"cascade-policy-learnmore-link",href:"https://community.box.com/t5/Organizing-and-Tracking-Content/Metadata/ta-p/30765",target:"_blank"},react.createElement(index_es.b,messages.a.cascadePolicyLearnMore))))),shouldShowCascadeOptions&&react.createElement("div",{className:"metadata-cascade-editor"},react.createElement("div",{className:"metadata-cascading-mode"},react.createElement(index_es.b,messages.a.cascadePolicyModeQuestion),react.createElement("div",{className:"metadata-operation-not-immediate"},CascadePolicy_ref2,react.createElement("span",null,react.createElement(index_es.b,messages.a.operationNotImmediate))),react.createElement(radio_RadioGroup,{className:"metadata-cascading-options",onChange:function onChange(e){return onCascadeModeChange("overwrite"===e.target.value)},value:isCascadingOverwritten?"overwrite":"skip"},react.createElement(radio_RadioButton,{label:react.createElement(index_es.b,messages.a.cascadePolicySkipMode),value:"skip"}),react.createElement(radio_RadioButton,{label:react.createElement(index_es.b,messages.a.cascadePolicyOverwriteMode),value:"overwrite"}))))):readOnlyState};CascadePolicy_CascadePolicy.__docgenInfo={description:"",methods:[],displayName:"CascadePolicy",props:{canEdit:{required:!0,flowType:{name:"boolean"},description:""},isCascadingEnabled:{required:!0,flowType:{name:"boolean"},description:""},isCascadingOverwritten:{required:!0,flowType:{name:"boolean"},description:""},isCustomMetadata:{required:!0,flowType:{name:"boolean"},description:""},onCascadeModeChange:{required:!0,flowType:{name:"signature",type:"function",raw:"(value: boolean) => void",signature:{arguments:[{name:"value",type:{name:"boolean"}}],return:{name:"void"}}},description:""},onCascadeToggle:{required:!0,flowType:{name:"signature",type:"function",raw:"(value: boolean) => void",signature:{arguments:[{name:"value",type:{name:"boolean"}}],return:{name:"void"}}},description:""},shouldShowCascadeOptions:{required:!0,flowType:{name:"boolean"},description:""}}};var metadata_instance_editor_CascadePolicy=CascadePolicy_CascadePolicy;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/features/metadata-instance-editor/CascadePolicy.js"]={name:"CascadePolicy",docgenInfo:CascadePolicy_CascadePolicy.__docgenInfo,path:"src/features/metadata-instance-editor/CascadePolicy.js"});var Field=__webpack_require__(1132);__webpack_require__(244),__webpack_require__(53),__webpack_require__(1857);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var isHidden=function(obj){return!!obj.isHidden||!!obj.hidden},normalizeTemplates=function(templates,selectedTemplateKey,templateFilters){if(!selectedTemplateKey)return _toConsumableArray(templates);var clonedTemplates=templates.filter((function(template){return template.templateKey===selectedTemplateKey})),fields=clonedTemplates[0]?clonedTemplates[0].fields:null;if(templateFilters&&fields){var normalizedFilters=function(templateFilters){return"string"==typeof templateFilters?new Set([templateFilters]):new Set(templateFilters)}(templateFilters);clonedTemplates[0].fields=fields.filter((function(field){return normalizedFilters.has(field.id)}))}return clonedTemplates},TemplatedInstance_TemplatedInstance=(__webpack_require__(3303),function(_ref){var canEdit=_ref.canEdit,_ref$data=_ref.data,data=void 0===_ref$data?{}:_ref$data,errors=_ref.errors,onFieldChange=_ref.onFieldChange,onFieldRemove=_ref.onFieldRemove,_template$fields=_ref.template.fields,fields=void 0===_template$fields?[]:_template$fields,hasFields=0<fields.length,hasVisibleFields=hasFields&&fields.some((function(field){return!isHidden(field)}));return react.createElement(react.Fragment,null,hasVisibleFields&&fields.map((function(field){return react.createElement(Field.a,{key:field.id,canEdit:canEdit,dataKey:field.key,dataValue:data[field.key],description:field.description,displayName:field.displayName,error:errors[field.key],isHidden:isHidden(field),onChange:function onChange(key,value){canEdit&&onFieldChange&&onFieldChange(key,value,field.type)},onRemove:function onRemove(key){canEdit&&onFieldRemove&&onFieldRemove(key)},options:field.options,type:field.type})})),hasFields&&!hasVisibleFields&&react.createElement("div",{className:"attributes-hidden-message"},react.createElement(index_es.b,messages.a.allAttributesAreHidden)),!hasFields&&react.createElement("div",{className:"no-attributes-message"},react.createElement(index_es.b,messages.a.noAttributesForTemplate)))});TemplatedInstance_TemplatedInstance.__docgenInfo={description:"",methods:[],displayName:"TemplatedInstance",props:{data:{defaultValue:{value:"{}",computed:!1},required:!1,flowType:{name:"MetadataFields"},description:""},canEdit:{required:!0,flowType:{name:"boolean"},description:""},errors:{required:!0,flowType:{name:"signature",type:"object",raw:"{ [string]: React.Node }",signature:{properties:[{key:{name:"string"},value:{name:"ReactNode",raw:"React.Node",required:!0}}]}},description:""},onFieldChange:{required:!1,flowType:{name:"signature",type:"function",raw:"(key: string, value: MetadataFieldValue, type: string) => void",signature:{arguments:[{name:"key",type:{name:"string"}},{name:"value",type:{name:"MetadataFieldValue"}},{name:"type",type:{name:"string"}}],return:{name:"void"}}},description:""},onFieldRemove:{required:!1,flowType:{name:"signature",type:"function",raw:"(key: string) => void",signature:{arguments:[{name:"key",type:{name:"string"}}],return:{name:"void"}}},description:""},template:{required:!0,flowType:{name:"MetadataTemplate"},description:""}}};var metadata_instance_editor_TemplatedInstance=TemplatedInstance_TemplatedInstance;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/features/metadata-instance-editor/TemplatedInstance.js"]={name:"TemplatedInstance",docgenInfo:TemplatedInstance_TemplatedInstance.__docgenInfo,path:"src/features/metadata-instance-editor/TemplatedInstance.js"});__webpack_require__(358);var Button=__webpack_require__(52),TextInput=__webpack_require__(565),Tooltip=__webpack_require__(559),common_messages=__webpack_require__(1114),IconInfo=__webpack_require__(1118);__webpack_require__(3304);function CustomInstanceNewField_typeof(obj){return(CustomInstanceNewField_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function CustomInstanceNewField_extends(){return(CustomInstanceNewField_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function CustomInstanceNewField_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function CustomInstanceNewField_getPrototypeOf(o){return(CustomInstanceNewField_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function CustomInstanceNewField_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CustomInstanceNewField_setPrototypeOf(o,p){return(CustomInstanceNewField_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function CustomInstanceNewField_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var CustomInstanceNewField_ref=react.createElement("div",{tabIndex:"-1"},react.createElement(IconInfo.a,{color:"#777",height:18,width:18})),CustomInstanceNewField_CustomInstanceNewField=function(_React$PureComponent){function CustomInstanceNewField(){var _getPrototypeOf2,_this;!function CustomInstanceNewField_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CustomInstanceNewField);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function CustomInstanceNewField_possibleConstructorReturn(self,call){return!call||"object"!==CustomInstanceNewField_typeof(call)&&"function"!=typeof call?CustomInstanceNewField_assertThisInitialized(self):call}(this,(_getPrototypeOf2=CustomInstanceNewField_getPrototypeOf(CustomInstanceNewField)).call.apply(_getPrototypeOf2,[this].concat(args))),CustomInstanceNewField_defineProperty(CustomInstanceNewField_assertThisInitialized(_this),"state",{key:"",value:"",error:""}),CustomInstanceNewField_defineProperty(CustomInstanceNewField_assertThisInitialized(_this),"onKeyChange",(function(event){_this.onChange(event,"key")})),CustomInstanceNewField_defineProperty(CustomInstanceNewField_assertThisInitialized(_this),"onValueChange",(function(event){_this.onChange(event,"value")})),CustomInstanceNewField_defineProperty(CustomInstanceNewField_assertThisInitialized(_this),"onAdd",(function(){var _this$state=_this.state,key=_this$state.key,value=_this$state.value,_this$props=_this.props,onAdd=_this$props.onAdd,properties=_this$props.properties;Object.prototype.hasOwnProperty.call(properties,key)?_this.setState({error:react.createElement(index_es.b,messages.a.customErrorDuplicateKey)}):key.startsWith("$")?_this.setState({error:react.createElement(index_es.b,messages.a.customErrorInternalKey)}):key?onAdd(key,value):_this.setState({error:react.createElement(index_es.b,messages.a.customErrorRequired)})})),_this}return function CustomInstanceNewField_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&CustomInstanceNewField_setPrototypeOf(subClass,superClass)}(CustomInstanceNewField,_React$PureComponent),function CustomInstanceNewField_createClass(Constructor,protoProps,staticProps){return protoProps&&CustomInstanceNewField_defineProperties(Constructor.prototype,protoProps),staticProps&&CustomInstanceNewField_defineProperties(Constructor,staticProps),Constructor}(CustomInstanceNewField,[{key:"onChange",value:function onChange(event,attr){var currentTarget=event.currentTarget;this.setState(CustomInstanceNewField_defineProperty({error:""},attr,currentTarget.value))}},{key:"render",value:function render(){var _this$props2=this.props,intl=_this$props2.intl,isCancellable=_this$props2.isCancellable,onCancel=_this$props2.onCancel,_this$state2=this.state,key=_this$state2.key,value=_this$state2.value,error=_this$state2.error;return react.createElement("div",{className:"custom-new-field"},react.createElement("div",{className:"custom-new-field-header"},react.createElement(index_es.b,CustomInstanceNewField_extends({tagName:"h5"},messages.a.customNewField)),react.createElement(Tooltip.a,{text:react.createElement(index_es.b,messages.a.customNewFieldMessage)},CustomInstanceNewField_ref)),react.createElement(TextInput.a,{error:error,isRequired:!0,label:react.createElement(index_es.b,messages.a.customKey),onChange:this.onKeyChange,placeholder:intl.formatMessage(messages.a.customKeyPlaceholder),type:"text",value:key}),react.createElement(TextInput.a,{hideOptionalLabel:!0,label:react.createElement(index_es.b,messages.a.customValue),onChange:this.onValueChange,placeholder:intl.formatMessage(messages.a.customValuePlaceholder),type:"text",value:value}),react.createElement("div",{className:"custom-new-field-actions"},isCancellable&&react.createElement(Button.a,{"data-resin-target":"metadata-customfieldcancel",onClick:onCancel,type:"button"},react.createElement(index_es.b,common_messages.a.cancel)),react.createElement(Button.a,{"data-resin-target":"metadata-customfieldadd",onClick:this.onAdd,type:"button"},react.createElement(index_es.b,messages.a.customAdd))))}}]),CustomInstanceNewField}(react.PureComponent);CustomInstanceNewField_CustomInstanceNewField.displayName="CustomInstanceNewField",CustomInstanceNewField_CustomInstanceNewField.__docgenInfo={description:"",methods:[{name:"onChange",docblock:"Common change handler\n\n@param {Event} event - keyboard event\n@param {string} attr - key or value\n@return {void}",modifiers:[],params:[{name:"event",description:"keyboard event",type:{name:"SyntheticKeyboardEvent",elements:[{name:"HTMLInputElement"}],raw:"SyntheticKeyboardEvent<HTMLInputElement>",alias:"SyntheticKeyboardEvent"},optional:!1},{name:"attr",description:"key or value",type:{name:"string"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Common change handler"},{name:"onKeyChange",docblock:"Change handler for the key\n\n@param {Event} event - keyboard event\n@return {void}",modifiers:[],params:[{name:"event",description:"keyboard event",type:{name:"SyntheticKeyboardEvent",elements:[{name:"HTMLInputElement"}],raw:"SyntheticKeyboardEvent<HTMLInputElement>",alias:"SyntheticKeyboardEvent"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Change handler for the key"},{name:"onValueChange",docblock:"Change handler for the value\n\n@param {Event} event - keyboard event\n@return {void}",modifiers:[],params:[{name:"event",description:"keyboard event",type:{name:"SyntheticKeyboardEvent",elements:[{name:"HTMLInputElement"}],raw:"SyntheticKeyboardEvent<HTMLInputElement>",alias:"SyntheticKeyboardEvent"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Change handler for the value"},{name:"onAdd",docblock:"Persists the new metadata added or shows an error\n\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Persists the new metadata added or shows an error"}],displayName:"CustomInstanceNewField",props:{intl:{required:!0,flowType:{name:"any"},description:""},isCancellable:{required:!0,flowType:{name:"boolean"},description:""},onAdd:{required:!0,flowType:{name:"signature",type:"function",raw:"(key: string, value: MetadataFieldValue) => void",signature:{arguments:[{name:"key",type:{name:"string"}},{name:"value",type:{name:"MetadataFieldValue"}}],return:{name:"void"}}},description:""},onCancel:{required:!0,flowType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},properties:{required:!0,flowType:{name:"MetadataFields"},description:""}}};var features_metadata_instance_editor_CustomInstanceNewField=Object(index_es.g)(CustomInstanceNewField_CustomInstanceNewField);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/features/metadata-instance-editor/CustomInstanceNewField.js"]={name:"CustomInstanceNewField",docgenInfo:CustomInstanceNewField_CustomInstanceNewField.__docgenInfo,path:"src/features/metadata-instance-editor/CustomInstanceNewField.js"});var ButtonGroup=__webpack_require__(1127),IconMinusThin=__webpack_require__(1805),IconPlusThin=__webpack_require__(1804),CustomField_ref2=(__webpack_require__(3305),react.createElement(IconPlusThin.a,{color:"#999"})),CustomField_ref3=react.createElement(IconMinusThin.a,{color:"#999"}),CustomField_CustomField=function(_ref){var intl=_ref.intl,canEdit=_ref.canEdit,isLast=_ref.isLast,dataKey=_ref.dataKey,dataValue=_ref.dataValue,onAdd=_ref.onAdd,onChange=_ref.onChange,onRemove=_ref.onRemove,addBtn=react.createElement(Button.a,{"aria-label":intl.formatMessage(messages.a.customAdd),"data-resin-target":"metadata-customfieldnew",onClick:onAdd,type:"button"},CustomField_ref2),removeBtn=react.createElement(Button.a,{"aria-label":intl.formatMessage(messages.a.customRemove),"data-resin-target":"metadata-customfieldremove",onClick:function onClick(){onRemove&&onRemove(dataKey)},type:"button"},CustomField_ref3);return react.createElement("div",{className:"metadata-instance-editor-field-custom"},react.createElement(Field.a,{canEdit:canEdit,dataKey:dataKey,dataValue:dataValue,displayName:dataKey,onChange:onChange,onRemove:function(key){return onChange(key,"")},type:"string"}),canEdit&&react.createElement("div",{className:"metadata-instance-editor-field-custom-actions"},isLast?react.createElement(ButtonGroup.a,null,removeBtn,addBtn):removeBtn))};CustomField_CustomField.displayName="CustomField",CustomField_CustomField.__docgenInfo={description:"",methods:[],displayName:"CustomField",props:{canEdit:{required:!0,flowType:{name:"boolean"},description:""},dataKey:{required:!0,flowType:{name:"string"},description:""},dataValue:{required:!0,flowType:{name:"MetadataFieldValue"},description:""},intl:{required:!0,flowType:{name:"any"},description:""},isLast:{required:!0,flowType:{name:"boolean"},description:""},onAdd:{required:!0,flowType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onChange:{required:!0,flowType:{name:"signature",type:"function",raw:"(key: string, value: MetadataFieldValue) => void",signature:{arguments:[{name:"key",type:{name:"string"}},{name:"value",type:{name:"MetadataFieldValue"}}],return:{name:"void"}}},description:""},onRemove:{required:!0,flowType:{name:"signature",type:"function",raw:"(key: string) => void",signature:{arguments:[{name:"key",type:{name:"string"}}],return:{name:"void"}}},description:""}}};var fields_CustomField=Object(index_es.g)(CustomField_CustomField);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/features/metadata-instance-editor/fields/CustomField.js"]={name:"CustomField",docgenInfo:CustomField_CustomField.__docgenInfo,path:"src/features/metadata-instance-editor/fields/CustomField.js"});var constants=__webpack_require__(181);function CustomInstance_typeof(obj){return(CustomInstance_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(Object(source),!0).forEach((function(key){CustomInstance_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function CustomInstance_getPrototypeOf(o){return(CustomInstance_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function CustomInstance_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CustomInstance_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function CustomInstance_createClass(Constructor,protoProps,staticProps){return protoProps&&CustomInstance_defineProperties(Constructor.prototype,protoProps),staticProps&&CustomInstance_defineProperties(Constructor,staticProps),Constructor}function CustomInstance_setPrototypeOf(o,p){return(CustomInstance_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function CustomInstance_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var CustomInstance_ref3=react.createElement(metadata_instance_editor_EmptyContent,null),CustomInstance_CustomInstance=function(_React$PureComponent){function CustomInstance(props){var _this;return function CustomInstance_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CustomInstance),_this=function CustomInstance_possibleConstructorReturn(self,call){return!call||"object"!==CustomInstance_typeof(call)&&"function"!=typeof call?CustomInstance_assertThisInitialized(self):call}(this,CustomInstance_getPrototypeOf(CustomInstance).call(this,props)),CustomInstance_defineProperty(CustomInstance_assertThisInitialized(_this),"onFieldChange",(function(key,value){var _this$props=_this.props,canEdit=_this$props.canEdit,onFieldChange=_this$props.onFieldChange;canEdit&&onFieldChange&&onFieldChange(key,value,constants.f)})),CustomInstance_defineProperty(CustomInstance_assertThisInitialized(_this),"onFieldRemove",(function(key){var _this$props2=_this.props,canEdit=_this$props2.canEdit,onFieldRemove=_this$props2.onFieldRemove;canEdit&&onFieldRemove&&onFieldRemove(key)})),CustomInstance_defineProperty(CustomInstance_assertThisInitialized(_this),"onAddFieldToggle",(function(){_this.setState((function(prevState){return{isAddFieldVisible:!prevState.isAddFieldVisible}}))})),_this.state={isAddFieldVisible:!1,properties:_objectSpread({},props.data)},_this}return function CustomInstance_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&CustomInstance_setPrototypeOf(subClass,superClass)}(CustomInstance,_React$PureComponent),CustomInstance_createClass(CustomInstance,null,[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(_ref,_ref2){var data=_ref.data,properties=_ref2.properties;return isEqual_default()(data,properties)?null:{properties:_objectSpread({},data)}}}]),CustomInstance_createClass(CustomInstance,[{key:"render",value:function render(){var _this2=this,canEdit=this.props.canEdit,_this$state=this.state,isAddFieldVisible=_this$state.isAddFieldVisible,properties=_this$state.properties,fields=Object.keys(properties),canAddFields=canEdit&&(isAddFieldVisible||0===fields.length);return react.createElement(react.Fragment,null,fields.map((function(key,index){return react.createElement(fields_CustomField,{key:key,canEdit:canEdit,dataKey:key,dataValue:properties[key],isLast:!isAddFieldVisible&&index===fields.length-1,onAdd:_this2.onAddFieldToggle,onChange:_this2.onFieldChange,onRemove:_this2.onFieldRemove})})),!canAddFields&&0===fields.length&&CustomInstance_ref3,canAddFields&&react.createElement(features_metadata_instance_editor_CustomInstanceNewField,{isCancellable:0!==fields.length,onAdd:this.onFieldChange,onCancel:this.onAddFieldToggle,properties:this.props.data}))}}]),CustomInstance}(react.PureComponent);CustomInstance_CustomInstance.displayName="CustomInstance",CustomInstance_defineProperty(CustomInstance_CustomInstance,"defaultProps",{canEdit:!0,data:{}}),CustomInstance_CustomInstance.__docgenInfo={description:"",methods:[{name:"onFieldChange",docblock:"Adds/updates a new metadata key value pair\n\n@param {string} key - metadata key\n@param {string} value - metadata value\n@return {void}",modifiers:[],params:[{name:"key",description:"metadata key",type:{name:"string"},optional:!1},{name:"value",description:"metadata value",type:{name:"MetadataFieldValue",alias:"MetadataFieldValue"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Adds/updates a new metadata key value pair"},{name:"onFieldRemove",docblock:"Adds/updates a new metadata key value pair\n\n@param {string} key - metadata key\n@param {string} value - metadata value\n@return {void}",modifiers:[],params:[{name:"key",description:"metadata key",type:{name:"string"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Adds/updates a new metadata key value pair"},{name:"onAddFieldToggle",docblock:"Shows the add new field field\n\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Shows the add new field field"}],displayName:"CustomInstance",props:{canEdit:{defaultValue:{value:"true",computed:!1},required:!1,flowType:{name:"boolean"},description:""},data:{defaultValue:{value:"{}",computed:!1},required:!1,flowType:{name:"MetadataFields"},description:""},onFieldChange:{required:!1,flowType:{name:"signature",type:"function",raw:"(key: string, value: MetadataFieldValue, type: string) => void",signature:{arguments:[{name:"key",type:{name:"string"}},{name:"value",type:{name:"MetadataFieldValue"}},{name:"type",type:{name:"string"}}],return:{name:"void"}}},description:""},onFieldRemove:{required:!1,flowType:{name:"signature",type:"function",raw:"(key: string) => void",signature:{arguments:[{name:"key",type:{name:"string"}}],return:{name:"void"}}},description:""}}};var metadata_instance_editor_CustomInstance=CustomInstance_CustomInstance;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/features/metadata-instance-editor/CustomInstance.js"]={name:"CustomInstance",docgenInfo:CustomInstance_CustomInstance.__docgenInfo,path:"src/features/metadata-instance-editor/CustomInstance.js"});var PrimaryButton=__webpack_require__(159),MetadataInstanceConfirmDialog_MetadataInstanceConfirmDialog=(__webpack_require__(3306),function(_ref){var onCancel=_ref.onCancel,onConfirm=_ref.onConfirm,confirmationMessage=_ref.confirmationMessage;return react.createElement("div",{className:"metadata-instance-confirm-cover"},react.createElement("div",{className:"metadata-instance-confim-container"},react.createElement("p",{className:"metadata-instance-confirm-text"},confirmationMessage),react.createElement("div",{className:"metadata-instance-confirm-buttons"},react.createElement(Button.a,{"data-resin-target":"metadata-confirmcancel",onClick:onCancel,type:"button"},react.createElement(index_es.b,messages.a.metadataCancel)),react.createElement(PrimaryButton.a,{"data-resin-target":"metadata-confirmremove",onClick:onConfirm,type:"button"},react.createElement(index_es.b,messages.a.customRemove)))))});MetadataInstanceConfirmDialog_MetadataInstanceConfirmDialog.displayName="MetadataInstanceConfirmDialog",MetadataInstanceConfirmDialog_MetadataInstanceConfirmDialog.__docgenInfo={description:"",methods:[],displayName:"MetadataInstanceConfirmDialog",props:{confirmationMessage:{required:!0,flowType:{name:"union",raw:"string | React.Node",elements:[{name:"string"},{name:"ReactNode",raw:"React.Node"}]},description:""},onCancel:{required:!0,flowType:{name:"Function"},description:""},onConfirm:{required:!0,flowType:{name:"Function"},description:""}}};var metadata_instance_editor_MetadataInstanceConfirmDialog=MetadataInstanceConfirmDialog_MetadataInstanceConfirmDialog;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/features/metadata-instance-editor/MetadataInstanceConfirmDialog.js"]={name:"MetadataInstanceConfirmDialog",docgenInfo:MetadataInstanceConfirmDialog_MetadataInstanceConfirmDialog.__docgenInfo,path:"src/features/metadata-instance-editor/MetadataInstanceConfirmDialog.js"});__webpack_require__(3307);var Footer_Footer=function(_ref){var onCancel=_ref.onCancel,onRemove=_ref.onRemove,showSave=_ref.showSave;return react.createElement("div",{className:"metadata-instance-editor-footer"},react.createElement("div",{className:"metadata-instance-editor-footer-delete"},react.createElement(PlainButton.a,{"data-resin-target":"metadata-instanceremove",onClick:onRemove,type:"button"},react.createElement(index_es.b,messages.a.metadataRemoveTemplate))),react.createElement("div",{className:"metadata-instance-editor-footer-save-cancel"},react.createElement(Button.a,{"data-resin-target":"metadata-instancecancel",onClick:onCancel,type:"button"},react.createElement(index_es.b,messages.a.metadataCancel)),showSave&&react.createElement(PrimaryButton.a,{"data-resin-target":"metadata-instancesave"},react.createElement(index_es.b,messages.a.metadataSave))))};Footer_Footer.displayName="Footer",Footer_Footer.__docgenInfo={description:"",methods:[],displayName:"Footer",props:{onCancel:{required:!0,flowType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onRemove:{required:!0,flowType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showSave:{required:!0,flowType:{name:"boolean"},description:""}}};var metadata_instance_editor_Footer=Footer_Footer;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/features/metadata-instance-editor/Footer.js"]={name:"Footer",docgenInfo:Footer_Footer.__docgenInfo,path:"src/features/metadata-instance-editor/Footer.js"});var validateField=__webpack_require__(763),common_variables=__webpack_require__(1123);__webpack_require__(3308);function Instance_typeof(obj){return(Instance_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Instance_extends(){return(Instance_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function Instance_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function Instance_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?Instance_ownKeys(Object(source),!0).forEach((function(key){Instance_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):Instance_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function Instance_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function Instance_getPrototypeOf(o){return(Instance_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function Instance_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Instance_setPrototypeOf(o,p){return(Instance_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Instance_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var createFieldKeyToTypeMap=function(){var fields=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return fields.reduce((function(prev,_ref){var key=_ref.key,type=_ref.type;return prev[key]=type,prev}),{})},getValue=function(data,key,type){var value=data[key];return type===constants.c?parseFloat(value):type===constants.d?parseInt(value,10):value},Instance_ref2=react.createElement(IconEdit.a,null),_ref4=react.createElement(IconAlertCircle.a,{color:variables.bdlWatermelonRed}),Instance_Instance=function(_React$PureComponent){function Instance(props){var _this;return function Instance_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Instance),_this=function Instance_possibleConstructorReturn(self,call){return!call||"object"!==Instance_typeof(call)&&"function"!=typeof call?Instance_assertThisInitialized(self):call}(this,Instance_getPrototypeOf(Instance).call(this,props)),Instance_defineProperty(Instance_assertThisInitialized(_this),"onCancel",(function(){var _this$props=_this.props,id=_this$props.id,onModification=_this$props.onModification;_this.setState(_this.getState(_this.props)),onModification&&onModification(id,!1)})),Instance_defineProperty(Instance_assertThisInitialized(_this),"onConfirmRemove",(function(){_this.setState({shouldConfirmRemove:!0})})),Instance_defineProperty(Instance_assertThisInitialized(_this),"onConfirmCancel",(function(){_this.setState({shouldConfirmRemove:!1})})),Instance_defineProperty(Instance_assertThisInitialized(_this),"onRemove",(function(){if(_this.isEditing()){var _this$props2=_this.props,id=_this$props2.id,onRemove=_this$props2.onRemove;onRemove&&(onRemove(id),_this.setState({isBusy:!0}))}})),Instance_defineProperty(Instance_assertThisInitialized(_this),"onSave",(function(){var _this$props3=_this.props,cascadePolicy=_this$props3.cascadePolicy,originalData=_this$props3.data,id=_this$props3.id,isDirty=_this$props3.isDirty,isCascadingPolicyApplicable=_this$props3.isCascadingPolicyApplicable,onSave=_this$props3.onSave,_this$state=_this.state,currentData=_this$state.data,errors=_this$state.errors,isCascadingEnabled=_this$state.isCascadingEnabled,isCascadingOverwritten=_this$state.isCascadingOverwritten;_this.isEditing()&&isDirty&&onSave&&!Object.keys(errors).length&&(_this.setState({isBusy:!0,isEditing:!1,shouldShowCascadeOptions:!1}),onSave(id,_this.createJSONPatch(currentData,originalData),isCascadingPolicyApplicable?{canEdit:!!cascadePolicy&&cascadePolicy.canEdit,id:cascadePolicy?cascadePolicy.id:void 0,isEnabled:isCascadingEnabled,overwrite:isCascadingOverwritten}:void 0,cloneDeep_default()(currentData)))})),Instance_defineProperty(Instance_assertThisInitialized(_this),"onFieldChange",(function(key,value,type){var _this$state2=_this.state,data=_this$state2.data,errors=_this$state2.errors;if(_this.isEditing()&&!isEqual_default()(data[key],value)){var isValid=Object(validateField.a)(type,value),finalErrors=Instance_objectSpread({},errors),finalData=cloneDeep_default()(data);finalData[key]=value,isValid?delete finalErrors[key]:finalErrors[key]=react.createElement(index_es.b,messages.a.invalidInput),_this.setState({data:finalData,errors:finalErrors},(function(){_this.setDirty(type)}))}})),Instance_defineProperty(Instance_assertThisInitialized(_this),"onFieldRemove",(function(key){if(_this.isEditing()){var _this$state3=_this.state,data=_this$state3.data,errors=_this$state3.errors,finalData=cloneDeep_default()(data),finalErrors=Instance_objectSpread({},errors);delete finalData[key],delete finalErrors[key],_this.setState({data:finalData,errors:finalErrors},_this.setDirty)}})),Instance_defineProperty(Instance_assertThisInitialized(_this),"onCascadeToggle",(function(value){_this.props.isCascadingPolicyApplicable&&_this.setState({isCascadingEnabled:value,shouldShowCascadeOptions:value},_this.setDirty)})),Instance_defineProperty(Instance_assertThisInitialized(_this),"onCascadeModeChange",(function(value){_this.props.isCascadingPolicyApplicable&&_this.setState({isCascadingOverwritten:value},_this.setDirty)})),Instance_defineProperty(Instance_assertThisInitialized(_this),"renderDeleteMessage",(function(isFile,template){var message;return message=template.templateKey===constants.k?isFile?"fileMetadataRemoveCustomTemplateConfirm":"folderMetadataRemoveCustomTemplateConfirm":isFile?"fileMetadataRemoveTemplateConfirm":"folderMetadataRemoveTemplateConfirm",react.createElement(index_es.b,Instance_extends({},messages.a[message],{values:{metadataName:template.displayName}}))})),Instance_defineProperty(Instance_assertThisInitialized(_this),"setDirty",(function(type){var _this$props4=_this.props,id=_this$props4.id,isCascadingPolicyApplicable=_this$props4.isCascadingPolicyApplicable,onModification=_this$props4.onModification,_this$state4=_this.state,data=_this$state4.data,isCascadingEnabled=_this$state4.isCascadingEnabled,isCascadingOverwritten=_this$state4.isCascadingOverwritten,hasDataChanged=!isEqual_default()(data,_this.props.data),hasCascadingChanged=!1;isCascadingPolicyApplicable&&(hasCascadingChanged=isCascadingOverwritten||isCascadingEnabled!==_this.isCascadingEnabled(_this.props)),onModification&&onModification(id,hasDataChanged||hasCascadingChanged,type)})),Instance_defineProperty(Instance_assertThisInitialized(_this),"collapsibleRef",react.createRef()),Instance_defineProperty(Instance_assertThisInitialized(_this),"toggleIsEditing",(function(){_this.setState((function(prevState){return{isEditing:!prevState.isEditing}}))})),Instance_defineProperty(Instance_assertThisInitialized(_this),"renderEditButton",(function(){var isDirty=_this.props.isDirty,isBusy=_this.state.isBusy,canEdit=_this.canEdit(),isEditing=_this.isEditing(),editClassName=classnames_default()("metadata-instance-editor-instance-edit",{"metadata-instance-editor-instance-is-editing":isEditing});return!canEdit||isDirty||isBusy?null:react.createElement(tooltip.a,{position:"top-left",text:react.createElement(index_es.b,messages.a.metadataEditTooltip)},react.createElement(PlainButton.a,{className:editClassName,"data-resin-target":"metadata-instanceedit",onClick:_this.toggleIsEditing,type:"button"},Instance_ref2))})),_this.state=_this.getState(props),_this.fieldKeyToTypeMap=createFieldKeyToTypeMap(props.template.fields),_this}return function Instance_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Instance_setPrototypeOf(subClass,superClass)}(Instance,_React$PureComponent),function Instance_createClass(Constructor,protoProps,staticProps){return protoProps&&Instance_defineProperties(Constructor.prototype,protoProps),staticProps&&Instance_defineProperties(Constructor,staticProps),Constructor}(Instance,[{key:"componentDidUpdate",value:function componentDidUpdate(_ref3,prevState){var prevHasError=_ref3.hasError,prevIsDirty=_ref3.isDirty,currentElement=this.collapsibleRef.current,_this$props5=this.props,hasError=_this$props5.hasError,isDirty=_this$props5.isDirty,isEditing=prevState.isEditing;currentElement&&this.state.shouldConfirmRemove&&Object(dom.e)(currentElement,{block:"start",behavior:"smooth"}),hasError&&hasError!==prevHasError?this.setState({isBusy:!1,isEditing:!0}):prevIsDirty&&!isDirty&&(isEditing?this.setState({isBusy:!1}):this.setState({isBusy:!1,isCascadingOverwritten:!1}))}},{key:"getState",value:function getState(props){return{data:cloneDeep_default()(props.data),errors:{},isBusy:!1,isCascadingEnabled:this.isCascadingEnabled(props),isCascadingOverwritten:!1,isEditing:!1,shouldConfirmRemove:!1,shouldShowCascadeOptions:!1}}},{key:"getTitle",value:function getTitle(){var _this$props6=this.props,_this$props6$cascadeP=_this$props6.cascadePolicy,cascadePolicy=void 0===_this$props6$cascadeP?{}:_this$props6$cascadeP,hasError=_this$props6.hasError,isCascadingPolicyApplicable=_this$props6.isCascadingPolicyApplicable,template=_this$props6.template,isProperties=template.templateKey===constants.k,type=isCascadingPolicyApplicable&&cascadePolicy.id?"cascade":"default";return react.createElement("span",{className:"metadata-instance-editor-instance-title"},react.createElement(general_IconMetadataColored,{type:type}),react.createElement("span",{className:classnames_default()("metadata-instance-editor-instance-title-text",{"metadata-instance-editor-instance-has-error":hasError})},isProperties?react.createElement(index_es.b,messages.a.customTitle):template.displayName),hasError&&_ref4)}},{key:"getConfirmationMessage",value:function getConfirmationMessage(){var _this$props7=this.props,template=_this$props7.template,isCascadingPolicyApplicable=_this$props7.isCascadingPolicyApplicable;return this.renderDeleteMessage(!isCascadingPolicyApplicable,template)}},{key:"isCascadingEnabled",value:function isCascadingEnabled(props){return!!props.cascadePolicy&&!!props.cascadePolicy.id}},{key:"createJSONPatch",value:function createJSONPatch(currentData,originalData){var _this2=this,ops=[],data=cloneDeep_default()(currentData);return Object.keys(originalData).forEach((function(key){var type=_this2.fieldKeyToTypeMap[key],originalValue=getValue(originalData,key,type),path="/".concat(key);if(Object.prototype.hasOwnProperty.call(data,key)){var value=getValue(data,key,type);isEqual_default()(value,originalValue)||(ops.push({op:constants.j,path:path,value:originalValue}),ops.push({op:constants.i,path:path,value:value}))}else ops.push({op:constants.j,path:path,value:originalValue}),ops.push({op:constants.h,path:path});delete data[key]})),Object.keys(data).forEach((function(key){var type=_this2.fieldKeyToTypeMap[key],value=getValue(data,key,type);ops.push({op:constants.g,path:"/".concat(key),value:value})})),ops}},{key:"canEdit",value:function(){var _this$props8=this.props,canEdit=_this$props8.canEdit,onModification=_this$props8.onModification,onRemove=_this$props8.onRemove,onSave=_this$props8.onSave;return canEdit&&"function"==typeof onRemove&&"function"==typeof onSave&&"function"==typeof onModification}},{key:"isEditing",value:function(){var isEditing=this.state.isEditing;return this.canEdit()&&isEditing}},{key:"render",value:function render(){var _this$props9=this.props,_this$props9$cascadeP=_this$props9.cascadePolicy,cascadePolicy=void 0===_this$props9$cascadeP?{}:_this$props9$cascadeP,isDirty=_this$props9.isDirty,isCascadingPolicyApplicable=_this$props9.isCascadingPolicyApplicable,isOpen=_this$props9.isOpen,template=_this$props9.template,_template$fields=template.fields,fields=void 0===_template$fields?[]:_template$fields,_this$state5=this.state,data=_this$state5.data,errors=_this$state5.errors,isBusy=_this$state5.isBusy,isCascadingEnabled=_this$state5.isCascadingEnabled,shouldConfirmRemove=_this$state5.shouldConfirmRemove,shouldShowCascadeOptions=_this$state5.shouldShowCascadeOptions,isCascadingOverwritten=_this$state5.isCascadingOverwritten,isProperties=template.templateKey===constants.k,isEditing=this.isEditing();if(!template||isHidden(template))return null;var animationDuration=50*(fields.length+1);return react.createElement("div",{ref:this.collapsibleRef},react.createElement(Collapsible.a,{animationDuration:animationDuration,buttonProps:Instance_defineProperty({},common_variables.a,"metadata-card"),hasStickyHeader:!0,headerActionItems:this.renderEditButton(),isBordered:!0,isOpen:isOpen,title:this.getTitle()},shouldConfirmRemove&&react.createElement(LoadingIndicatorWrapper.a,{isLoading:isBusy},react.createElement(metadata_instance_editor_MetadataInstanceConfirmDialog,{confirmationMessage:this.getConfirmationMessage(),onCancel:this.onConfirmCancel,onConfirm:this.onRemove})),!shouldConfirmRemove&&react.createElement(LoadingIndicatorWrapper.a,{isLoading:isBusy},react.createElement(Form.a,{onValidSubmit:isDirty?this.onSave:noop_default.a},react.createElement("div",{className:"metadata-instance-editor-instance"},isCascadingPolicyApplicable&&react.createElement(metadata_instance_editor_CascadePolicy,{canEdit:isEditing&&!!cascadePolicy.canEdit,isCascadingEnabled:isCascadingEnabled,isCascadingOverwritten:isCascadingOverwritten,isCustomMetadata:isProperties,onCascadeModeChange:this.onCascadeModeChange,onCascadeToggle:this.onCascadeToggle,shouldShowCascadeOptions:shouldShowCascadeOptions}),isProperties?react.createElement(metadata_instance_editor_CustomInstance,{canEdit:isEditing,data:data,onFieldChange:this.onFieldChange,onFieldRemove:this.onFieldRemove}):react.createElement(metadata_instance_editor_TemplatedInstance,{canEdit:isEditing,data:data,errors:errors,onFieldChange:this.onFieldChange,onFieldRemove:this.onFieldRemove,template:template})),isEditing&&react.createElement(metadata_instance_editor_Footer,{onCancel:this.onCancel,onRemove:this.onConfirmRemove,showSave:isDirty})))))}}]),Instance}(react.PureComponent);Instance_Instance.displayName="Instance",Instance_defineProperty(Instance_Instance,"defaultProps",{data:{},isDirty:!1}),Instance_Instance.__docgenInfo={description:"",methods:[{name:"onCancel",docblock:"Undo any changes made\n\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Undo any changes made"},{name:"onConfirmRemove",docblock:"Allows a user to confirm metadata instance removal\n\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Allows a user to confirm metadata instance removal"},{name:"onConfirmCancel",docblock:"Cancel the remove instance attempt\n\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Cancel the remove instance attempt"},{name:"onRemove",docblock:"Removes an instance\n\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Removes an instance"},{name:"onSave",docblock:"Saves instance data\n\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Saves instance data"},{name:"onFieldChange",docblock:"Updates a key value in the instance data\n\n@param {string} key - key to update\n@param {FieldValue} value - value to update\n@param {string} type - type of field\n@return {void}",modifiers:[],params:[{name:"key",description:"key to update",type:{name:"string"},optional:!1},{name:"value",description:"value to update",type:{name:"MetadataFieldValue",alias:"MetadataFieldValue"},optional:!1},{name:"type",description:"type of field",type:{name:"string"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Updates a key value in the instance data"},{name:"onFieldRemove",docblock:"Removes a key from instance data\n\n@param {string} key - key to remove\n@return {void}",modifiers:[],params:[{name:"key",description:"key to remove",type:{name:"string"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Removes a key from instance data"},{name:"onCascadeToggle",docblock:"Toggle cascading policy\n\n@param {boolean} value - true when turned on\n@return {void}",modifiers:[],params:[{name:"value",description:"true when turned on",type:{name:"boolean"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Toggle cascading policy"},{name:"onCascadeModeChange",docblock:"Changes the cascade mode.\nisCascadingOverwritten is slways false to start off.\n\n@param {boolean} value - true when overwrite policy is chosen\n@return {void}",modifiers:[],params:[{name:"value",description:"true when overwrite policy is chosen",type:{name:"boolean"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Changes the cascade mode.\nisCascadingOverwritten is slways false to start off."},{name:"getState",docblock:"Returns the state from props\n\n@return {Object} - react state",modifiers:[],params:[{name:"props",type:{name:"signature",type:"object",raw:"{\n    canEdit: boolean,\n    cascadePolicy?: MetadataCascadePolicy, // eslint-disable-line\n    data: MetadataFields,\n    hasError: boolean,\n    id: string,\n    isCascadingPolicyApplicable?: boolean,\n    isDirty: boolean,\n    isOpen: boolean,\n    onModification?: (id: string, isDirty: boolean, type?: string) => void,\n    onRemove?: (id: string) => void,\n    onSave?: (\n        id: string,\n        data: JSONPatchOperations,\n        cascadingPolicy?: MetadataCascadingPolicyData,\n        rawData: Object,\n    ) => void,\n    template: MetadataTemplate,\n}",signature:{properties:[{key:"canEdit",value:{name:"boolean",required:!0}},{key:"cascadePolicy",value:{name:"MetadataCascadePolicy",required:!1}},{key:"data",value:{name:"MetadataFields",required:!0}},{key:"hasError",value:{name:"boolean",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"isCascadingPolicyApplicable",value:{name:"boolean",required:!1}},{key:"isDirty",value:{name:"boolean",required:!0}},{key:"isOpen",value:{name:"boolean",required:!0}},{key:"onModification",value:{name:"signature",type:"function",raw:"(id: string, isDirty: boolean, type?: string) => void",signature:{arguments:[{name:"id",type:{name:"string"}},{name:"isDirty",type:{name:"boolean"}},{name:"type",type:{name:"string"}}],return:{name:"void"}},required:!1}},{key:"onRemove",value:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{name:"id",type:{name:"string"}}],return:{name:"void"}},required:!1}},{key:"onSave",value:{name:"signature",type:"function",raw:"(\n    id: string,\n    data: JSONPatchOperations,\n    cascadingPolicy?: MetadataCascadingPolicyData,\n    rawData: Object,\n) => void",signature:{arguments:[{name:"id",type:{name:"string"}},{name:"data",type:{name:"JSONPatchOperations"}},{name:"cascadingPolicy",type:{name:"MetadataCascadingPolicyData"}},{name:"rawData",type:{name:"Object"}}],return:{name:"void"}},required:!1}},{key:"template",value:{name:"MetadataTemplate",required:!0}}]},alias:"Props"}}],returns:{description:"react state",type:{name:"signature",type:"object",raw:"{\n    data: Object,\n    errors: { [string]: React.Node },\n    isBusy: boolean,\n    isCascadingEnabled: boolean,\n    isCascadingOverwritten: boolean,\n    isEditing: boolean,\n    shouldConfirmRemove: boolean,\n    shouldShowCascadeOptions: boolean,\n}",signature:{properties:[{key:"data",value:{name:"Object",required:!0}},{key:"errors",value:{name:"signature",type:"object",raw:"{ [string]: React.Node }",signature:{properties:[{key:{name:"string"},value:{name:"ReactNode",raw:"React.Node",required:!0}}]},required:!0}},{key:"isBusy",value:{name:"boolean",required:!0}},{key:"isCascadingEnabled",value:{name:"boolean",required:!0}},{key:"isCascadingOverwritten",value:{name:"boolean",required:!0}},{key:"isEditing",value:{name:"boolean",required:!0}},{key:"shouldConfirmRemove",value:{name:"boolean",required:!0}},{key:"shouldShowCascadeOptions",value:{name:"boolean",required:!0}}]}}},description:"Returns the state from props"},{name:"getTitle",docblock:"Returns the card title with possible error mark\n\n@return {Object} - react title element",modifiers:[],params:[],returns:{description:"react title element",type:{name:"ReactNode",raw:"React.Node"}},description:"Returns the card title with possible error mark"},{name:"renderDeleteMessage",docblock:"Render the correct delete message to show based on custom metadata and file/folder metadata",modifiers:[],params:[{name:"isFile",type:{name:"boolean"}},{name:"template",type:{name:"Object",alias:"Object"}}],returns:null,description:"Render the correct delete message to show based on custom metadata and file/folder metadata"},{name:"getConfirmationMessage",docblock:"Get the delete confirmation message base on the template key",modifiers:[],params:[],returns:{type:{name:"ReactNode",raw:"React.Node"}},description:"Get the delete confirmation message base on the template key"},{name:"setDirty",docblock:"Evaluates if the metadata was changed or cascading policy\naltered or enabled.\n\n@return {void}",modifiers:[],params:[{name:"type",optional:!0,type:{name:"string"}}],returns:{description:null,type:{name:"void"}},description:"Evaluates if the metadata was changed or cascading policy\naltered or enabled."},{name:"isCascadingEnabled",docblock:"Determines if cascading policy is enabled based on\nwhether it has an id or not.\n\n@param {Object} props - component props\n@return {boolean} true if cascading policy is enabled",modifiers:[],params:[{name:"props",description:"component props",type:{name:"signature",type:"object",raw:"{\n    canEdit: boolean,\n    cascadePolicy?: MetadataCascadePolicy, // eslint-disable-line\n    data: MetadataFields,\n    hasError: boolean,\n    id: string,\n    isCascadingPolicyApplicable?: boolean,\n    isDirty: boolean,\n    isOpen: boolean,\n    onModification?: (id: string, isDirty: boolean, type?: string) => void,\n    onRemove?: (id: string) => void,\n    onSave?: (\n        id: string,\n        data: JSONPatchOperations,\n        cascadingPolicy?: MetadataCascadingPolicyData,\n        rawData: Object,\n    ) => void,\n    template: MetadataTemplate,\n}",signature:{properties:[{key:"canEdit",value:{name:"boolean",required:!0}},{key:"cascadePolicy",value:{name:"MetadataCascadePolicy",required:!1}},{key:"data",value:{name:"MetadataFields",required:!0}},{key:"hasError",value:{name:"boolean",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"isCascadingPolicyApplicable",value:{name:"boolean",required:!1}},{key:"isDirty",value:{name:"boolean",required:!0}},{key:"isOpen",value:{name:"boolean",required:!0}},{key:"onModification",value:{name:"signature",type:"function",raw:"(id: string, isDirty: boolean, type?: string) => void",signature:{arguments:[{name:"id",type:{name:"string"}},{name:"isDirty",type:{name:"boolean"}},{name:"type",type:{name:"string"}}],return:{name:"void"}},required:!1}},{key:"onRemove",value:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{name:"id",type:{name:"string"}}],return:{name:"void"}},required:!1}},{key:"onSave",value:{name:"signature",type:"function",raw:"(\n    id: string,\n    data: JSONPatchOperations,\n    cascadingPolicy?: MetadataCascadingPolicyData,\n    rawData: Object,\n) => void",signature:{arguments:[{name:"id",type:{name:"string"}},{name:"data",type:{name:"JSONPatchOperations"}},{name:"cascadingPolicy",type:{name:"MetadataCascadingPolicyData"}},{name:"rawData",type:{name:"Object"}}],return:{name:"void"}},required:!1}},{key:"template",value:{name:"MetadataTemplate",required:!0}}]},alias:"Props"},optional:!1}],returns:{description:"true if cascading policy is enabled",type:{name:"boolean"}},description:"Determines if cascading policy is enabled based on\nwhether it has an id or not."},{name:"toggleIsEditing",docblock:"Toggles the edit mode\n\n@private\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Toggles the edit mode"},{name:"createJSONPatch",docblock:"Creates JSON Patch operations from the passed in\ndata while comparing it to the original data from props.\n\nOnly diffs at the root level and primitives.\n\n@param {*} currentData - the latest changes by the user\n@param {*} originalData - the original values\n@return {Array} - JSON patch operations",modifiers:[],params:[{name:"currentData",description:"the latest changes by the user",type:{name:"Object",alias:"Object"},optional:!1},{name:"originalData",description:"the original values",type:{name:"Object",alias:"Object"},optional:!1}],returns:{description:"JSON patch operations",type:{name:"JSONPatchOperations"}},description:"Creates JSON Patch operations from the passed in\ndata while comparing it to the original data from props.\n\nOnly diffs at the root level and primitives."},{name:"canEdit",docblock:"Utility function to determine if instance is editable\n\n@return {boolean} true if editable",modifiers:[],params:[],returns:{description:"true if editable",type:{name:"boolean"}},description:"Utility function to determine if instance is editable"},{name:"isEditing",docblock:"Utility function to determine if instance is in edit mode\n\n@return {boolean} true if editing",modifiers:[],params:[],returns:{description:"true if editing",type:{name:"boolean"}},description:"Utility function to determine if instance is in edit mode"},{name:"renderEditButton",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Instance",props:{data:{defaultValue:{value:"{}",computed:!1},required:!1,flowType:{name:"MetadataFields"},description:""},isDirty:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:""},canEdit:{required:!0,flowType:{name:"boolean"},description:""},cascadePolicy:{required:!1,flowType:{name:"MetadataCascadePolicy"},description:""},hasError:{required:!0,flowType:{name:"boolean"},description:""},id:{required:!0,flowType:{name:"string"},description:""},isCascadingPolicyApplicable:{required:!1,flowType:{name:"boolean"},description:""},isOpen:{required:!0,flowType:{name:"boolean"},description:""},onModification:{required:!1,flowType:{name:"signature",type:"function",raw:"(id: string, isDirty: boolean, type?: string) => void",signature:{arguments:[{name:"id",type:{name:"string"}},{name:"isDirty",type:{name:"boolean"}},{name:"type",type:{name:"string"}}],return:{name:"void"}}},description:""},onRemove:{required:!1,flowType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{name:"id",type:{name:"string"}}],return:{name:"void"}}},description:""},onSave:{required:!1,flowType:{name:"signature",type:"function",raw:"(\n    id: string,\n    data: JSONPatchOperations,\n    cascadingPolicy?: MetadataCascadingPolicyData,\n    rawData: Object,\n) => void",signature:{arguments:[{name:"id",type:{name:"string"}},{name:"data",type:{name:"JSONPatchOperations"}},{name:"cascadingPolicy",type:{name:"MetadataCascadingPolicyData"}},{name:"rawData",type:{name:"Object"}}],return:{name:"void"}}},description:""},template:{required:!0,flowType:{name:"MetadataTemplate"},description:""}}};var features_metadata_instance_editor_Instance=Instance_Instance;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/features/metadata-instance-editor/Instance.js"]={name:"Instance",docgenInfo:Instance_Instance.__docgenInfo,path:"src/features/metadata-instance-editor/Instance.js"});var metadata_instance_editor_Instances=function(_ref){var _ref$isCascadingPolic=_ref.isCascadingPolicyApplicable,_ref$editors=_ref.editors,editors=void 0===_ref$editors?[]:_ref$editors,onModification=_ref.onModification,onRemove=_ref.onRemove,onSave=_ref.onSave,selectedTemplateKey=_ref.selectedTemplateKey;return editors.map((function(_ref2){var _ref2$isDirty=_ref2.isDirty,instance=_ref2.instance,_ref2$hasError=_ref2.hasError,template=_ref2.template,templateKey=template.templateKey,isOpen=1===editors.length||templateKey===selectedTemplateKey;return react.createElement(features_metadata_instance_editor_Instance,{canEdit:instance.canEdit,cascadePolicy:instance.cascadePolicy,data:instance.data,hasError:void 0!==_ref2$hasError&&_ref2$hasError,id:instance.id,isCascadingPolicyApplicable:void 0!==_ref$isCascadingPolic&&_ref$isCascadingPolic,isDirty:void 0!==_ref2$isDirty&&_ref2$isDirty,isOpen:isOpen,key:"".concat(instance.id,"-").concat(templateKey),onModification:onModification,onSave:onSave,onRemove:onRemove,template:template})}))},LoadingIndicator=__webpack_require__(280),elements_common_messages=__webpack_require__(4),SidebarContent=__webpack_require__(3185),datalist_item=(__webpack_require__(316),__webpack_require__(314),__webpack_require__(315),__webpack_require__(1122)),selector_dropdown=__webpack_require__(1133),omit=(__webpack_require__(1112),__webpack_require__(62)),omit_default=__webpack_require__.n(omit),IconClear=__webpack_require__(1819),IconSearch=function(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"icon-search":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?variables.bdlGray40:_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?14:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?14:_ref$width;return react.createElement(accessible_svg.a,{className:"icon-search ".concat(className),height:height,title:title,viewBox:"0 0 14 14",width:width},react.createElement("path",{className:"fill-color",d:"M13.7,12.1L11.6,10l-1.1-0.2c0.9-1,1.4-2.4,1.4-3.9c0-3.3-2.7-6-6-6C2.7,0,0,2.7,0,6s2.7,6,6,6 c1.5,0,2.9-0.6,4-1.5l0.2,1l2.1,2.1c0.4,0.4,1,0.4,1.4,0l0,0C14.1,13.1,14.1,12.5,13.7,12.1z M6,10.4c-2.5,0-4.5-2-4.5-4.5 s2-4.5,4.5-4.5s4.5,2,4.5,4.5S8.4,10.4,6,10.4z",fill:color,fillRule:"evenodd"}))};IconSearch.displayName="IconSearch",IconSearch.__docgenInfo={description:"",methods:[],displayName:"IconSearch",props:{className:{defaultValue:{value:"'icon-search'",computed:!1},required:!1},color:{defaultValue:{value:"bdlGray40",computed:!0},required:!1},height:{defaultValue:{value:"14",computed:!1},required:!1},width:{defaultValue:{value:"14",computed:!1},required:!1}}};var general_IconSearch=IconSearch;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconSearch.js"]={name:"IconSearch",docgenInfo:IconSearch.__docgenInfo,path:"src/icons/general/IconSearch.js"});var makeLoadable=__webpack_require__(746);__webpack_require__(3309);function SearchForm_typeof(obj){return(SearchForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function SearchForm_extends(){return(SearchForm_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function SearchForm_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function SearchForm_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function SearchForm_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function SearchForm_getPrototypeOf(o){return(SearchForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function SearchForm_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function SearchForm_setPrototypeOf(o,p){return(SearchForm_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function SearchForm_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var SearchForm_messages=Object(index_es.f)({clearButtonTitle:{id:"boxui.searchForm.clearButtonTitle",defaultMessage:"Clear"},searchButtonTitle:{id:"boxui.searchForm.searchButtonTitle",defaultMessage:"Search"},searchLabel:{id:"boxui.searchForm.searchLabel",defaultMessage:"Search query"}}),SearchForm_ref2=react.createElement(general_IconSearch,null),SearchForm_ref3=react.createElement(IconClear.a,null),SearchForm_SearchForm=function(_React$Component){function SearchForm(){var _getPrototypeOf2,_this;!function SearchForm_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SearchForm);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function SearchForm_possibleConstructorReturn(self,call){return!call||"object"!==SearchForm_typeof(call)&&"function"!=typeof call?SearchForm_assertThisInitialized(self):call}(this,(_getPrototypeOf2=SearchForm_getPrototypeOf(SearchForm)).call.apply(_getPrototypeOf2,[this].concat(args))),SearchForm_defineProperty(SearchForm_assertThisInitialized(_this),"state",{isEmpty:!0}),SearchForm_defineProperty(SearchForm_assertThisInitialized(_this),"onClearHandler",(function(event){var _this$props=_this.props,onChange=_this$props.onChange;_this$props.shouldPreventClearEventPropagation&&event.stopPropagation(),_this.searchInput&&(_this.searchInput.value=""),_this.setState({isEmpty:!0}),onChange&&onChange("")})),SearchForm_defineProperty(SearchForm_assertThisInitialized(_this),"onChangeHandler",(function(_ref){var value=_ref.target.value,onChange=_this.props.onChange;_this.setState({isEmpty:!value||!value.trim().length}),onChange&&onChange(value)})),SearchForm_defineProperty(SearchForm_assertThisInitialized(_this),"onSubmitHandler",(function(event){var value=event.target.elements[0].value,onSubmit=_this.props.onSubmit;onSubmit&&onSubmit(value,event)})),SearchForm_defineProperty(SearchForm_assertThisInitialized(_this),"setInputRef",(function(element){_this.searchInput=element,_this.props.getSearchInput&&_this.props.getSearchInput(_this.searchInput)})),_this}return function SearchForm_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&SearchForm_setPrototypeOf(subClass,superClass)}(SearchForm,_React$Component),function SearchForm_createClass(Constructor,protoProps,staticProps){return protoProps&&SearchForm_defineProperties(Constructor.prototype,protoProps),staticProps&&SearchForm_defineProperties(Constructor,staticProps),Constructor}(SearchForm,[{key:"render",value:function render(){var _this2=this,_this$props2=this.props,action=_this$props2.action,className=_this$props2.className,intl=_this$props2.intl,isLoading=_this$props2.isLoading,method=_this$props2.method,name=_this$props2.name,queryParams=_this$props2.queryParams,useClearButton=_this$props2.useClearButton,rest=SearchForm_objectWithoutProperties(_this$props2,["action","className","intl","isLoading","method","name","queryParams","useClearButton"]),isEmpty=this.state.isEmpty,inputProps=omit_default()(rest,["getSearchInput","onChange","onSubmit","required","shouldPreventClearEventPropagation"]),formatMessage=intl.formatMessage,classes=classnames_default()(className,"search-input-container"),formClassNames=classnames_default()("search-form",{"is-empty":isEmpty,"use-clear-button":useClearButton}),hiddenInputs=Object.keys(queryParams).map((function(param,index){return react.createElement("input",{key:index,name:param,type:"hidden",value:queryParams[param]})})),LoadableSearchActions=Object(makeLoadable.a)((function SearchActions(){return react.createElement("div",{className:"action-buttons"},react.createElement("button",{type:"button",className:"action-button search-button",title:formatMessage(SearchForm_messages.searchButtonTitle)},SearchForm_ref2),react.createElement("button",{className:"action-button clear-button",onClick:_this2.onClearHandler,title:formatMessage(SearchForm_messages.clearButtonTitle),type:"button"},SearchForm_ref3))}));return react.createElement("div",{className:classes},react.createElement("form",{action:action,className:formClassNames,method:method,onChange:this.onChangeHandler,onSubmit:this.onSubmitHandler,role:"search"},react.createElement("input",SearchForm_extends({ref:this.setInputRef,"aria-label":formatMessage(SearchForm_messages.searchLabel),autoComplete:"off",className:"search-input",name:name,onChange:function onChangeStub(){},type:"search"},inputProps)),react.createElement(LoadableSearchActions,{isLoading:isLoading,loadingIndicatorProps:{className:"search-form-loading-indicator"}}),hiddenInputs))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props){var value=props.value;return value&&value.trim()?{isEmpty:!0}:null}}]),SearchForm}(react.Component);SearchForm_SearchForm.displayName="SearchForm",SearchForm_defineProperty(SearchForm_SearchForm,"defaultProps",{action:void 0,method:"get",name:"search",queryParams:{},useClearButton:!1}),SearchForm_SearchForm.__docgenInfo={description:"",methods:[{name:"onClearHandler",docblock:null,modifiers:[],params:[{name:"event",type:{name:"SyntheticEvent",elements:[],raw:"SyntheticEvent<>",alias:"SyntheticEvent"}}],returns:null},{name:"onChangeHandler",docblock:null,modifiers:[],params:[{name:"{ target }",type:null}],returns:null},{name:"onSubmitHandler",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"setInputRef",docblock:null,modifiers:[],params:[{name:"element",type:null}],returns:null}],displayName:"SearchForm",props:{action:{defaultValue:{value:"undefined",computed:!0},required:!1,flowType:{name:"string"},description:"Form submit action"},method:{defaultValue:{value:"'get'",computed:!1},required:!1,flowType:{name:"union",raw:"'get' | 'post'",elements:[{name:"literal",value:"'get'"},{name:"literal",value:"'post'"}]},description:"The way to send the form data, get or post"},name:{defaultValue:{value:"'search'",computed:!1},required:!1,flowType:{name:"string"},description:"Name of the text input"},queryParams:{defaultValue:{value:"{}",computed:!1},required:!1,flowType:{name:"Object"},description:"Extra query parameters in addition to the form data"},useClearButton:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:"If the clear button is shown when input field is not empty"},className:{required:!1,flowType:{name:"string"},description:""},getSearchInput:{required:!1,flowType:{name:"Function"},description:""},intl:{required:!0,flowType:{name:"Object"},description:""},isLoading:{required:!1,flowType:{name:"boolean"},description:""},onChange:{required:!1,flowType:{name:"Function"},description:"On change handler for the search input, debounced by 250ms"},onSubmit:{required:!1,flowType:{name:"Function"},description:"On submit handler for the search input"},shouldPreventClearEventPropagation:{required:!1,flowType:{name:"boolean"},description:"Boolean to prevent propogation of search clear action"},value:{required:!1,flowType:{name:"string"},description:"The value of the input if controlled"}}};var components_search_form_SearchForm=Object(index_es.g)(SearchForm_SearchForm);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/search-form/SearchForm.js"]={name:"SearchForm",docgenInfo:SearchForm_SearchForm.__docgenInfo,path:"src/components/search-form/SearchForm.js"});var plain_button=__webpack_require__(183),loading_indicator=__webpack_require__(343),flyout=__webpack_require__(3256),MenuToggle=__webpack_require__(1115);__webpack_require__(3311);function TemplateDropdown_typeof(obj){return(TemplateDropdown_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function TemplateDropdown_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function TemplateDropdown_getPrototypeOf(o){return(TemplateDropdown_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function TemplateDropdown_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function TemplateDropdown_setPrototypeOf(o,p){return(TemplateDropdown_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function TemplateDropdown_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function TemplateDropdown_extends(){return(TemplateDropdown_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function TemplateDropdown_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function TemplateDropdown_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var InputContainer=function(_ref){var _ref$inputProps=_ref.inputProps,inputProps=void 0===_ref$inputProps?{}:_ref$inputProps,rest=TemplateDropdown_objectWithoutProperties(_ref,["inputProps"]);return react.createElement(components_search_form_SearchForm,TemplateDropdown_extends({},inputProps,rest,{shouldPreventClearEventPropagation:!0,"data-resin-target":"metadata-templatesearch"}))};InputContainer.displayName="InputContainer";var getAvailableTemplates=function(allTemplates,usedTemplates){return allTemplates.filter((function(template){return-1===usedTemplates.findIndex((function(usedTemplate){return usedTemplate.templateKey===template.templateKey&&usedTemplate.scope===template.scope}))}))},TemplateDropdown_ref2=react.createElement(loading_indicator.b,{className:"metadata-instance-editor-template-message template-dropdown-loading-indicator"}),TemplateDropdown_TemplateDropdown=function(_React$PureComponent){function TemplateDropdown(props){var _this;return function TemplateDropdown_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TemplateDropdown),_this=function TemplateDropdown_possibleConstructorReturn(self,call){return!call||"object"!==TemplateDropdown_typeof(call)&&"function"!=typeof call?TemplateDropdown_assertThisInitialized(self):call}(this,TemplateDropdown_getPrototypeOf(TemplateDropdown).call(this,props)),TemplateDropdown_defineProperty(TemplateDropdown_assertThisInitialized(_this),"getDropdown",(function(){var _this$props=_this.props,isDropdownBusy=_this$props.isDropdownBusy,onAdd=_this$props.onAdd,activeTemplate=_this$props.activeTemplate,defaultTemplateIcon=_this$props.defaultTemplateIcon,activeTemplateIcon=_this$props.activeTemplateIcon,allTemplates=_this$props.templates,title=_this$props.title,usedTemplates=_this$props.usedTemplates,templates=_this.state.templates,hasUnusedTemplates=0<getAvailableTemplates(allTemplates,usedTemplates).length,hasTemplates=0<allTemplates.length,hasResults=0<templates.length,indicatorOrMessage=null;if(isDropdownBusy)indicatorOrMessage=TemplateDropdown_ref2;else if(!hasTemplates||!hasUnusedTemplates||!hasResults){var message={id:""};hasTemplates?hasUnusedTemplates?!hasResults&&(message=messages.a.metadataTemplatesNoResults):message=messages.a.metadataTemplatesNoRemainingTemplates:message=messages.a.metadataTemplatesServerHasNoTemplates,indicatorOrMessage=react.createElement("i",{className:"metadata-instance-editor-template-message"},react.createElement(index_es.b,message))}var renderedTemplates=templates.map((function(template){var isTemplateSelected=activeTemplate&&activeTemplate.id===template.id,buttonClassName=classnames_default()("metadata-template-dropdown-select-template",{"metadata-template-dropdown-is-selected":isTemplateSelected});return react.createElement(datalist_item.a,{key:template.id},react.createElement(plain_button.a,{className:buttonClassName,tabIndex:"-1",type:"button"},isTemplateSelected?activeTemplateIcon:defaultTemplateIcon,_this.getTemplateName(template)))}));return react.createElement(react.Fragment,null,react.createElement(selector_dropdown.a,{className:"metadata-instance-editor-template-dropdown-menu",title:title,isAlwaysOpen:!0,onSelect:function onSelect(index){onAdd(templates[index])},selector:_this.getSelector(),shouldScroll:!0},indicatorOrMessage?null:renderedTemplates),indicatorOrMessage)})),TemplateDropdown_defineProperty(TemplateDropdown_assertThisInitialized(_this),"getSelector",(function(){var intl=_this.props.intl,filterText=_this.state.filterText;return react.createElement(InputContainer,{label:"",onChange:_this.handleUserInput,placeholder:intl.formatMessage(messages.a.metadataTemplateSearchPlaceholder),type:"text",useClearButton:!0,value:filterText})})),TemplateDropdown_defineProperty(TemplateDropdown_assertThisInitialized(_this),"handleUserInput",(function(userInput){var _this$props2=_this.props,allTemplates=_this$props2.templates,usedTemplates=_this$props2.usedTemplates,filterText=userInput,templates=getAvailableTemplates(allTemplates,usedTemplates);_this.setState({filterText:filterText,templates:templates.filter((function(template){return(template.templateKey===constants.k?messages.a.customTitle.defaultMessage:template.displayName).toLowerCase().includes(filterText.toLowerCase())}))})})),TemplateDropdown_defineProperty(TemplateDropdown_assertThisInitialized(_this),"onOpen",(function(){var _this$props3=_this.props,onDropdownToggle=_this$props3.onDropdownToggle,templates=_this$props3.templates,usedTemplates=_this$props3.usedTemplates;onDropdownToggle&&onDropdownToggle(!0),_this.setState({isDropdownOpen:!0,filterText:"",templates:getAvailableTemplates(templates,usedTemplates)})})),TemplateDropdown_defineProperty(TemplateDropdown_assertThisInitialized(_this),"onClose",(function(){var onDropdownToggle=_this.props.onDropdownToggle;onDropdownToggle&&onDropdownToggle(!1),_this.setState({isDropdownOpen:!1})})),TemplateDropdown_defineProperty(TemplateDropdown_assertThisInitialized(_this),"renderEntryButton",(function(){var entryButton=_this.props.entryButton,isDropdownOpen=_this.state.isDropdownOpen,buttonToggleClassName=classnames_default()("lnk",{"is-toggled":isDropdownOpen});return entryButton||react.createElement(plain_button.a,{"data-resin-target":"metadata-templateaddmenu",className:buttonToggleClassName,type:"button"},react.createElement(MenuToggle.a,null,react.createElement(index_es.b,messages.a.metadataTemplateAdd)))})),_this.state={isDropdownOpen:!1,filterText:"",templates:getAvailableTemplates(props.templates,props.usedTemplates)},_this}return function TemplateDropdown_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&TemplateDropdown_setPrototypeOf(subClass,superClass)}(TemplateDropdown,_React$PureComponent),function TemplateDropdown_createClass(Constructor,protoProps,staticProps){return protoProps&&TemplateDropdown_defineProperties(Constructor.prototype,protoProps),staticProps&&TemplateDropdown_defineProperties(Constructor,staticProps),Constructor}(TemplateDropdown,[{key:"componentDidUpdate",value:function componentDidUpdate(_ref3){var prevTemplates=_ref3.templates,prevUsedTemplates=_ref3.usedTemplates,_this$props4=this.props,templates=_this$props4.templates,usedTemplates=_this$props4.usedTemplates;isEqual_default()(prevTemplates,templates)&&isEqual_default()(prevUsedTemplates,usedTemplates)||this.setState({templates:getAvailableTemplates(templates,usedTemplates)})}},{key:"getTemplateName",value:function getTemplateName(template){return template.templateKey===constants.k?react.createElement(index_es.b,TemplateDropdown_extends({className:"template-display-name"},messages.a.customTitle)):react.createElement("div",{className:"template-display-name"},template.displayName)}},{key:"render",value:function render(){var className=this.props.className,flyoutClassName=classnames_default()("metadata-instance-editor-template-dropdown-flyout",className);return react.createElement(flyout.a,{className:flyoutClassName,closeOnClick:!0,closeOnClickOutside:!0,onClose:this.onClose,onOpen:this.onOpen,position:"bottom-left",shouldDefaultFocus:!0},this.renderEntryButton(),react.createElement(flyout.b,null,this.getDropdown()))}}]),TemplateDropdown}(react.PureComponent);TemplateDropdown_TemplateDropdown.displayName="TemplateDropdown",TemplateDropdown_TemplateDropdown.__docgenInfo={description:"",methods:[{name:"getDropdown",docblock:null,modifiers:[],params:[],returns:null},{name:"getSelector",docblock:"Returns the input field for the drop down\n\n@return {React.Node} - input selector",modifiers:[],params:[],returns:{description:"input selector",type:{name:"React.Node"}},description:"Returns the input field for the drop down"},{name:"getTemplateName",docblock:"Returns template display name.\nFor custom metadata we have it on the client.\n\n@return {React.Node} - string or formatted name",modifiers:[],params:[{name:"template",type:{name:"MetadataTemplate",alias:"MetadataTemplate"}}],returns:{description:"string or formatted name",type:{name:"ReactNode",raw:"React.Node"}},description:"Returns template display name.\nFor custom metadata we have it on the client."},{name:"handleUserInput",docblock:"Updates the filter text and filters the results\n\n@param {UserInput} userInput - input value returned from onChangeHandler from SearchForm.js\n@return {void}",modifiers:[],params:[{name:"userInput",description:"input value returned from onChangeHandler from SearchForm.js",type:{name:"string"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Updates the filter text and filters the results"},{name:"onOpen",docblock:null,modifiers:[],params:[],returns:null},{name:"onClose",docblock:null,modifiers:[],params:[],returns:null},{name:"renderEntryButton",docblock:null,modifiers:[],params:[],returns:null}],displayName:"TemplateDropdown",props:{activeTemplate:{required:!1,flowType:{name:"MetadataTemplate",nullable:!0},description:""},activeTemplateIcon:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:""},className:{required:!1,flowType:{name:"string"},description:""},defaultTemplateIcon:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:""},entryButton:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:""},intl:{required:!0,flowType:{name:"any"},description:""},isDropdownBusy:{required:!1,flowType:{name:"boolean"},description:""},onAdd:{required:!0,flowType:{name:"signature",type:"function",raw:"(template: MetadataTemplate) => void",signature:{arguments:[{name:"template",type:{name:"MetadataTemplate"}}],return:{name:"void"}}},description:""},onDropdownToggle:{required:!1,flowType:{name:"signature",type:"function",raw:"(isDropdownOpen: boolean) => void",signature:{arguments:[{name:"isDropdownOpen",type:{name:"boolean"}}],return:{name:"void"}}},description:""},templates:{required:!0,flowType:{name:"Array",elements:[{name:"MetadataTemplate"}],raw:"Array<MetadataTemplate>"},description:""},title:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:""},usedTemplates:{required:!0,flowType:{name:"Array",elements:[{name:"MetadataTemplate"}],raw:"Array<MetadataTemplate>"},description:""}}};var features_metadata_instance_editor_TemplateDropdown=Object(index_es.g)(TemplateDropdown_TemplateDropdown);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/features/metadata-instance-editor/TemplateDropdown.js"]={name:"TemplateDropdown",docgenInfo:TemplateDropdown_TemplateDropdown.__docgenInfo,path:"src/features/metadata-instance-editor/TemplateDropdown.js"});var logger_constants=__webpack_require__(562),utils_error=__webpack_require__(21),performance=__webpack_require__(561),api_context=__webpack_require__(3183),error_boundary=__webpack_require__(1111),common_logger=__webpack_require__(1113),src_constants=__webpack_require__(1);__webpack_require__(3312);function MetadataSidebar_typeof(obj){return(MetadataSidebar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function MetadataSidebar_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function MetadataSidebar_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?MetadataSidebar_ownKeys(Object(source),!0).forEach((function(key){MetadataSidebar_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):MetadataSidebar_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function MetadataSidebar_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function MetadataSidebar_getPrototypeOf(o){return(MetadataSidebar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function MetadataSidebar_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function MetadataSidebar_setPrototypeOf(o,p){return(MetadataSidebar_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function MetadataSidebar_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__.d(__webpack_exports__,"MetadataSidebarComponent",(function(){return MetadataSidebar_MetadataSidebar}));var MARK_NAME_JS_READY="".concat(src_constants.Nd,"_").concat(logger_constants.a);Object(performance.b)(MARK_NAME_JS_READY);var MetadataSidebar_ref3=react.createElement(LoadingIndicator.a,null),MetadataSidebar_MetadataSidebar=function(_React$PureComponent){function MetadataSidebar(props){var _this;return function MetadataSidebar_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MetadataSidebar),_this=function MetadataSidebar_possibleConstructorReturn(self,call){return!call||"object"!==MetadataSidebar_typeof(call)&&"function"!=typeof call?MetadataSidebar_assertThisInitialized(self):call}(this,MetadataSidebar_getPrototypeOf(MetadataSidebar).call(this,props)),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"state",{isLoading:!1}),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"onApiError",(function(error,code){var newState=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},onError=_this.props.onError,status=error.status,isValidError=Object(utils_error.d)(status);_this.setState(MetadataSidebar_objectSpread({error:elements_common_messages.a.sidebarMetadataEditingErrorContent,isLoading:!1},newState)),onError(error,code,MetadataSidebar_defineProperty({error:error},src_constants.vd,isValidError))})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"onRemove",(function(id){var api=_this.props.api,file=_this.state.file,editor=_this.getEditor(id);editor&&file&&api.getMetadataAPI(!1).deleteMetadata(file,editor.template,(function(){return _this.onRemoveSuccessHandler(editor)}),_this.onApiError)})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"onAddSuccessHandler",(function(editor){var _this$state$editors=_this.state.editors,clone=(void 0===_this$state$editors?[]:_this$state$editors).slice(0);clone.push(editor),_this.setState({editors:clone,isLoading:!1})})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"onAdd",(function(template){var api=_this.props.api,file=_this.state.file;file&&(_this.setState({isLoading:!0}),api.getMetadataAPI(!1).createMetadata(file,template,_this.onAddSuccessHandler,_this.onApiError))})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"onSave",(function(id,ops){var api=_this.props.api,file=_this.state.file,oldEditor=_this.getEditor(id);oldEditor&&file&&api.getMetadataAPI(!1).updateMetadata(file,oldEditor.template,ops,(function(newEditor){_this.replaceEditor(oldEditor,newEditor)}),(function(error,code){_this.onSaveErrorHandler(oldEditor,error,code)}))})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"onModification",(function(id,isDirty){var oldEditor=_this.getEditor(id);if(oldEditor){var newEditor=MetadataSidebar_objectSpread({},oldEditor,{isDirty:isDirty});_this.replaceEditor(oldEditor,newEditor)}})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"fetchMetadataErrorCallback",(function(e,code){_this.onApiError(e,code,{editors:void 0,error:elements_common_messages.a.sidebarMetadataFetchingErrorContent,templates:void 0})})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"fetchMetadataSuccessCallback",(function(_ref){var editors=_ref.editors,templates=_ref.templates,_this$props=_this.props,selectedTemplateKey=_this$props.selectedTemplateKey,templateFilters=_this$props.templateFilters;_this.setState({editors:editors.slice(0),error:void 0,isLoading:!1,templates:normalizeTemplates(templates,selectedTemplateKey,templateFilters)})})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"fetchFileErrorCallback",(function(e,code){_this.onApiError(e,code,{error:elements_common_messages.a.sidebarFileFetchingErrorContent,file:void 0})})),MetadataSidebar_defineProperty(MetadataSidebar_assertThisInitialized(_this),"fetchFileSuccessCallback",(function(file){var currentFile=_this.state.file,currentCanUpload=get_default()(currentFile,src_constants.Fc,!1),newCanUpload=get_default()(file,src_constants.Fc,!1),callback=currentFile&&currentCanUpload===newCanUpload?noop_default.a:_this.fetchMetadata;_this.setState({file:file},callback)})),_this.props.logger.onReadyMetric({endMarkName:MARK_NAME_JS_READY}),_this}return function MetadataSidebar_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&MetadataSidebar_setPrototypeOf(subClass,superClass)}(MetadataSidebar,_React$PureComponent),function MetadataSidebar_createClass(Constructor,protoProps,staticProps){return protoProps&&MetadataSidebar_defineProperties(Constructor.prototype,protoProps),staticProps&&MetadataSidebar_defineProperties(Constructor,staticProps),Constructor}(MetadataSidebar,[{key:"componentDidMount",value:function componentDidMount(){this.fetchFile()}},{key:"canEdit",value:function canEdit(){var file=this.state.file;return get_default()(file,src_constants.Fc,!1)}},{key:"getEditor",value:function getEditor(id){var _this$state$editors2=this.state.editors;return(void 0===_this$state$editors2?[]:_this$state$editors2).find((function(_ref2){return _ref2.instance.id===id}))}},{key:"onRemoveSuccessHandler",value:function onRemoveSuccessHandler(editor){var _this$state$editors3=this.state.editors,editors=void 0===_this$state$editors3?[]:_this$state$editors3,clone=editors.slice(0);clone.splice(editors.indexOf(editor),1),this.setState({editors:clone})}},{key:"replaceEditor",value:function replaceEditor(oldEditor,newEditor){var _this$state$editors4=this.state.editors,editors=void 0===_this$state$editors4?[]:_this$state$editors4,clone=editors.slice(0);clone.splice(editors.indexOf(oldEditor),1,newEditor),this.setState({editors:clone})}},{key:"onSaveErrorHandler",value:function onSaveErrorHandler(oldEditor,error,code){var clone=MetadataSidebar_objectSpread({},oldEditor,{hasError:!0});this.replaceEditor(oldEditor,clone),this.onApiError(error,code)}},{key:"fetchMetadata",value:function fetchMetadata(){var _this$props2=this.props,api=_this$props2.api,isFeatureEnabled=_this$props2.isFeatureEnabled,file=this.state.file;file&&api.getMetadataAPI(!1).getMetadata(file,this.fetchMetadataSuccessCallback,this.fetchMetadataErrorCallback,isFeatureEnabled,{refreshCache:!0})}},{key:"fetchFile",value:function fetchFile(){var _this$props3=this.props,api=_this$props3.api,fileId=_this$props3.fileId;api.getFileAPI().getFile(fileId,this.fetchFileSuccessCallback,this.fetchFileErrorCallback,{fields:[src_constants.sc,src_constants.Ec],refreshCache:!0})}},{key:"refresh",value:function refresh(){this.fetchMetadata()}},{key:"render",value:function render(){var _this$state=this.state,editors=_this$state.editors,file=_this$state.file,error=_this$state.error,isLoading=_this$state.isLoading,templates=_this$state.templates,_this$props4=this.props,elementId=_this$props4.elementId,selectedTemplateKey=_this$props4.selectedTemplateKey,showEditor=!!file&&!!templates&&!!editors,canEdit=this.canEdit(),showEmptyContent=showEditor&&0===editors.length;return react.createElement(SidebarContent.a,{actions:showEditor&&canEdit?react.createElement(features_metadata_instance_editor_TemplateDropdown,{hasTemplates:templates&&0!==templates.length,isDropdownBusy:!1,onAdd:this.onAdd,templates:templates,usedTemplates:editors.map((function(editor){return editor.template}))}):null,className:"bcs-metadata",elementId:elementId,sidebarView:src_constants.ee,title:react.createElement(index_es.b,elements_common_messages.a.sidebarMetadataTitle)},error&&react.createElement(InlineError.a,{title:react.createElement(index_es.b,elements_common_messages.a.error)},react.createElement(index_es.b,error)),!error&&!showEditor&&MetadataSidebar_ref3,showEditor&&react.createElement(LoadingIndicatorWrapper.a,{className:"metadata-instance-editor",isLoading:isLoading},showEmptyContent?react.createElement(metadata_instance_editor_EmptyContent,{canAdd:canEdit}):react.createElement(metadata_instance_editor_Instances,{editors:editors,onModification:this.onModification,onRemove:this.onRemove,onSave:this.onSave,selectedTemplateKey:selectedTemplateKey})))}}]),MetadataSidebar}(react.PureComponent);MetadataSidebar_MetadataSidebar.displayName="MetadataSidebar",MetadataSidebar_defineProperty(MetadataSidebar_MetadataSidebar,"defaultProps",{isFeatureEnabled:!0}),MetadataSidebar_MetadataSidebar.__docgenInfo={description:"",methods:[{name:"onApiError",docblock:"Common error callback\n\n@param {Error} error - API error\n@param {string} code - error code\n@param {Object} [newState] - optional state to set\n@return {void}",modifiers:[],params:[{name:"error",description:"API error",type:{name:"ElementsXhrError",alias:"ElementsXhrError"},optional:!1},{name:"code",description:"error code",type:{name:"string"},optional:!1},{name:"newState"}],returns:null,description:"Common error callback"},{name:"canEdit",docblock:"Checks upload permission\n\n@return {boolean} - true if metadata can be edited",modifiers:[],params:[],returns:{description:"true if metadata can be edited",type:{name:"boolean"}},description:"Checks upload permission"},{name:"getEditor",docblock:"Finds the editor we are editing\n\n@param {number} id - instance id\n@return {Object} editor instance",modifiers:[],params:[{name:"id",description:"instance id",type:{name:"string"},optional:!1}],returns:{description:"editor instance",type:{name:"MetadataEditor",nullable:!0}},description:"Finds the editor we are editing"},{name:"onRemoveSuccessHandler",docblock:"Instance remove success handler\n\n@param {Object} editor - the editor to remove\n@return {void}",modifiers:[],params:[{name:"editor",description:"the editor to remove",type:{name:"MetadataEditor",alias:"MetadataEditor"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Instance remove success handler"},{name:"onRemove",docblock:"Instance remove handler\n\n@param {string} id - instance id\n@return {void}",modifiers:[],params:[{name:"id",description:"instance id",type:{name:"string"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Instance remove handler"},{name:"onAddSuccessHandler",docblock:"Instance add success handler\n\n@param {Object} editor - instance editor\n@return {void}",modifiers:[],params:[{name:"editor",description:"instance editor",type:{name:"MetadataEditor",alias:"MetadataEditor"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Instance add success handler"},{name:"onAdd",docblock:"Instance add handler\n\n@param {Object} template - instance template\n@return {void}",modifiers:[],params:[{name:"template",description:"instance template",type:{name:"MetadataTemplate",alias:"MetadataTemplate"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Instance add handler"},{name:"replaceEditor",docblock:"Instance save success handler\n\n@param {Object} oldEditor - prior editor\n@param {Object} newEditor - updated editor\n@return {void}",modifiers:[],params:[{name:"oldEditor",description:"prior editor",type:{name:"MetadataEditor",alias:"MetadataEditor"},optional:!1},{name:"newEditor",description:"updated editor",type:{name:"MetadataEditor",alias:"MetadataEditor"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Instance save success handler"},{name:"onSaveErrorHandler",docblock:"Instance save error handler\n\n@param {Object} oldEditor - prior editor\n@param {Object} error - api error\n@param {string} code - error code\n@return {void}",modifiers:[],params:[{name:"oldEditor",description:"prior editor",type:{name:"MetadataEditor",alias:"MetadataEditor"},optional:!1},{name:"error",description:"api error",type:{name:"ElementsXhrError",alias:"ElementsXhrError"},optional:!1},{name:"code",description:"error code",type:{name:"string"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Instance save error handler"},{name:"onSave",docblock:"Instance save handler\n\n@param {string} id - instance id\n@param {Array} ops - json patch ops\n@return {void}",modifiers:[],params:[{name:"id",description:"instance id",type:{name:"string"},optional:!1},{name:"ops",description:"json patch ops",type:{name:"JSONPatchOperations",alias:"JSONPatchOperations"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Instance save handler"},{name:"onModification",docblock:"Instance dirty handler\n\n@param {string} id - instance id\n@param {boolean} isDirty - instance dirty state\n@return {void}",modifiers:[],params:[{name:"id",description:"instance id",type:{name:"string"},optional:!1},{name:"isDirty",description:"instance dirty state",type:{name:"boolean"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Instance dirty handler"},{name:"fetchMetadataErrorCallback",docblock:"Handles a failed metadata fetch\n\n@private\n@param {Error} e - API error\n@param {string} code - error code\n@return {void}",modifiers:[],params:[{name:"e",description:"API error",type:{name:"ElementsXhrError",alias:"ElementsXhrError"},optional:!1},{name:"code",description:"error code",type:{name:"string"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Handles a failed metadata fetch"},{name:"fetchMetadataSuccessCallback",docblock:"Handles a successful metadata fetch\n\n@param {Object} metadata - instances and templates\n@return {void}",modifiers:[],params:[{name:"{\n    editors,\n    templates,\n}: {\n    editors: Array<MetadataEditor>,\n    templates: Array<MetadataTemplate>,\n}",type:{name:"signature",type:"object",raw:"{\n    editors: Array<MetadataEditor>,\n    templates: Array<MetadataTemplate>,\n}",signature:{properties:[{key:"editors",value:{name:"Array",elements:[{name:"MetadataEditor"}],raw:"Array<MetadataEditor>",required:!0}},{key:"templates",value:{name:"Array",elements:[{name:"MetadataTemplate"}],raw:"Array<MetadataTemplate>",required:!0}}]}}}],returns:{description:null,type:{name:"void"}},description:"Handles a successful metadata fetch"},{name:"fetchMetadata",docblock:"Fetches the metadata editors\n\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Fetches the metadata editors"},{name:"fetchFileErrorCallback",docblock:"Handles a failed file fetch\n\n@private\n@param {Error} e - API error\n@param {string} code - error code\n@return {void}",modifiers:[],params:[{name:"e",description:"API error",type:{name:"ElementsXhrError",alias:"ElementsXhrError"},optional:!1},{name:"code",description:"error code",type:{name:"string"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Handles a failed file fetch"},{name:"fetchFileSuccessCallback",docblock:"Handles a successful file fetch.\nCan be called multiple times when refreshing caches.\nOn file load we should fetch metadata, but we shouldn't need to fetch\nif the file permissions haven't changed from a prior file fetch.\nMetadata editors mostly care about upload permission.\n\n@param {Object} file - the Box file\n@return {void}",modifiers:[],params:[{name:"file",description:"the Box file",type:{name:"BoxItem",alias:"BoxItem"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Handles a successful file fetch.\nCan be called multiple times when refreshing caches.\nOn file load we should fetch metadata, but we shouldn't need to fetch\nif the file permissions haven't changed from a prior file fetch.\nMetadata editors mostly care about upload permission."},{name:"fetchFile",docblock:"Fetches a file with the fields needed for metadata sidebar\n\n@return {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Fetches a file with the fields needed for metadata sidebar"},{name:"refresh",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}}],displayName:"MetadataSidebar",props:{isFeatureEnabled:{defaultValue:{value:"true",computed:!1},required:!1,flowType:{name:"boolean"},description:""},api:{required:!0,flowType:{name:"API"},description:""},elementId:{required:!0,flowType:{name:"string"},description:""},fileId:{required:!0,flowType:{name:"string"},description:""},selectedTemplateKey:{required:!1,flowType:{name:"string"},description:""},templateFilters:{required:!1,flowType:{name:"union",raw:"Array<string> | string",elements:[{name:"Array",elements:[{name:"string"}],raw:"Array<string>"},{name:"string"}]},description:""}}};__webpack_exports__.default=flow_default()([Object(common_logger.a)(src_constants.Nd),Object(error_boundary.a)(src_constants.Nd),api_context.b])(MetadataSidebar_MetadataSidebar);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/MetadataSidebar.js"]={name:"MetadataSidebar",docgenInfo:MetadataSidebar_MetadataSidebar.__docgenInfo,path:"src/elements/content-sidebar/MetadataSidebar.js"})}}]);
//# sourceMappingURL=metadata-sidebar.84720d5f22f57bab8d32.bundle.js.map